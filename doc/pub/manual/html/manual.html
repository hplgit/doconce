
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DocOnce Description</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>

        <script src="http://sagecell.sagemath.org/static/jquery.min.js"></script>
        <script src="http://sagecell.sagemath.org/static/embedded_sagecell.js"></script>

        <script>sagecell.makeSagecell({inputLocation: ".sage"});</script>

        <style type="text/css">
                .sagecell .CodeMirror-scroll {
                        overflow-y: hidden;
                        overflow-x: auto;
                }
                .sagecell .CodeMirror {
                        height: auto;
                }
        </style>

    
    <link rel="top" title="DocOnce Description" href="index.html" />
    <link rel="prev" title="DocOnce Description" href="index.html" />
 
  
       <style type="text/css">
         div.admonition {
           background-color: whiteSmoke;
           border: 1px solid #bababa;
         }
       </style>
      </head>
    
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="DocOnce Description"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DocOnce Description</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="doconce-description">
<h1>DocOnce Description<a class="headerlink" href="#doconce-description" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Hans Petter Langtangen</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">Oct 27, 2015</td>
</tr>
</tbody>
</table>
<div class="section" id="what-is-doconce">
<span id="id1"></span><h2>What Is DocOnce?<a class="headerlink" href="#what-is-doconce" title="Permalink to this headline">¶</a></h2>
<p id="index-0">DocOnce is a very simple and minimally tagged markup language that
looks like ordinary ASCII text, much like what you would use in an
email, but the text can be transformed to numerous other formats,
including HTML, Sphinx, LaTeX, PDF, reStructuredText (reST), Markdown,
MediaWiki, Creole wiki, blogger.com, wordpress.com,
Epytext, and also plain (untagged) text for email.
From reST or Markdown you can go to XML, OpenOffice, MS
Word, HTML, LaTeX, PDF, DocBook, GNU Texinfo, and more.</p>
<p>DocOnce supports a working strategy of never duplicating information.
Text is written in a single place and then transformed to a number of
different destinations of diverse type: scientific reports, software
manuals, books, thesis, software source code, wikis, blog posts, emails,
etc.  The slogan is: &#8220;Document once, include anywhere&#8221;.</p>
<p>Here are some DocOnce features:</p>
<blockquote>
<div><ul class="simple">
<li>DocOnce addresses small and large documents containing
<em>text with much computer source code and
LaTeX mathematics</em>, where the output is desired in different formats
such as LaTeX, pdfLaTeX, Sphinx, HTML,
MediaWiki, blogger.com, and wordpress.com.
A piece of DocOnce text can enter (e.g.) a classical
science book, an ebook, a web document, and a blog post.</li>
<li>DocOnce offers a range of HTML designs, including many
Bootstrap and Sphinx styles and <a class="reference external" href="http://ethanschoonover.com/solarized">solarized color schemes</a>.
A special feature is the many styles for admonitions (boxes for
warning, notice, question, etc.) in HTML and LaTeX.</li>
<li>DocOnce targets in particular large book projects where many different
pieces of text and software can be assembled in different ways
and published in different formats for different devices
(see <a class="reference external" href="http://hplgit.github.io/setup4book-doconce/doc/web/index.html">example</a>).</li>
<li>DocOnce enables authors who write for many types of media
(blog posts, wikis, LaTeX manuscripts, Sphinx, HTML) to use a common
source language such that lots of different pieces can easily be
brought together later to form a coherent (big) document.</li>
<li>DocOnce has good support for copying computer code
directly from the source code files via regular expressions
for the start and end lines.</li>
<li>DocOnce first runs two preprocessors (Preprocess and Mako), which
allow programming constructs (includes, if-tests, function calls, variables)
as part of the text. This feature makes it easy to write <em>one text</em>
with different flavors: long vs short text, Python vs Matlab code
examples, experimental vs mature content.</li>
<li>DocOnce can be converted to plain <em>untagged</em> text,
often desirable for email and computer code documentation.</li>
<li>DocOnce markup does include tags, so the format is more tagged than
Markdown, but less than reST, and very much less than
LaTeX and HTML.</li>
<li>Compared to the related tools Sphinx and Markdown, DocOnce
allows more types of equations (especially systems of
equations with references), has more flexible
inclusion of source code, integrates preprocessors, has
special support for exercises, and produces
cleaner LaTeX and HTML output.</li>
</ul>
</div></blockquote>
<p><strong>History.</strong>
The DocOnce development started in 2006 at a time when
most popular markup languages used quite some tagging (LaTeX,
reStructuredText, HTML).  Later, almost untagged markup languages
became popular, especially <a class="reference external" href="http://daringfireball.net/projects/markdown/">Markdown</a> and its sisters
<a class="reference external" href="http://fletcherpenney.net/multimarkdown/">MultiMarkdown</a>,
<a class="reference external" href="http://johnmacfarlane.net/pandoc/">Pandoc-extended Markdown</a>, and
<a class="reference external" href="https://leanpub.com/markua/">Markua</a>..  DocOnce looks much like
Markdown and is in particular close to the functionality and nature of
MultiMarkdown. The advantage of DocOnce, however, is a series of
features for supporting both small and large documents (books in
particular) with much mathematics and computer code. While Markdown
tools are heavily geared toward HTML, DocOnce has strong support for
LaTeX since this is the dominating format for books and articles
on mathematical subjects.
DocOnce can also output Sphinx (not supported by Pandoc or
MultiMarkdown), a format that is very attractive for presenting
scientific material and software documentation on the web.  (DocOnce
allows basic <a class="reference external" href="https://guides.github.com/features/mastering-markdown/">Markdown syntax</a> as input,
extended with DocOnce syntax as you like.)</p>
<p><strong>Disclaimer.</strong>
DocOnce applies <em>text transformations</em>, mostly via
regular expressions. This is not a fool-proof method of translation
compared to real parsing. Moreover, the possibility for tweaking the
layout in the DocOnce document is obviously limited (at least compared
to LaTeX and HTML) since the text can go to all sorts of markup
languages. This disadvantage can be quite easily compensated, however,
by clever use of the programmable Mako preprocessor used by DocOnce
and by automatic editing of the generated output (e.g., via regular
expressions).</p>
<div class="section" id="demos">
<h3>Demos<a class="headerlink" href="#demos" title="Permalink to this headline">¶</a></h3>
<p id="index-1">The current text is generated from a DocOnce format stored in the
directory</p>
<div class="highlight-text"><div class="highlight"><pre>doc/manual/manual.do.txt
</pre></div>
</div>
<p>file in the DocOnce source code tree. Here you can run a
<code class="docutils literal"><span class="pre">make.sh</span></code> script to generate a lot of different
formats: HTML, LaTeX, plain text, etc., stored in the subdirectory <code class="docutils literal"><span class="pre">demo</span></code>.
To successfully run this script and compile all the different versions,
you must have quite a lot of software installed, see
the the section <a class="reference internal" href="#install-doconce"><span class="std std-ref">Installation of DocOnce and its Dependencies</span></a> for detailed information.
However,
the most commonly used formats of this manual are
fortunately also accessible through the web:
<a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/manual/manual.html">HTML</a>,
<a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/manual/html/index.html">Sphinx</a>,
and
<a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/manual/manual.pdf">PDF</a>.
DocOnce supports a lot of different layouts of documents, see
the <a class="reference external" href="http://hplgit.github.com/teamods/writing_reports/index.html">collection of various versions of a scientific report</a>.</p>
<p>Another demo is found in</p>
<div class="highlight-text"><div class="highlight"><pre>doc/tutorial/tutorial.do.txt
</pre></div>
</div>
<p>In the <code class="docutils literal"><span class="pre">tutorial</span></code> directory there is also a <code class="docutils literal"><span class="pre">make.sh</span></code> file producing a
lot of formats in the subdirectory <code class="docutils literal"><span class="pre">demo</span></code>.
The three most common formats can be found on the web:
<a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/tutorial/tutorial.html">HTML</a>,
<a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/tutorial/html/index.html">Sphinx</a>,
and
<a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/tutorial/tutorial.pdf">PDF</a>.</p>
<div class="admonition-this-guide-is-for-the-experienced-doconce-writer admonition">
<p class="first admonition-title">This guide is for the experienced DocOnce writer</p>
<p class="last">Do not read the detailed descriptions of DocOnce syntax that follows
(this is a manual!) before you have read the tutorial and played
a little around with a simple document.</p>
</div>
</div>
</div>
<div class="section" id="markup-based-on-special-lines">
<h2>Markup Based on Special Lines<a class="headerlink" href="#markup-based-on-special-lines" title="Permalink to this headline">¶</a></h2>
<p>The DocOnce markup language has a concept called <em>special lines</em>.
Such lines starts with a markup at the very beginning of the
line and are used to mark document title, authors, date,
sections, subsections, paragraphs, figures, movies, lists, etc.</p>
<div class="section" id="heading-with-title-and-author-s">
<h3>Heading with title and author(s)<a class="headerlink" href="#heading-with-title-and-author-s" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-2"></span><span class="target" id="index-3"></span><span class="target" id="index-4"></span><span class="target" id="index-5"></span><span class="target" id="index-6"></span><p>Lines starting with <code class="docutils literal"><span class="pre">TITLE:</span></code>, <code class="docutils literal"><span class="pre">AUTHOR:</span></code>, and <code class="docutils literal"><span class="pre">DATE:</span></code> are optional and used
to identify a title of the document, the authors, and the date. The
title is treated as the rest of the line, so is the date, but the
author text consists of the name and associated institution(s) with
the syntax</p>
<div class="highlight-text"><div class="highlight"><pre>AUTHOR: name at institution1 and institution2 and institution3
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">at</span></code> with surrounding spaces
is essential for adding information about institution(s)
to the author name, and the <code class="docutils literal"><span class="pre">and</span></code> with surrounding spaces is
essential as delimiter between different institutions.
An email address can optionally be included, using the syntax</p>
<div class="highlight-text"><div class="highlight"><pre>AUTHOR: name Email: somename@site.net at institution1 and institution2
</pre></div>
</div>
<p>Multiple authors require multiple <code class="docutils literal"><span class="pre">AUTHOR:</span></code> lines. All information
associated with <code class="docutils literal"><span class="pre">TITLE:</span></code> and <code class="docutils literal"><span class="pre">AUTHOR:</span></code> keywords must appear on a single
line.  Here is an example:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gh">TITLE: On an Ultimate Markup Language</span>
<span class="gh">AUTHOR:</span> H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory &amp; Dept. of Informatics, Univ. of Oslo
<span class="gh">AUTHOR:</span> Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
<span class="gh">AUTHOR:</span> A. Dummy Author
<span class="gh">DATE:</span> November 9, 2016
</pre></div>
</div>
<p>Note how one can specify a single institution, multiple institutions
(with <code class="docutils literal"><span class="pre">&amp;</span></code> as separator between institutions),
and no institution. In some formats (including <code class="docutils literal"><span class="pre">rst</span></code> and <code class="docutils literal"><span class="pre">sphinx</span></code>)
only the author names appear. Some formats have
&#8220;intelligence&#8221; in listing authors and institutions, e.g., the plain text
format:</p>
<div class="highlight-text"><div class="highlight"><pre>Hans Petter Langtangen [1, 2]
Kaare Dump  (dump@cyb.space.com) [3]
A. Dummy Author

[1] Center for Biomedical Computing, Simula Research Laboratory
[2] Department of Informatics, University of Oslo
[3] Segfault, Cyberspace Inc.
</pre></div>
</div>
<p>Similar typesetting is done for LaTeX and HTML formats.</p>
<p>The current date can be specified as <code class="docutils literal"><span class="pre">today</span></code>.</p>
</div>
<div class="section" id="copyright">
<span id="id2"></span><h3>Copyright<a class="headerlink" href="#copyright" title="Permalink to this headline">¶</a></h3>
<p id="index-7">A copyright notice can be given as part of the <code class="docutils literal"><span class="pre">AUTHOR:</span></code> command.
The syntax is</p>
<div class="highlight-text"><div class="highlight"><pre>{copyright,year1-year2|license}
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">year1-year2</span></code> represents the year(s) and <code class="docutils literal"><span class="pre">license</span></code> represents
the type of license (e.g., Creative Commons license) if that apply.
The year and license parts can be left out. In that case, the current
year is used, and no license appears.
Note that <em>the year and the license must be identical in all copyright
specifications</em> for all authors who claim copyright!
(Otherwise, an error message is issued.)
The <code class="docutils literal"><span class="pre">{copyright...}</span></code> specification can appear after the author&#8217;s name
(and email address) and/or after an organization&#8217;s name (see examples below).</p>
<p>The syntax of the <code class="docutils literal"><span class="pre">year1-year</span></code> part goes as follows:</p>
<blockquote>
<div><ul class="simple">
<li>A single year: <code class="docutils literal"><span class="pre">2012</span></code>.</li>
<li>A range: <code class="docutils literal"><span class="pre">2006-2010</span></code>. Up to the current year is specified by <code class="docutils literal"><span class="pre">2005-present</span></code>. Any attempt to use an upper limit into the future will be replaced by <code class="docutils literal"><span class="pre">present</span></code>, e.g., <code class="docutils literal"><span class="pre">2001-2100</span></code> becomes <code class="docutils literal"><span class="pre">2001-present</span></code>.</li>
<li>A single year: <code class="docutils literal"><span class="pre">date</span></code>, which fetches the year from the <code class="docutils literal"><span class="pre">DATE:</span></code> field in the DocOnce document.</li>
</ul>
</div></blockquote>
<p>The syntax of the <code class="docutils literal"><span class="pre">license</span></code> part is flexible:</p>
<blockquote>
<div><ul class="simple">
<li>Any formulation can be given. For example, <code class="docutils literal"><span class="pre">{copyright|This</span> <span class="pre">work</span> <span class="pre">is</span> <span class="pre">released</span> <span class="pre">under</span> <span class="pre">an</span> <span class="pre">MIT</span> <span class="pre">license}</span></code>.</li>
<li>Standardized short forms for Creative Commons (CC) licenses are available.
For example, <code class="docutils literal"><span class="pre">CC</span> <span class="pre">BY</span></code>, which means a CC Attribution license. <code class="docutils literal"><span class="pre">BY</span></code> can be replaced by <code class="docutils literal"><span class="pre">BY-NC</span></code> (Attribution-NonCommercial) and other abbreviations from <a class="reference external" href="https://creativecommons.org/licenses/">https://creativecommons.org/licenses/</a>. The command-line option <code class="docutils literal"><span class="pre">--CC_license=</span></code> is used to provide a template for embedding the spelled out name of the abbreviated CC license. By default this template reads <code class="docutils literal"><span class="pre">Released</span> <span class="pre">under</span> <span class="pre">a</span> <span class="pre">CC</span> <span class="pre">%s</span> <span class="pre">4.0</span> <span class="pre">license</span></code>, where <code class="docutils literal"><span class="pre">%s</span></code> is to be replaced by the license name. A common value is <code class="docutils literal"><span class="pre">--CC_license=&quot;This</span> <span class="pre">work</span> <span class="pre">is</span> <span class="pre">released</span> <span class="pre">under</span> <span class="pre">the</span> <span class="pre">Creative</span> <span class="pre">Commons</span> <span class="pre">%s</span> <span class="pre">4.0</span> <span class="pre">license&quot;</span></code>.</li>
</ul>
</div></blockquote>
<p>How the copyright is typeset depends on the format:</p>
<blockquote>
<div><ul class="simple">
<li>LaTeX: The copyright appears as a footer on all pages (typeset with
the <code class="docutils literal"><span class="pre">\fancyfoot[C]</span></code> command from the <code class="docutils literal"><span class="pre">fancyhdr</span></code> package).
The command-line option <code class="docutils literal"><span class="pre">--latex_copyright=titlepages</span></code> leads to a copyright
statement in the footer of the titlepage and (for books) the first page
of each chapter.</li>
<li>Sphinx: The copyright is provided as the <code class="docutils literal"><span class="pre">copyright</span></code> variable in <code class="docutils literal"><span class="pre">conf.py</span></code>
and appears in the footer according to the chosen theme.</li>
<li>HTML: The copyright appears at the bottom of all pages (right before the <code class="docutils literal"><span class="pre">&lt;/body&gt;</span> <span class="pre">tag</span></code>).</li>
<li>Other formats: A copyright line is inserted after the date.</li>
</ul>
</div></blockquote>
<p>Here are some examples on specifying copyright.</p>
<div class="highlight-text"><div class="highlight"><pre>AUTHOR: Joe Doe Email:joe.doe@somemail.com {copyright}
AUTHOR: Jane Doe {copyright}
</pre></div>
</div>
<p>Output becomes &#8220;Copyright 2015, Joe Doe, Jane Doe&#8221; (if the present year
is 2015).</p>
<div class="highlight-text"><div class="highlight"><pre>AUTHOR: Joe Doe {copyright,2001-present}
</pre></div>
</div>
<p>Output becomes &#8220;Copyright 2001-2015, Joe Doe&#8221; (if the present year
is 2015).</p>
<div class="highlight-text"><div class="highlight"><pre>AUTHOR: Joe Doe {copyright,2001-2010|CC BY}
AUTHOR: Jane Doe Email:jd@kk.org {copyright,2001-2010|CC BY}
</pre></div>
</div>
<p>Output becomes &#8220;Copyright 2001-2010, Joe Doe, Jane Doe. Released under CC Attribution 4.0 license&#8221;. One can provide the option <code class="docutils literal"><span class="pre">--CC_license=&quot;This</span> <span class="pre">work</span> <span class="pre">is</span> <span class="pre">released</span> <span class="pre">under</span> <span class="pre">the</span> <span class="pre">Creative</span> <span class="pre">Commons</span> <span class="pre">%s</span> <span class="pre">4.0</span> <span class="pre">license.&quot;</span></code>, and the output
becomes &#8220;Copyright 2001-2010, Joe Doe, Jane Doe. This work is released under the Creative Commons Attribution 4.0 license.&#8221;</p>
<div class="highlight-text"><div class="highlight"><pre>AUTHOR: Joe Doe {copyright} at Digital Company {copyright}
AUTHOR: Jane Doe
</pre></div>
</div>
<p>In this case, an author and an institution (but not the second author) hold
the copyright. The output is typically &#8220;Copyright 2015, Joe Doe, Digital Company&#8221;. Below, two institutions but no authors hold the copyright:</p>
<div class="highlight-text"><div class="highlight"><pre>AUTHOR: Joe Doe at Digital Company {copyright,2015|CC BY}
AUTHOR: Jane Doe at Analog Company {copyright,2015|CC BY}
</pre></div>
</div>
<p>The output becomes &#8220;Copyright 2015, Diginal Company, Analog Company. Released under CC Attribution 4.0 license&#8221;.</p>
</div>
<div class="section" id="table-of-contents">
<h3>Table of contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-8"></span><span class="target" id="index-9"></span><p id="index-10">A table of contents can be generated by the line</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gh">TOC:</span> on
</pre></div>
</div>
<p>This line is usually placed after the <code class="docutils literal"><span class="pre">DATE:</span></code> line.
The value <code class="docutils literal"><span class="pre">off</span></code> turns off the table of contents.</p>
<p>The depth of the table of contents is dictated by the command-line
option <code class="docutils literal"><span class="pre">--toc_depth=</span></code>, which is 2 by default, meaning that sections and
subsections are included, but not subsubsections.
When making Sphinx documents, <code class="docutils literal"><span class="pre">toc_depth=</span></code> is a command-line option for
for the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinx_dir</span></code> command (and not <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code>).</p>
</div>
<div class="section" id="section-headings">
<h3>Section headings<a class="headerlink" href="#section-headings" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-11"></span><span class="target" id="index-12"></span><p id="index-13">Section headings are recognized by being surrounded by equal signs (=) or
underscores before and after the text of the headline. Different
section levels are recognized by the associated number of underscores
or equal signs (=):</p>
<blockquote>
<div><ul class="simple">
<li>9 <code class="docutils literal"><span class="pre">=</span></code> characters for chapters</li>
<li>7 for sections</li>
<li>5 for subsections</li>
<li>3 for subsubsections</li>
<li>2 <em>underscrores</em> (only! - it looks best) for paragraphs
(paragraph heading will be inlined)</li>
</ul>
</div></blockquote>
<p>Headings can be surrounded by as many blanks as desired, but the
first <code class="docutils literal"><span class="pre">=</span></code> must start in column 1 and there must one blank
on each side of the heading, between the heading and the <code class="docutils literal"><span class="pre">=</span></code> signs.
Here are examples on headings:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gh">======= Example on a Section Heading =======</span>

The running text goes here.


<span class="gh">===== Example on a Subsection Heading =====</span>

The running text goes here.

<span class="gh">=== Example on a Subsubsection Heading ===</span>

The running text goes here.

<span class="gu">__A Paragraph.__</span> The running text goes here.
</pre></div>
</div>
</div>
<div class="section" id="abstract">
<h3>Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h3>
<p id="index-14">DocOnce also supports abstracts. The syntax is like an ordinary
paragraph with heading <em>Abstract</em>, <em>Summary</em>, or <em>Preface,
but the text *must</em> be followed by a</p>
<blockquote>
<div><ul class="simple">
<li>section or paragraph heading</li>
<li>table of contents (<code class="docutils literal"><span class="pre">TOC:</span></code>)</li>
<li>date (<code class="docutils literal"><span class="pre">DATE:</span></code>)</li>
</ul>
</div></blockquote>
<p>Everything up to the first heading, table of contents, or date is
taken as the abstract.  For articles, the abstract is placed after the
date, but before the table of contents or the first ordinary
heading. For books one may insert the abstract before the date to make
appear on the first page.</p>
<p>Here are examples on an abstract and some type of ending
text (section headings, table of contents, or date).</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gu">__Abstract.__</span> This abstract
lasts up to the section heading.

<span class="gh">======= Here Is the First Section Heading =======</span>

<span class="c"># or</span>

<span class="gu">__Summary.__</span>
This is
a summary.

Even with two paragraphs. It lasts
until the table of contents.

<span class="gh">TOC:</span> on

<span class="c"># In books we may place the summary before DATE</span>

<span class="gh">TITLE: Some Title</span>
<span class="gh">AUTHOR:</span> Some Author

<span class="gu">__Summary.__</span> Here is the backmatter
promotion text for this book, appearing
on the front page...

<span class="gh">DATE:</span> today
</pre></div>
</div>
</div>
<div class="section" id="appendix">
<h3>Appendix<a class="headerlink" href="#appendix" title="Permalink to this headline">¶</a></h3>
<p id="index-15">Appendix is supported too: just let the heading start with &#8220;Appendix: &#8221;
This affects only <code class="docutils literal"><span class="pre">latex</span></code> output, where the appendix formatting
is used - all other formats just leave the heading as it is written.</p>
</div>
<div class="section" id="figures-1">
<h3>Figures<a class="headerlink" href="#figures-1" title="Permalink to this headline">¶</a></h3>
<div class="section" id="basic-syntax">
<span id="index-16"></span><h4>Basic syntax<a class="headerlink" href="#basic-syntax" title="Permalink to this headline">¶</a></h4>
<p>Figures are recognized by the special line syntax</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">FIGURE:[filename, width=600 frac=0.8] caption</span>
</pre></div>
</div>
<p>The filename can be without extension, and DocOnce will search for an
appropriate file with the right extension. If the extension is wrong,
say <code class="docutils literal"><span class="pre">.pdf</span></code> when requesting an HTML format, DocOnce tries to find another
file, and if not, the given file is converted to a proper format
(using ImageMagick&#8217;s <code class="docutils literal"><span class="pre">convert</span></code> utility).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Note the comma
between the filename and the figure size specifications and
that there should be no space around the = sign. This syntax must
be strictly followed.</p>
<p class="last">Note also that, like for <code class="docutils literal"><span class="pre">TITLE:</span></code> and <code class="docutils literal"><span class="pre">AUTHOR:</span></code> lines, all information
related to a figure line <em>must be written on the same line</em>. Introducing
newlines in a long caption will destroy the formatting (only the
part of the caption appearing on the same line as <code class="docutils literal"><span class="pre">FIGURE:</span></code> will be
included in the formatted caption).</p>
</div>
<p>The <code class="docutils literal"><span class="pre">height</span></code>, <code class="docutils literal"><span class="pre">width</span></code>, and <code class="docutils literal"><span class="pre">frac</span></code> keywords can be included
if desired and may have effect for some formats: the height and width
are used for output in the formats <code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">rst</span></code>, <code class="docutils literal"><span class="pre">sphinx</span></code>, while
the frac specification is used for <code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code> to specify
the width of the image as a fraction of the text width.</p>
</div>
<div class="section" id="figure-placement">
<h4>Figure Placement<a class="headerlink" href="#figure-placement" title="Permalink to this headline">¶</a></h4>
<p>In web formats (<code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">sphinx</span></code>, <code class="docutils literal"><span class="pre">ipynb</span></code>, <code class="docutils literal"><span class="pre">matlabnb</span></code>, wikis), the <code class="docutils literal"><span class="pre">FIGURE:</span></code> command is replaced by
an <code class="docutils literal"><span class="pre">img</span></code> tag exactly where the <code class="docutils literal"><span class="pre">FIGURE:</span></code> appears in the document.
LaTeX, however, will normally place the figure at a different location.
The generated LaTeX code applies</p>
<div class="highlight-latex"><div class="highlight"><pre><span class="k">\begin</span><span class="nb">{</span>figure<span class="nb">}</span>[!ht] <span class="c">% my:fig</span>
</pre></div>
</div>
<p>i..e, we use the
&#8220;here&#8221; option <code class="docutils literal"><span class="pre">[!ht]</span></code> to recommend a placement as near the <code class="docutils literal"><span class="pre">FIGURE:</span></code>
command as possible. One can autoedit the <code class="docutils literal"><span class="pre">.tex</span></code> file and modify the
<code class="docutils literal"><span class="pre">figure</span></code> environment options, e.g.,</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce replace &#39;{figure}[!ht]&#39; &#39;{figure}[t]&#39; mydoc.tex
</pre></div>
</div>
<p>The above command will change all <code class="docutils literal"><span class="pre">[!ht]</span></code> options to <code class="docutils literal"><span class="pre">[t]</span></code> (top).
A specific figure can also be edited, using the fact that the label
is printed at the same line as <code class="docutils literal"><span class="pre">\begin{figure}</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce subst &#39;{figure}[!ht] .+my:fig&#39; \
          &#39;{figure}[!h] % my:fig&#39; mydoc.tex
</pre></div>
</div>
<p>Of greater influence than options like <code class="docutils literal"><span class="pre">[ht]</span></code>, <code class="docutils literal"><span class="pre">[h]</span></code>, etc., is the
LaTeX code found in the preamble:</p>
<div class="highlight-latex"><div class="highlight"><pre><span class="k">\setcounter</span><span class="nb">{</span>topnumber<span class="nb">}{</span>2<span class="nb">}</span>
<span class="k">\setcounter</span><span class="nb">{</span>bottomnumber<span class="nb">}{</span>2<span class="nb">}</span>
<span class="k">\setcounter</span><span class="nb">{</span>totalnumber<span class="nb">}{</span>4<span class="nb">}</span>
<span class="k">\renewcommand</span><span class="nb">{</span><span class="k">\topfraction</span><span class="nb">}{</span>0.95<span class="nb">}</span>
<span class="k">\renewcommand</span><span class="nb">{</span><span class="k">\bottomfraction</span><span class="nb">}{</span>0.95<span class="nb">}</span>
<span class="k">\renewcommand</span><span class="nb">{</span><span class="k">\textfraction</span><span class="nb">}{</span>0<span class="nb">}</span>
<span class="k">\renewcommand</span><span class="nb">{</span><span class="k">\floatpagefraction</span><span class="nb">}{</span>0.75<span class="nb">}</span>
<span class="c">% floatpagefraction must always be less than topfraction!</span>
<span class="k">\usepackage</span><span class="na">[section]</span><span class="nb">{</span>placeins<span class="nb">}</span>  <span class="c">% flush all figs before next section</span>
</pre></div>
</div>
<p>These values can be manipulated to fine-tune how LaTeX places figures.</p>
</div>
<div class="section" id="figure-references">
<h4>Figure References<a class="headerlink" href="#figure-references" title="Permalink to this headline">¶</a></h4>
<p>Suppose we have the DocOnce code</p>
<div class="highlight-doconce"><div class="highlight"><pre>The results are presented in Figure ref{myfig}.

<span class="nb">FIGURE:[myfigfile, width=400 frac=0.8] Results for $a=2$. label{myfig}</span>
</pre></div>
</div>
<p>Different formats will display the figure reference differently.
In LaTeX, DocOnce generates the code <cite>... in Figure |nbsp| :ref:`myfig&#8221;, which
reads `</cite>... in Figure 5&#8221; (article) or &#8221;... in Figure 5.2&#8221; (book).
Requesting the <code class="docutils literal"><span class="pre">varioref</span></code> package (with <code class="docutils literal"><span class="pre">--latex_packages=varioref</span></code>)
makes DocOnce emit <code class="docutils literal"><span class="pre">\vref</span></code> references and then the above reference
becomes <cite>in Figure |nbsp| v:ref:`myfig&#8221;, which reads
`</cite>... in Figure 5 on page 67&#8221;. However, if Figure 5 appears on the
present page where the reference is done, the page reference is
left out, and one can read just &#8220;in Figure 5&#8221;.</p>
<p>Sphinx applies the caption as name of the figure, so the reference
reads &#8221;... in Figure Results for .&#8221;, and the caption/name is a link
to the figure. Note that Sphinx strips off the mathematics from
the caption. In HTML, figures are given numbers, so the reference
reads &#8221;... in Figure 3&#8221;, with the figure number as a link to the
place in the document where the <code class="docutils literal"><span class="pre">FIGURE:</span></code> command was located.
The IPython notebook format makes a Markdown link: <code class="docutils literal"><span class="pre">...</span> <span class="pre">in</span> <span class="pre">[Figure](#myfig)</span></code>,
where <code class="docutils literal"><span class="pre">myfig</span></code> is an anchor such one can click on <code class="docutils literal"><span class="pre">Figure</span></code>.
The plain text format displays the reference as &#8221;... in Figure <span class="xref std std-ref">myfig</span>.&#8221;.
Wiki formats show &#8221;... in Figure myfig.&#8221;. So to summarize, figure
references work best in LaTeX, HTML, and Sphinx. Other formats
should avoid figure references with labels.</p>
</div>
<div class="section" id="inline-figures">
<h4>Inline Figures<a class="headerlink" href="#inline-figures" title="Permalink to this headline">¶</a></h4>
<p>The figure caption is optional. If omitted, the figure appears &#8220;inline&#8221;
in the text without any figure environment in LaTeX formats or HTML.</p>
<p>An inline figure is handy in LaTeX since it appears exactly where the
<code class="docutils literal"><span class="pre">FIGURE:</span></code> command appears (figures with captions are encapsulated in the
LaTeX <code class="docutils literal"><span class="pre">figure</span></code> environment and become floating objects whose placement
is up to LaTeX do decide).</p>
<div class="admonition-tip-use-linebreak-to-insert-space-around-inline-figures admonition">
<p class="first admonition-title">Tip: use linebreak to insert space around inline figures</p>
<p class="last">Sometimes inline figures (<code class="docutils literal"><span class="pre">FIGURE</span></code> line without caption) get squeezed
into the text. You can add vertical space in LaTeX and HTML by
inserting seeral lines with <code class="docutils literal"><span class="pre">&lt;linebreak&gt;</span></code>.</p>
</div>
<div class="figure" id="id39">
<span id="fig-viz"></span><a class="reference internal image-reference" href="_images/wave1D.png"><img alt="_images/wave1D.png" src="_images/wave1D.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text"><em>A wave</em></span></p>
</div>
<span class="target" id="index-17"></span></div>
<div class="section" id="handling-variable-figure-paths">
<span id="index-18"></span><h4>Handling Variable Figure Paths<a class="headerlink" href="#handling-variable-figure-paths" title="Permalink to this headline">¶</a></h4>
<p>Figure files are usually located in some directory. Sometimes one needs to
compile the DocOnce source file(s) from different directories, and
then the path to figure files changes. For example, think of a master
DocOnce file that includes different sections whose DocOnce source files
are located in different directories. If you want to compile a section
as stand-alone document, you have to do that from the subdirectory for
that section. The path to a common directory for figures may then be
like <code class="docutils literal"><span class="pre">../fig/myfig.png</span></code>, while for the master document in the parent
directory, the corresponding path is <code class="docutils literal"><span class="pre">fig/myfig.png</span></code>.</p>
<p>The simplest way out of this problem is to use the <code class="docutils literal"><span class="pre">--fig_prefix=</span></code>
command-line option to set a path prefix for the figure filename.
When compiling a section in a subdirectory one sets
<code class="docutils literal"><span class="pre">--fig_prefix=../fig</span></code> while in the parent directory one needs
<code class="docutils literal"><span class="pre">--fig_prefix=fig</span></code> to compile the master document.
In the DocOnce source file one has <code class="docutils literal"><span class="pre">FIGURE:</span> <span class="pre">[myfig,</span> <span class="pre">width=...]</span></code>.</p>
<p>A more manual method is to introduce a Mako variable <code class="docutils literal"><span class="pre">FIGPREFIX</span></code>
that is set on the command line as part of the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> command.
The <code class="docutils literal"><span class="pre">FIGPREFIX</span></code> variable holds a prefix for the path to the figure.
In our example one writes</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">FIGURE: [${FIGPREFIX}/myfig, width=500 frac=0.8] caption label{my:fig}</span>
</pre></div>
</div>
<p>and set <code class="docutils literal"><span class="pre">FIGPREFIX=../fig</span></code> after the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">...</span></code> command if
one compiles a section, while <code class="docutils literal"><span class="pre">FIGPREFIX=fig</span></code> is the appropriate
value of the path when compiling the master document.</p>
</div>
<div class="section" id="figures-with-subfigures">
<span id="index-19"></span><h4>Figures with Subfigures<a class="headerlink" href="#figures-with-subfigures" title="Permalink to this headline">¶</a></h4>
<p>Combining several image files into one, in a table fashion, can be done by the
<code class="docutils literal"><span class="pre">montage</span></code> program from the ImageMagick suite:</p>
<div class="highlight-text"><div class="highlight"><pre>montage -background white -geometry 100% -tile 2x \
        file1.png file2.png ... file4.png result.png
</pre></div>
</div>
<p>The option <code class="docutils literal"><span class="pre">-tile</span> <span class="pre">XxY</span></code> gives <code class="docutils literal"><span class="pre">X</span></code> figures in the horizontal direction and
<code class="docutils literal"><span class="pre">Y</span></code> in the vertical direction (<code class="docutils literal"><span class="pre">tile</span> <span class="pre">2x</span></code> means two figures per row
and <code class="docutils literal"><span class="pre">-tile</span> <span class="pre">x2</span></code> means two rows).</p>
<p>The <code class="docutils literal"><span class="pre">montage</span></code> program is only appropriate for bitmap images (PNG, JPEG, GIF,
TIFF). Images in the PDF format should be mounted together
using <code class="docutils literal"><span class="pre">pdftk</span></code> (to combine images to one file),
<code class="docutils literal"><span class="pre">pdfnup</span></code> (to align them in tabular format), and <code class="docutils literal"><span class="pre">pdfcrop</span></code> (to
remove surrounding whitespace):</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; pdftk file1.pdf file2.pdf ... file4.pdf output tmp.pdf
Terminal&gt; pdfnup --nup 2x2 tmp.pdf        # output in tmp-nup.pdf
Terminal&gt; pdfcrop tmp-nup.pdf result.png  # output in FE1.png
</pre></div>
</div>
<p>Instead of using <code class="docutils literal"><span class="pre">montage</span></code>, <code class="docutils literal"><span class="pre">pdftk</span></code>, etc., one can rely on the
convenient command <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">combine_images</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce combine_images pdf -2 fig1 fig2 fig3 fig4 fig
</pre></div>
</div>
<p>This command will combine <code class="docutils literal"><span class="pre">fig1.pdf</span></code>, <code class="docutils literal"><span class="pre">fig2.pdf</span></code>, <code class="docutils literal"><span class="pre">fig3.pdf</span></code>, and
<code class="docutils literal"><span class="pre">fig4.pdf</span></code> with two images per row (<code class="docutils literal"><span class="pre">-2</span></code> option) and place the
result in <code class="docutils literal"><span class="pre">fig.pdf</span></code>. By just changing the <code class="docutils literal"><span class="pre">pdf</span></code> option to <code class="docutils literal"><span class="pre">png</span></code>,
the same will happen with
<code class="docutils literal"><span class="pre">fig1.png</span></code>, <code class="docutils literal"><span class="pre">fig2.png</span></code>, <code class="docutils literal"><span class="pre">fig3.png</span></code>, and
<code class="docutils literal"><span class="pre">fig4.png</span></code>, resulting in <code class="docutils literal"><span class="pre">fig.png</span></code>. The tool employs the technique
above for PNG and PDF files to produce ultimate quality of the combined
image.</p>
<p>One can also run <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">combine_images</span></code> with filenames with extension,
e.g.,</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce combine_images myfig1.png myfig2.png fig2.png
</pre></div>
</div>
<p>Here, <code class="docutils literal"><span class="pre">myfig1,png</span></code> and <code class="docutils literal"><span class="pre">myfig2.png</span></code> are placed next to each other in
a new figure file <code class="docutils literal"><span class="pre">fig2.png</span></code>.</p>
</div>
<div class="section" id="sidecaption-in-latex-and-html">
<h4>Sidecaption in LaTeX and HTML<a class="headerlink" href="#sidecaption-in-latex-and-html" title="Permalink to this headline">¶</a></h4>
<p>The figure caption can be placed on the (right) side of figures by
using the <code class="docutils literal"><span class="pre">sidecap</span></code> feature as figure option, e.g.,
<code class="docutils literal"><span class="pre">FIGURE:</span> <span class="pre">[myfig,</span> <span class="pre">width=500</span> <span class="pre">frac=0.5</span> <span class="pre">sidecap=True]</span></code>. The generated
<code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code> output then uses the <code class="docutils literal"><span class="pre">sidecap</span></code> package and
the <code class="docutils literal"><span class="pre">SCfigure</span></code> environment to typeset the figure. Remember to
use a quite low <code class="docutils literal"><span class="pre">frac</span></code> value for figures with sidecaption (0.5
for instance). A table is used for typsetting a figure with
sidecaption in HTML, and a low <code class="docutils literal"><span class="pre">width</span></code> value is recommended.
The <code class="docutils literal"><span class="pre">sidecap=True</span></code> figure option has no impact on other formats.</p>
</div>
<div class="section" id="plot-files-in-latex">
<h4>Plot Files in LaTeX<a class="headerlink" href="#plot-files-in-latex" title="Permalink to this headline">¶</a></h4>
<p>Users who applies Matplotlib to make figures get plots with fonts that
differ from the rest of a LaTeX document.
A <a class="reference external" href="http://bkanuka.com/articles/native-latex-plots/">blog post</a> describes
techniques for overcoming this problem. The plotfile is then a <code class="docutils literal"><span class="pre">.pgf</span></code>
file and one must use the <code class="docutils literal"><span class="pre">pgf</span></code> LaTeX package. DocOnce supports <code class="docutils literal"><span class="pre">.pgf</span></code>
plot files for the <code class="docutils literal"><span class="pre">pdflatex</span></code> output format
and will make use of such files if they exist. These
are included by a simple <code class="docutils literal"><span class="pre">\input{file.pgf}</span></code>. If no <code class="docutils literal"><span class="pre">.pgf</span></code> file is found,
the <code class="docutils literal"><span class="pre">pdflatex</span></code> output format will apply <code class="docutils literal"><span class="pre">.pdf</span></code>, <code class="docutils literal"><span class="pre">.png</span></code>, or <code class="docutils literal"><span class="pre">.jpg</span></code> file,
in that order of preference.</p>
</div>
<div class="section" id="interactive-bokeh-plots-for-html">
<span id="index-20"></span><h4>Interactive Bokeh Plots for HTML<a class="headerlink" href="#interactive-bokeh-plots-for-html" title="Permalink to this headline">¶</a></h4>
<p>Fancy interactive plots for data exploration can be made with the
<a class="reference external" href="http://bokeh.pydata.org/en/latest/">Bokeh</a> library. Such plots
reside in an HTML file. DocOnce will for the HTML output format detect
files of this type and use the HTML code in the file to embed the
plot(s) in the generated output document.</p>
<p>Below is a complete example on creating a grid of interactive plots where
the horizontal axes are coupled to each other. Panning the graph in one
plot automatically moves all the other graphs. In this way, one can
scroll through a long time series simultaneously for many plots.
Our demo looks as follows in a browser:</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/bokeh_gridplot1.png"><img alt="_images/bokeh_gridplot1.png" src="_images/bokeh_gridplot1.png" style="width: 800px;" /></a>
</div>
<p>Such a figure is specified the normal way: if the HTML code for the figure
is in <code class="docutils literal"><span class="pre">myfig.html</span></code>, write</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">FIGURE: [myfig] caption</span>
</pre></div>
</div>
<p>Options like <code class="docutils literal"><span class="pre">width</span></code> are ignored for Bokeh plots, unless you have
other versions of the figure (<code class="docutils literal"><span class="pre">myfig.png</span></code>, for instance, see the box
below) where such options may be useful for some formats.</p>
<div class="admonition-make-alternatives-to-bokeh-plots admonition">
<p class="first admonition-title">Make alternatives to Bokeh plots</p>
<p>Note that Bokeh plots have only meaning when DocOnce translates the
document to HTML. For other formats, one needs to supply figure files
that those formats can accept (PNG, PDF, etc.).</p>
<p>Suppose you have made a Bokeh
plot in <code class="docutils literal"><span class="pre">myfig.html</span></code>. Either you have to embed the <code class="docutils literal"><span class="pre">FIGURE</span></code> command
inside a preprocessor test that the <code class="docutils literal"><span class="pre">FORMAT</span> <span class="pre">==</span> <span class="pre">'html'</span></code> or you must
provide alternatives like <code class="docutils literal"><span class="pre">myfig.png</span></code>. A Bokeh plot will often have a
save button that can be used to save the plot to PNG format.
This can be used for Sphinx, wikis, and pdfLaTeX (although the latter would
appreciate real vector graphics in a PDF plot).</p>
<p class="last">The plot example above is so advanced that there is no natural
counterpart in a static PNG or PDF plot.</p>
</div>
<div class="admonition-tip-reduce-the-size-of-bokeh-html-files admonition">
<p class="first admonition-title">Tip: reduce the size of Bokeh HTML files</p>
<p>When making Bokeh plots in Python programs, we recommend to use
the <code class="docutils literal"><span class="pre">mode='cdn'</span></code> option in the call <code class="docutils literal"><span class="pre">output_file</span></code>. This argument leads
to links to Bokeh tools in the resulting HTML file. Without the argument,
Bokeh embeds long HTML code for its tools into the file.
DocOnce issues a warning in this case and recommends the <code class="docutils literal"><span class="pre">mode</span></code> argument.</p>
<p class="last">Note that with <code class="docutils literal"><span class="pre">mode='cdn'</span></code> the HTML code for the plot requires Internet
access.</p>
</div>
<p>An interactive plot like the one shown above, stored in a file
<a class="reference external" href="https://github.com/hplgit/doconce/tree/master/doc/src/manual/fig/bokeh_demo.html">tmp.html</a>,
can be made by the code below (<a class="reference external" href="https://github.com/hplgit/doconce/tree/master/doc/src/manual/bokeh_demo.py">download file</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">bokeh_plot</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">legends</span><span class="p">,</span> <span class="n">u_e</span><span class="p">,</span> <span class="n">t_e</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">t_range</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make plots for u vs t using the Bokeh library.</span>
<span class="sd">    u and t are lists (several experiments can be compared).</span>
<span class="sd">    legends contain legend strings for the various u,t pairs.</span>
<span class="sd">    Each plot has u vs t and the exact solution u_e vs t_e.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">bokeh.plotting</span> <span class="kn">as</span> <span class="nn">plt</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;cdn&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&#39;Comparison&#39;</span><span class="p">)</span>
    <span class="c"># Assume that all t arrays have the same range</span>
    <span class="n">t_fine</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1001</span><span class="p">)</span>  <span class="c"># fine mesh for u_e</span>
    <span class="n">tools</span> <span class="o">=</span> <span class="s">&#39;pan,wheel_zoom,box_zoom,reset,&#39;</span>\
            <span class="s">&#39;save,box_select,lasso_select&#39;</span>
    <span class="n">u_range</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.2</span><span class="o">*</span><span class="n">I</span><span class="p">,</span> <span class="mf">1.2</span><span class="o">*</span><span class="n">I</span><span class="p">]</span>
    <span class="n">font_size</span> <span class="o">=</span> <span class="s">&#39;8pt&#39;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c"># list of all individual plots</span>
    <span class="n">p_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">legends</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">x_axis_label</span><span class="o">=</span><span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">&#39;u&#39;</span><span class="p">,</span>
        <span class="n">x_range</span><span class="o">=</span><span class="n">t_range</span><span class="p">,</span> <span class="n">y_range</span><span class="o">=</span><span class="n">u_range</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
        <span class="n">title_text_font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
    <span class="n">p_</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label_text_font_size</span><span class="o">=</span><span class="n">font_size</span>
    <span class="n">p_</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label_text_font_size</span><span class="o">=</span><span class="n">font_size</span>
    <span class="n">p_</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">line_color</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">)</span>
    <span class="n">p_</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">t_e</span><span class="p">,</span> <span class="n">u_e</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="n">line_dash</span><span class="o">=</span><span class="s">&#39;4 4&#39;</span><span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)):</span>
        <span class="n">p_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span>
            <span class="n">width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">legends</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">x_axis_label</span><span class="o">=</span><span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="n">y_axis_label</span><span class="o">=</span><span class="s">&#39;u&#39;</span><span class="p">,</span>
            <span class="n">x_range</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x_range</span><span class="p">,</span> <span class="n">y_range</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y_range</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
            <span class="n">title_text_font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
        <span class="n">p_</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label_text_font_size</span><span class="o">=</span><span class="n">font_size</span>
        <span class="n">p_</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label_text_font_size</span><span class="o">=</span><span class="n">font_size</span>
        <span class="n">p_</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">line_color</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">)</span>
        <span class="n">p_</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">t_e</span><span class="p">,</span> <span class="n">u_e</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="n">line_dash</span><span class="o">=</span><span class="s">&#39;4 4&#39;</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_</span><span class="p">)</span>

    <span class="c"># Arrange in grid with 3 plots per row</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="p">[[]]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
        <span class="n">grid</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c"># New row</span>
            <span class="n">grid</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
    <span class="n">plot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gridplot</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">toolbar_location</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">demo_bokeh</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Plot numerical and exact solution of sinousoidal shape.&quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

    <span class="k">def</span> <span class="nf">u_exact</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">I</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">u_numerical</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
        <span class="n">w_tilde</span> <span class="o">=</span> <span class="p">(</span><span class="mf">2.</span><span class="o">/</span><span class="n">dt</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="n">dt</span><span class="o">/</span><span class="mf">2.</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">I</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">w_tilde</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>

    <span class="n">I</span> <span class="o">=</span> <span class="mi">1</span>               <span class="c"># Amplitude</span>
    <span class="n">w</span> <span class="o">=</span> <span class="mf">1.0</span>             <span class="c"># Angular frequency</span>
    <span class="n">P</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">w</span>       <span class="c"># Period of signal</span>
    <span class="n">num_steps_per_period</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">80</span><span class="p">]</span>
    <span class="n">num_periods</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="n">T</span> <span class="o">=</span> <span class="n">num_periods</span><span class="o">*</span><span class="n">P</span>   <span class="c"># End time of signal</span>

    <span class="n">t_e</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="mi">1001</span><span class="p">)</span>  <span class="c"># Fine mesh for u_exact</span>
    <span class="n">u_e</span> <span class="o">=</span> <span class="n">u_exact</span><span class="p">(</span><span class="n">t_e</span><span class="p">)</span>
    <span class="n">u</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">t</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">legends</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c"># Make a series of numerical solutions with different time steps</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">num_steps_per_period</span><span class="p">:</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">P</span><span class="o">/</span><span class="n">n</span>  <span class="c"># Time step length</span>
        <span class="n">t_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">num_periods</span><span class="o">*</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">u_</span> <span class="o">=</span> <span class="n">u_numerical</span><span class="p">(</span><span class="n">t_</span><span class="p">)</span>
        <span class="n">u</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">u_</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t_</span><span class="p">)</span>
        <span class="n">legends</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;# time steps per period: </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>
    <span class="n">bokeh_plot</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">legends</span><span class="p">,</span> <span class="n">u_e</span><span class="p">,</span> <span class="n">t_e</span><span class="p">,</span>
               <span class="n">I</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">t_range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="o">*</span><span class="n">P</span><span class="p">],</span>
               <span class="n">filename</span><span class="o">=</span><span class="s">&#39;tmp.html&#39;</span><span class="p">)</span>

<span class="n">demo_bokeh</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="converting-matplotlib-plots-to-bokeh">
<h4>Converting Matplotlib Plots to Bokeh<a class="headerlink" href="#converting-matplotlib-plots-to-bokeh" title="Permalink to this headline">¶</a></h4>
<p>Most Python users apply Matplotlib to create line drawings.
Bokeh has a conversion utility from Matplotlib to Bokeh that
works well for standard curve plots. The script below demonstrates
how to generate a plot in Matplotlib and convert it to a Bokeh <code class="docutils literal"><span class="pre">tmp.html</span></code>
file.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">1001</span><span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="s">&#39;r-&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="s">&#39;b--&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">);</span>  <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
<span class="c"># legends do not work in Bokeh</span>
<span class="c">#plt.legend([r&#39;$e^{-x}\sin 2x$&#39;, r&#39;$e^{-\frac{1}{2}x}\sin 2x$&#39;])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Damped sine functions&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;tmp.pdf&#39;</span><span class="p">);</span>  <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;tmp.png&#39;</span><span class="p">)</span>

<span class="c"># Convert to Bokeh</span>
<span class="kn">import</span> <span class="nn">bokeh.mpl</span><span class="o">,</span> <span class="nn">bokeh.plotting</span> <span class="kn">as</span> <span class="nn">bpl</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">mpl</span><span class="o">.</span><span class="n">to_bokeh</span><span class="p">(</span><span class="n">notebook</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">xkcd</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c">#p = bokeh.mpl.to_bokeh()</span>
<span class="n">bpl</span><span class="o">.</span><span class="n">output_file</span><span class="p">(</span><span class="s">&#39;tmp.html&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;cdn&#39;</span><span class="p">)</span>
<span class="n">bpl</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="c">#bpl.show(p)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="movies-1">
<h3>Movies<a class="headerlink" href="#movies-1" title="Permalink to this headline">¶</a></h3>
<p id="index-21">Movies/videos are inserted using the <code class="docutils literal"><span class="pre">MOVIE:</span></code> keyword. This
feature works well for the <code class="docutils literal"><span class="pre">latex</span></code>, <code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">rst</span></code>, and <code class="docutils literal"><span class="pre">sphinx</span></code> formats.
Other formats try to generate some HTML file and link to that file
for showing the movie. If such a link is not appropriate and one wants
a figure instead of the movie, use the preprocessor as explained
in the box <em>Recommendations</em> below.</p>
<div class="section" id="the-basic-command">
<h4>The Basic Command<a class="headerlink" href="#the-basic-command" title="Permalink to this headline">¶</a></h4>
<p>As with <code class="docutils literal"><span class="pre">FIGURE</span></code>, the <code class="docutils literal"><span class="pre">MOVIE</span></code> command expands just <em>one line</em> and is of
the form</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">MOVIE: [filename, height=xxx width=yyy] possible caption</span>
</pre></div>
</div>
<p>Note that there must be a blank line after every <code class="docutils literal"><span class="pre">MOVIE:</span></code> command.
The width and height parameters are not required, but leaving them out
may lead to movie sizes you do not want.</p>
<p>Here is a movie in the Ogg format:</p>
<div>
<video  loop controls width='600' height='365' preload='none'>
    <source src="_static/mov/wave.mp4"  type='video/mp4;  codecs="avc1.42E01E, mp4a.40.2"'>
    <source src="_static/mov/wave.webm" type='video/webm; codecs="vp8, vorbis"'>
    <source src="_static/mov/wave.ogg"  type='video/ogg;  codecs="theora, vorbis"'>
</video>
</div>
<p><em>A movie in Ogg format.</em></p><p>realized by the command</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">MOVIE: [mov/wave.igg, width=600] A movie in Ogg format.</span>
</pre></div>
</div>
<p>A URL works too as movie address:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">MOVIE: [http://hplgit.github.io/animate/doc/pub/mov-animate/demo.ogg] Ogg movie in cyberspace.</span>
</pre></div>
</div>
<div>
<video  loop controls width='640' height='365' preload='none'>
    <source src='http://hplgit.github.io/animate/doc/pub/mov-animate/demo.mp4'  type='video/mp4;  codecs="avc1.42E01E, mp4a.40.2"'>
    <source src='http://hplgit.github.io/animate/doc/pub/mov-animate/demo.webm' type='video/webm; codecs="vp8, vorbis"'>
    <source src='http://hplgit.github.io/animate/doc/pub/mov-animate/demo.ogg'  type='video/ogg;  codecs="theora, vorbis"'>
</video>
</div>
<p><em>Ogg movie in cyberspace.</em></p><div class="admonition-important admonition">
<p class="first admonition-title">Important</p>
<p class="last">Movies will not work properly in <code class="docutils literal"><span class="pre">sphinx</span></code> format unless they are located
in a directory (tree) with a name starting with <code class="docutils literal"><span class="pre">mov</span></code>. Make it a habit
to place figures in <code class="docutils literal"><span class="pre">fig-X</span></code> and movies in <code class="docutils literal"><span class="pre">mov-X</span></code> directories, where <code class="docutils literal"><span class="pre">X</span></code>
is a short logical name for the current document (or let the names of
the directories be just <code class="docutils literal"><span class="pre">fig</span></code> and <code class="docutils literal"><span class="pre">mov</span></code>).</p>
</div>
</div>
<div class="section" id="mp4-webm-and-ogg-movies-in-html">
<h4>MP4, WebM, and Ogg Movies in HTML<a class="headerlink" href="#mp4-webm-and-ogg-movies-in-html" title="Permalink to this headline">¶</a></h4>
<p>If a movie is in Ogg, MP4, or WebM format, and the output format is <code class="docutils literal"><span class="pre">html</span></code>,
DocOnce will check if the movie file is also in the other formats among
Ogg, MP4, and WebM, and include these as well such that the movie has
backup formats in case the browser does not support a particular format.
Providing a movie in Ogg, MP4, <em>and</em> WebM format is therefore the safest
way to ensure that the movie can be played in any browser on any device.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you specify a movie in Ogg or WebM format and it also exists in
MP4 format, the MP4 format will be loaded first. To avoid having
alternative movie formats in HTML, use the <code class="docutils literal"><span class="pre">--no_mp4_webm_ogg_alternatives</span></code>
command-line option when running <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code>.</p>
</div>
</div>
<div class="section" id="movie-handling-in-various-formats">
<h4>Movie Handling in Various Formats<a class="headerlink" href="#movie-handling-in-various-formats" title="Permalink to this headline">¶</a></h4>
<p>Movies are easiest shown in the HTML format.
The reST and Sphinx formats apply the same raw HTML code as the
HTML format and therefore have the same capabilities.
The LaTeX format supports different methods for embedding
movies via the option <code class="docutils literal"><span class="pre">-latex_movie=...</span></code>. Proper values are listed below.</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">href</span></code>: the <cite>h:ref:`run:file`{link}</cite> is used for all movies (default).</li>
<li><code class="docutils literal"><span class="pre">media9</span></code>:
the <code class="docutils literal"><span class="pre">media9</span></code> package is used for Flash and MP4 movies, <code class="docutils literal"><span class="pre">movie15</span></code>
for MPEG and AVI files, and a simple <cite>h:ref:`run:file`{link}</cite> command
for other formats. Only Acrobat Reader supports displaying these
type of movies.</li>
<li><code class="docutils literal"><span class="pre">multimedia</span></code>: the <code class="docutils literal"><span class="pre">\movie</span></code> command (known from LaTeX Beamer) is used
for movies.</li>
<li><code class="docutils literal"><span class="pre">movie15</span></code>: the old <code class="docutils literal"><span class="pre">movie15</span></code> package is used.</li>
</ol>
<p>For all other formats, an HTML file that acts as a movie player is
generated and linked from the output document. This movie player
has essentially the same code as the HTML format would have, except
that the <code class="docutils literal"><span class="pre">video</span></code> tag is not used, only the <code class="docutils literal"><span class="pre">embed</span></code> tag. Some wiki
types do have support for videos, e.g., Wikipedia can work with
Ogg files, but DocOnce has not yet implemented robust schemes for
anything but LaTeX, HTML, and Sphinx output.</p>
</div>
<div class="section" id="youtube-and-vimeo-movies">
<h4>YouTube and Vimeo Movies<a class="headerlink" href="#youtube-and-vimeo-movies" title="Permalink to this headline">¶</a></h4>
<p>Many publish their scientific movies on YouTube or Vimeo, and DocOnce recognizes
YouTube and Vimeo URLs as movies. When the output from DocOnce
is an HTML file, the movie will
be embedded, otherwise a URL to the YouTube or Vimeo page is inserted.
You should equip the <code class="docutils literal"><span class="pre">MOVIE:</span></code> command with the right width and height
of <em>embedded</em> YouTube and Vimeo movies. The recipe goes as follows:</p>
<ol class="arabic simple">
<li>click on <em>Share</em> (and on YouTube then <em>Embed</em>)</li>
<li>note the height and width of the embedded movie</li>
</ol>
<p>A typical <code class="docutils literal"><span class="pre">MOVIE</span></code> command with a YouTube movie is then</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">MOVIE: [http://www.youtube.com/watch?v=sI2uCHH3qIM, width=420 height=315]</span>

<span class="nb">MOVIE: [http://vimeo.com/55562330, width=500 height=278] CFD.</span>
</pre></div>
</div>
</div>
<div class="section" id="animation-based-on-filename-generators">
<h4>Animation Based on Filename Generators<a class="headerlink" href="#animation-based-on-filename-generators" title="Permalink to this headline">¶</a></h4>
<p>It is possible to define a movie from a set of files, usually plot files,
which can be shown in sequence to create an animation.
If the files are local on the computer, one can specify them by a
simple Unix wildcard notation, as in</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">MOVIE: [../experiments/frame_*.png]</span>
</pre></div>
</div>
<p>Output in the HTML, reST, and Sphinx formats will make use of inline
JavaScript code to show the frames in sequence.
LaTeX employs the <code class="docutils literal"><span class="pre">animate</span></code> package for the same purpose.
Other formats generates a file (<code class="docutils literal"><span class="pre">movie_playerX.py</span></code>, where <code class="docutils literal"><span class="pre">X</span></code> is a number)
containing the HTML code with JavaScript to show and control the animation.
The DocOnce document has a link to this movie viewer.</p>
<p>There is an alternative syntax to the Unix wildcard notation:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">MOVIE: [../experiments/frame_%04d.png:0-&gt;320]</span>
</pre></div>
</div>
<p>The filename is specified via printf syntax (typically the same
syntax as used to generate the individual frame files). The postfix
<code class="docutils literal"><span class="pre">:0-&gt;320</span></code> specifies the lower and upper limit of the counter
that is used in the printf specification <code class="docutils literal"><span class="pre">%04d</span></code>.
This latter syntax must be used if the plot files reside on some
web server, e.g.,</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">MOVIE: [http://some.where.net/experiments/frame_%04d.png:0-&gt;320]</span>
</pre></div>
</div>
<p>Here is an example:</p>
<script language="Javascript">
<!---
var num_images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 = 321;
var img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 = 800;
var img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 = 600;
var interval_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 = 300;
var images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 = new Array();

function preload_images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()
{
   t = document.getElementById("progress");

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[0] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[0].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0000.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[1] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[1].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0001.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[2] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[2].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0002.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[3] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[3].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0003.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[4] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[4].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0004.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[5] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[5].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0005.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[6] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[6].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0006.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[7] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[7].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0007.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[8] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[8].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0008.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[9] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[9].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0009.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[10] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[10].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0010.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[11] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[11].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0011.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[12] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[12].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0012.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[13] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[13].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0013.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[14] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[14].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0014.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[15] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[15].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0015.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[16] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[16].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0016.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[17] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[17].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0017.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[18] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[18].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0018.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[19] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[19].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0019.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[20] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[20].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0020.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[21] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[21].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0021.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[22] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[22].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0022.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[23] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[23].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0023.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[24] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[24].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0024.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[25] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[25].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0025.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[26] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[26].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0026.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[27] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[27].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0027.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[28] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[28].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0028.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[29] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[29].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0029.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[30] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[30].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0030.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[31] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[31].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0031.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[32] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[32].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0032.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[33] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[33].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0033.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[34] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[34].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0034.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[35] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[35].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0035.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[36] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[36].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0036.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[37] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[37].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0037.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[38] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[38].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0038.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[39] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[39].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0039.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[40] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[40].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0040.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[41] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[41].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0041.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[42] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[42].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0042.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[43] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[43].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0043.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[44] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[44].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0044.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[45] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[45].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0045.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[46] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[46].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0046.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[47] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[47].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0047.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[48] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[48].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0048.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[49] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[49].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0049.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[50] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[50].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0050.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[51] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[51].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0051.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[52] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[52].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0052.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[53] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[53].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0053.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[54] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[54].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0054.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[55] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[55].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0055.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[56] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[56].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0056.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[57] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[57].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0057.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[58] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[58].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0058.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[59] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[59].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0059.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[60] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[60].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0060.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[61] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[61].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0061.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[62] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[62].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0062.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[63] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[63].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0063.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[64] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[64].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0064.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[65] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[65].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0065.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[66] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[66].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0066.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[67] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[67].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0067.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[68] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[68].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0068.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[69] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[69].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0069.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[70] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[70].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0070.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[71] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[71].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0071.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[72] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[72].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0072.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[73] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[73].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0073.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[74] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[74].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0074.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[75] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[75].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0075.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[76] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[76].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0076.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[77] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[77].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0077.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[78] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[78].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0078.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[79] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[79].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0079.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[80] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[80].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0080.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[81] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[81].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0081.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[82] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[82].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0082.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[83] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[83].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0083.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[84] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[84].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0084.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[85] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[85].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0085.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[86] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[86].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0086.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[87] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[87].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0087.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[88] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[88].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0088.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[89] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[89].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0089.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[90] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[90].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0090.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[91] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[91].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0091.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[92] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[92].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0092.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[93] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[93].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0093.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[94] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[94].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0094.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[95] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[95].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0095.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[96] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[96].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0096.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[97] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[97].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0097.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[98] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[98].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0098.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[99] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[99].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0099.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[100] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[100].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0100.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[101] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[101].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0101.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[102] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[102].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0102.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[103] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[103].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0103.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[104] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[104].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0104.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[105] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[105].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0105.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[106] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[106].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0106.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[107] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[107].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0107.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[108] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[108].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0108.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[109] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[109].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0109.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[110] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[110].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0110.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[111] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[111].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0111.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[112] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[112].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0112.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[113] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[113].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0113.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[114] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[114].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0114.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[115] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[115].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0115.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[116] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[116].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0116.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[117] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[117].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0117.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[118] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[118].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0118.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[119] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[119].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0119.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[120] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[120].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0120.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[121] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[121].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0121.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[122] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[122].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0122.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[123] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[123].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0123.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[124] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[124].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0124.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[125] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[125].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0125.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[126] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[126].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0126.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[127] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[127].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0127.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[128] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[128].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0128.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[129] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[129].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0129.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[130] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[130].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0130.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[131] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[131].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0131.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[132] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[132].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0132.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[133] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[133].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0133.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[134] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[134].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0134.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[135] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[135].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0135.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[136] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[136].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0136.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[137] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[137].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0137.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[138] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[138].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0138.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[139] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[139].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0139.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[140] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[140].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0140.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[141] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[141].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0141.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[142] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[142].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0142.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[143] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[143].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0143.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[144] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[144].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0144.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[145] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[145].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0145.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[146] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[146].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0146.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[147] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[147].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0147.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[148] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[148].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0148.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[149] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[149].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0149.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[150] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[150].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0150.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[151] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[151].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0151.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[152] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[152].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0152.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[153] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[153].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0153.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[154] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[154].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0154.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[155] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[155].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0155.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[156] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[156].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0156.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[157] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[157].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0157.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[158] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[158].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0158.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[159] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[159].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0159.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[160] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[160].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0160.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[161] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[161].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0161.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[162] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[162].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0162.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[163] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[163].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0163.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[164] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[164].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0164.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[165] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[165].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0165.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[166] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[166].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0166.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[167] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[167].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0167.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[168] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[168].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0168.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[169] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[169].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0169.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[170] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[170].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0170.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[171] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[171].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0171.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[172] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[172].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0172.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[173] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[173].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0173.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[174] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[174].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0174.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[175] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[175].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0175.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[176] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[176].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0176.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[177] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[177].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0177.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[178] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[178].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0178.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[179] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[179].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0179.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[180] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[180].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0180.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[181] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[181].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0181.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[182] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[182].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0182.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[183] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[183].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0183.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[184] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[184].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0184.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[185] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[185].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0185.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[186] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[186].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0186.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[187] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[187].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0187.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[188] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[188].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0188.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[189] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[189].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0189.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[190] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[190].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0190.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[191] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[191].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0191.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[192] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[192].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0192.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[193] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[193].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0193.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[194] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[194].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0194.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[195] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[195].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0195.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[196] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[196].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0196.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[197] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[197].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0197.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[198] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[198].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0198.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[199] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[199].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0199.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[200] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[200].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0200.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[201] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[201].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0201.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[202] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[202].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0202.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[203] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[203].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0203.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[204] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[204].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0204.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[205] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[205].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0205.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[206] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[206].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0206.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[207] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[207].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0207.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[208] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[208].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0208.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[209] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[209].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0209.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[210] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[210].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0210.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[211] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[211].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0211.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[212] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[212].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0212.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[213] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[213].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0213.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[214] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[214].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0214.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[215] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[215].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0215.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[216] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[216].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0216.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[217] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[217].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0217.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[218] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[218].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0218.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[219] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[219].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0219.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[220] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[220].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0220.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[221] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[221].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0221.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[222] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[222].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0222.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[223] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[223].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0223.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[224] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[224].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0224.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[225] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[225].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0225.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[226] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[226].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0226.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[227] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[227].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0227.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[228] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[228].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0228.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[229] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[229].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0229.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[230] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[230].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0230.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[231] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[231].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0231.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[232] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[232].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0232.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[233] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[233].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0233.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[234] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[234].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0234.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[235] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[235].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0235.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[236] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[236].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0236.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[237] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[237].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0237.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[238] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[238].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0238.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[239] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[239].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0239.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[240] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[240].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0240.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[241] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[241].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0241.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[242] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[242].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0242.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[243] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[243].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0243.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[244] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[244].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0244.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[245] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[245].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0245.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[246] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[246].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0246.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[247] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[247].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0247.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[248] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[248].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0248.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[249] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[249].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0249.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[250] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[250].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0250.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[251] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[251].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0251.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[252] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[252].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0252.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[253] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[253].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0253.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[254] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[254].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0254.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[255] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[255].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0255.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[256] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[256].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0256.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[257] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[257].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0257.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[258] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[258].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0258.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[259] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[259].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0259.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[260] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[260].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0260.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[261] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[261].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0261.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[262] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[262].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0262.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[263] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[263].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0263.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[264] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[264].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0264.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[265] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[265].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0265.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[266] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[266].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0266.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[267] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[267].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0267.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[268] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[268].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0268.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[269] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[269].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0269.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[270] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[270].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0270.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[271] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[271].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0271.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[272] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[272].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0272.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[273] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[273].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0273.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[274] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[274].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0274.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[275] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[275].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0275.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[276] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[276].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0276.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[277] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[277].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0277.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[278] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[278].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0278.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[279] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[279].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0279.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[280] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[280].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0280.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[281] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[281].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0281.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[282] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[282].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0282.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[283] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[283].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0283.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[284] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[284].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0284.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[285] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[285].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0285.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[286] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[286].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0286.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[287] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[287].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0287.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[288] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[288].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0288.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[289] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[289].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0289.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[290] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[290].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0290.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[291] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[291].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0291.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[292] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[292].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0292.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[293] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[293].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0293.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[294] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[294].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0294.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[295] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[295].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0295.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[296] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[296].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0296.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[297] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[297].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0297.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[298] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[298].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0298.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[299] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[299].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0299.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[300] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[300].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0300.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[301] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[301].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0301.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[302] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[302].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0302.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[303] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[303].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0303.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[304] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[304].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0304.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[305] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[305].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0305.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[306] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[306].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0306.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[307] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[307].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0307.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[308] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[308].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0308.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[309] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[309].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0309.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[310] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[310].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0310.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[311] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[311].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0311.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[312] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[312].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0312.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[313] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[313].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0313.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[314] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[314].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0314.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[315] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[315].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0315.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[316] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[316].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0316.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[317] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[317].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0317.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[318] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[318].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0318.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[319] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[319].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0319.png";

   t.innerHTML = "Preloading image ";
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[320] = new Image(img_width_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000, img_height_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
   images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[320].src = "http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0320.png";

   t.innerHTML = "";
}

function tick_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()
{
   if (frame_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 > num_images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 - 1)
       frame_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 = 0;

   document.name_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000.src = images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000[frame_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000].src;
   frame_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 += 1;
   tt = setTimeout("tick_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()", interval_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
}

function startup_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()
{
   preload_images_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000();
   frame_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 = 0;
   setTimeout("tick_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()", interval_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000);
}

function stopit_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()
{ clearTimeout(tt); }

function restart_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()
{ tt = setTimeout("tick_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()", interval_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000); }

function slower_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()
{ interval_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 = interval_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000/0.7; }

function faster_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()
{ interval_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000 = interval_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000*0.7; }

// --->
</script>

<form>
&nbsp;
<input type="button" value="Start movie" onClick="startup_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()">
<input type="button" value="Pause movie" onClick="stopit_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()">
<input type="button" value="Restart movie" onClick="restart_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()">
&nbsp;
<input type="button" value="Slower" onClick="slower_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()">
<input type="button" value="Faster" onClick="faster_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000()">
</form>

<p><div ID="progress"></div></p>
<img src="http://hplgit.github.io/animate/doc/pub/mov-animate/frames/frame_0000.png" name="name_http___hplgit_github_io_animate_doc_pub_mov_animate_frames_frame_0000" border=2/><div class="admonition-recommendations admonition">
<p class="first admonition-title">Recommendations</p>
<p>It is challenging to write robust DocOnce code with movies.
The recommended formats in HTML are MP4, WebM, and Ogg. One should
preferably make all three. These also works in reST and Sphinx.</p>
<p>The filename generation works very well in LaTeX, while true movie formats
pose big challenges. On Linux systems, the <code class="docutils literal"><span class="pre">media9</span></code>
does not work well because a proper Flash player for embedding in
the PDF file is not always available. The <code class="docutils literal"><span class="pre">movie15</span></code> package also leads
to problems because Acrobat Reader depends on an external player to
show the files, and the correct plugins to launch players with support
for a given format are not trivial to install. Even the plain <a href="#id3"><span class="problematic" id="id4">`</span></a>h:ref:<a href="#id5"><span class="problematic" id="id6">`</span></a>run:file&#8221;
command relies on an external player and not all formats will be
supported on a given computer.</p>
<p>To have really robust code, use filename generators and not movie files.</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">MOVIE: [../experiments/frame_*.png]</span>
</pre></div>
</div>
<p>One can write flexible DocOnce code and decide at run time
if HTML output should have movie files or filename generators.
A relevant snippet using Mako and a user-defined variable
<code class="docutils literal"><span class="pre">HTMLMOVIE</span></code> is</p>
<div class="highlight-doconce"><div class="highlight"><pre>% FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;) or HTMLMOVIE == &quot;files&quot;:
<span class="nb">MOVIE: [../experiments/frame_*.png]</span>

% else:
<span class="nb">MOVIE: [../experiments/movie.ogg]</span>

% endif
</pre></div>
</div>
<p>With the <code class="docutils literal"><span class="pre">-DHTMLMOVIE=files</span></code> flag, animation of individual files will
be performed, while any other value than <code class="docutils literal"><span class="pre">files</span></code> leads to
use of the <code class="docutils literal"><span class="pre">movie.ogg</span></code> in all but LaTeX formats. In HTML one will try
to load <code class="docutils literal"><span class="pre">movie.mp4</span></code> (if it exists) and then <code class="docutils literal"><span class="pre">movie.webm</span></code> (if it exists)
and then finally <code class="docutils literal"><span class="pre">movie.ogg</span></code>.</p>
<p>There is no way to control the number of frames per second in
LaTeX animations based on filename generators such as <code class="docutils literal"><span class="pre">myframes*.png</span></code>.
However, with a little auto editing in a script one can control
the frame rates of the various movies. The rate is specified as <code class="docutils literal"><span class="pre">2</span></code>
in lines on the form</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">\begin{animateinline}</span>[controls,loop]{2} % frames: f000.png -&gt; f098.png
</pre></div>
</div>
<p>Setting the rate to 12 instead for this particular movie based on the
<code class="docutils literal"><span class="pre">f%03.png</span></code> files, the following <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">subst</span></code> command does the job
in a script:</p>
<div class="highlight-text"><div class="highlight"><pre>doconce subst &#39;,loop]{2}( .+: f000)&#39; &#39;,loop{12}\g&lt;1&gt;&#39; mydoc.do.txt
</pre></div>
</div>
<p>Sometimes it is desired to use true movies in web formats and a figure
in LaTeX, e.g., a figure with four snapshots from the movie combined
into a single figure file with <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">combine_images</span></code>. A preprocessor
test is appropriate for this:</p>
<div class="highlight-doconce"><div class="highlight"><pre>% if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;):

<span class="nb">FIGURE: [myfig, frac=1] caption</span>

% else:

<span class="nb">MOVIE: [mymov] caption</span>

% endif
</pre></div>
</div>
<p>If you encounter a large number of such if-else statements, it is
advantageous to write a Mako function in Python:</p>
<div class="highlight-doconce"><div class="highlight"><pre>&lt;%
def figmov(figfile, movfile, caption):
    if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;):
        return &quot;FIGURE: [%s, frac=1] %s&quot; % (figfile, caption)
% else:
        return &quot;MOVIE: [%s] %s&quot; % (movfile, caption)
% endif
%&gt;
</pre></div>
</div>
<p>The one can avoid if-else tests in the running code and instead write just</p>
<div class="highlight-doconce"><div class="highlight"><pre>${figmov(&#39;myfig&#39;, &#39;mymov&#39;, &#39;caption&#39;)}
</pre></div>
</div>
<p class="last">to insert a movie or figure file, depending on the output format.</p>
</div>
</div>
</div>
<div class="section" id="copying-computer-code-from-source-files">
<h3>Copying Computer Code from Source Files<a class="headerlink" href="#copying-computer-code-from-source-files" title="Permalink to this headline">¶</a></h3>
<p>Another type of special lines starts with <code class="docutils literal"><span class="pre">&#64;&#64;&#64;CODE</span></code> and enables copying
of computer code from a file directly into a verbatim environment, see
the section <a class="reference internal" href="#sec-verbatim-blocks"><span class="std std-ref">Blocks of Verbatim Computer Code</span></a> below.</p>
</div>
<div class="section" id="inserting-the-output-from-operating-system-commands">
<h3>Inserting the Output from Operating System Commands<a class="headerlink" href="#inserting-the-output-from-operating-system-commands" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-22"></span><p id="index-23">When DocOnce is used to document computer program and results from
computer code it is important to ensure that the document contains
the latest version of the code and the corresponding output.
The former is handled by the <code class="docutils literal"><span class="pre">&#64;&#64;&#64;CODE</span></code> directive, while the latter
has its own directive <code class="docutils literal"><span class="pre">&#64;&#64;&#64;OSCMD</span></code>. The syntax reads</p>
<div class="highlight-doconce"><div class="highlight"><pre>@@@OSCMD cmd
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">cmd</span></code> is any text that can be run in the operating system.
The output is copied into the DocOnce source. For example,</p>
<div class="highlight-doconce"><div class="highlight"><pre>@@@OSCMD python -c &#39;print &quot;Hello,\nWorld!&quot;&#39;
</pre></div>
</div>
<p>results in</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; python -c &#39;print &quot;Hello,\nWorld!&quot;&#39;
Hello,
World!
</pre></div>
</div>
<p>There is a command-line option <code class="docutils literal"><span class="pre">--os_prompt=</span></code> that can be used to
set the (terminal) prompt that prefixes the command:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">--os_prompt=None</span></code> results in no prompt, just the command.</li>
<li><code class="docutils literal"><span class="pre">--os_prompt=nocmd</span></code> results in no prompt and no command, just the output.</li>
<li><code class="docutils literal"><span class="pre">--os_prompt=Terminal&gt;</span></code> is the default setting (as in the example above).</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="comments">
<h3>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h3>
<p id="index-24">Comments intended to be (sometimes) visible in the output document and
read by readers are known as <em>inline comments</em> in DocOnce and
described in the section <a class="reference internal" href="#inline-tagging"><span class="std std-ref">Inline Tagging</span></a>.</p>
<p>Here we address comments in the DocOnce source file that are not
intended to be visible in the output document. Basic comment
lines start with the hash <code class="docutils literal"><span class="pre">#</span></code>:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="c">#</span>
<span class="c"># Here are some comment lines that do not affect any formatting.</span>
<span class="c"># These lines are converted to comments in the output format.</span>
<span class="c">#</span>
</pre></div>
</div>
<p>Such comment lines may have some side effects in the <code class="docutils literal"><span class="pre">rst</span></code> and <code class="docutils literal"><span class="pre">sphinx</span></code>
formats because following lines are taken as part of the comment if
there is not a blank line after the comment.</p>
<p>The Mako preprocessor supports comments that are filtered out <em>before</em>
DocOnce starts translating the document. Such comments are very valuable
as they will never interfere with the output format and they are only
present in the DocOnce source. Mako has two types of comments:
lines starting with a double hash <code class="docutils literal"><span class="pre">##</span></code> and multiple lines enclosed by
the <code class="docutils literal"><span class="pre">&lt;%doc&gt;</span></code> (beginning) and <code class="docutils literal"><span class="pre">&lt;%doc/&gt;</span></code> (closing) tags.</p>
<p>If you need a lot of comments in the DocOnce file, consider using
Mako comments instead of the single hash, unless you want the
comments to be in the source code of the output document.</p>
<p>To comment out or remove large sections, consider using the Preprocess
preprocessor and an if-else block with a variable that is undefined
(typically something like a test <code class="docutils literal"><span class="pre">#</span> <span class="pre">#ifdef</span> <span class="pre">EXTRA</span></code> in Preprocess, or
the Mako equivalent <code class="docutils literal"><span class="pre">%</span> <span class="pre">if</span> <span class="pre">EXTRA:</span></code>).</p>
</div>
<div class="section" id="tables">
<h3>Tables<a class="headerlink" href="#tables" title="Permalink to this headline">¶</a></h3>
<div class="section" id="index-25">
<span id="id7"></span><h4>Basic Syntax<a class="headerlink" href="#index-25" title="Permalink to this headline">¶</a></h4>
<p>A table like</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="33%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">time</th>
<th class="head">velocity</th>
<th class="head">acceleration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0.0</td>
<td>1.4186</td>
<td>-5.01</td>
</tr>
<tr class="row-odd"><td>2.0</td>
<td>1.376512</td>
<td>11.919</td>
</tr>
<tr class="row-even"><td>4.0</td>
<td>1.1E+1</td>
<td>14.717624</td>
</tr>
</tbody>
</table>
<p>is built up of pipe symbols and dashes:</p>
<div class="highlight-doconce"><div class="highlight"><pre>       |--------------------------------|
       |time  | velocity | acceleration |
       |--r--------r-----------r--------|
       | 0.0  | 1.4186   | -5.01        |
       | 2.0  | 1.376512 | 11.919       |
       | 4.0  | 1.1E+1   | 14.717624    |
       |--------------------------------|


* The pipes and column values do not need to be aligned (but why write
  the DocOnce source in an ugly way?).

* In the line below the heading,
  one can insert the characters ``c``, ``r``, or ``l`` to specify the
  alignment of the columns (centered, right, or left, respectively).
  One can also use ``X`` for potentially very wide text that must be
  wrapped (will only affect ``latex`` and ``pdflatex`` where the
  ``tabularx`` package is then used).

* Similar character can be inserted in the line above the header to
  align the headings.

* There must be a blank line before and after the table.

* Tables are *inlined* in the text, without numbers or labels for reference.
</pre></div>
</div>
<p>Here is an example with centered headings (which is default anyway),
and the numbers are
left-adjusted in the first column and right-adjusted in the two others.</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="s">|--c--------c-----------c--------|</span>
<span class="s">|time  | velocity | acceleration |</span>
<span class="s">|--l--------r-----------r--------|</span>
<span class="s">| 0.0  | 1.4186   | -5.01        |</span>
<span class="s">| 2.0  | 1.376512 | 11.919       |</span>
<span class="s">| 4.0  | 1.1E+1   | 14.717624    |</span>
<span class="s">|--------------------------------|</span>
</pre></div>
</div>
<p>Typeset result:</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="33%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">time</th>
<th class="head">velocity</th>
<th class="head">acceleration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0.0</td>
<td>1.4186</td>
<td>-5.01</td>
</tr>
<tr class="row-odd"><td>2.0</td>
<td>1.376512</td>
<td>11.919</td>
</tr>
<tr class="row-even"><td>4.0</td>
<td>1.1E+1</td>
<td>14.717624</td>
</tr>
</tbody>
</table>
<p>Pipes <code class="docutils literal"><span class="pre">|</span></code> can also be inserted to indicate
vertical rules in LaTeX tables (they are ignored for other formats):</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="s">|--------------------------------|</span>
<span class="s">|time  | velocity | acceleration |</span>
<span class="s">|--l---|----r-----|-----r--------|</span>
<span class="s">| 0.0  | 1.4186   | -5.01        |</span>
<span class="s">| 2.0  | 1.376512 | 11.919       |</span>
<span class="s">| 4.0  | 1.1E+1   | 14.717624    |</span>
<span class="s">|--------------------------------|</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Not all formats offer alignment of heading or entries
in tables (<code class="docutils literal"><span class="pre">rst</span></code> and <code class="docutils literal"><span class="pre">sphinx</span></code> are examples).</li>
<li>DocOnce tables are very simple: neither entries nor
headings can span several columns or rows. When that functionality
is needed, one can make use of the preprocessor and if-tests on
the format and insert format-specific code for tables.</li>
</ul>
</div>
</div>
<div class="section" id="tables-to-from-csv-data-files">
<h4>Tables to/from CSV Data Files<a class="headerlink" href="#tables-to-from-csv-data-files" title="Permalink to this headline">¶</a></h4>
<p>The command-line option <code class="docutils literal"><span class="pre">--tables2csv</span></code> (to <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code>) makes
DocOnce dump each table to CSV format in a file <code class="docutils literal"><span class="pre">table_X.csv</span></code>, where
<code class="docutils literal"><span class="pre">X</span></code> is a generated table number. This feature makes it easy to load
tables from DocOnce documents into spreadsheet programs for further
analysis.</p>
<p id="index-26">Data in CSV format can be transformed to DocOnce table format
by the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">csv2table</span></code> utility:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce csv2table somefile.csv &gt; table.do.txt
</pre></div>
</div>
<p>This is a quick way of writing tables. For example, we can
write a text file <code class="docutils literal"><span class="pre">tmp.csv</span></code> with</p>
<div class="highlight-text"><div class="highlight"><pre>time, velocity, acceleration
0.0, 1.4186, -5.01
2.0, 1.376512, 11.919
4.0, 1.1E+1, 14.717624
</pre></div>
</div>
<p>Running <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">csv2table</span> <span class="pre">tmp.csv</span></code> creates the table</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="s">|------c--------------c--------------c-------|</span>
<span class="s">| time         | velocity     | acceleration |</span>
<span class="s">|------c--------------c--------------c-------|</span>
<span class="s">| 0.0          | 1.4186       | -5.01        |</span>
<span class="s">| 2.0          | 1.376512     | 11.919       |</span>
<span class="s">| 4.0          | 1.1E+1       | 14.717624    |</span>
<span class="s">|--------------------------------------------|</span>
</pre></div>
</div>
<p>If the output from <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">csv2table</span></code> is redirected to a file:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce csv2table data.csv &gt; mytable.do.txt
</pre></div>
</div>
<p>one can easily include this file by <code class="docutils literal"><span class="pre">#</span> <span class="pre">#include</span> <span class="pre">&quot;mytable.do.txt&quot;</span></code> in the
DocOnce source file. This is an efficient method for generating
DocOnce tables directly from data.</p>
</div>
</div>
<div class="section" id="lists">
<h3>Lists<a class="headerlink" href="#lists" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-27"></span><span class="target" id="index-28"></span><span class="target" id="index-29"></span><p id="index-30">An unordered bullet list makes use of the <code class="docutils literal"><span class="pre">*</span></code> as bullet sign
and is <em>consistently indented</em> by some chosen spaces as follows</p>
<div class="highlight-doconce"><div class="highlight"><pre>* item 1
* item 2
  * subitem 1, if there are more
    lines, each line must
    be exactly intended as shown here
    (i.e., start in the same column)
  * subitem 2,
    also spans two lines
* item 3
</pre></div>
</div>
<p>This list gets typeset as</p>
<blockquote>
<div><ul class="simple">
<li>item 1</li>
<li>item 2<ul>
<li>subitem 1, if there are more
lines, each line must
be exactly intended as shown here
(i.e., start in the same column)</li>
<li>subitem 2,
also spans two lines</li>
</ul>
</li>
<li>item 3</li>
</ul>
</div></blockquote>
<span class="target" id="index-31"></span><span class="target" id="index-32"></span><span class="target" id="index-33"></span><p id="index-34">In an ordered list, each item starts with an <code class="docutils literal"><span class="pre">o</span></code> (as the first letter
in <em>ordered</em>):</p>
<div class="highlight-doconce"><div class="highlight"><pre>o item 1
o item 2
  * subitem 1
  * subitem 2
o item 3
</pre></div>
</div>
<p>resulting in</p>
<blockquote>
<div><ol class="arabic simple">
<li>item 1</li>
<li>item 2<ul>
<li>subitem 1</li>
<li>subitem 2</li>
</ul>
</li>
<li>item 3</li>
</ol>
</div></blockquote>
<p>Ordered lists cannot have an ordered sublist, i.e., the ordering
applies to the outer list only.</p>
<span class="target" id="index-35"></span><span class="target" id="index-36"></span><span class="target" id="index-37"></span><p id="index-38">In a description list, each item is recognized by a dash followed
by a keyword followed by a colon:</p>
<div class="highlight-doconce"><div class="highlight"><pre>- keyword1: explanation of keyword1

- keyword2: explanation
  of keyword2 (remember to indent properly
  if there are multiple
  lines)
</pre></div>
</div>
<p>The result becomes</p>
<blockquote>
<div><dl class="docutils">
<dt>keyword1:</dt>
<dd>explanation of keyword1</dd>
<dt>keyword2:</dt>
<dd>explanation
of keyword2 (remember to indent properly
if there are multiple
lines)</dd>
</dl>
</div></blockquote>
<div class="admonition-no-indentation-except-in-lists admonition">
<p class="first admonition-title">No indentation - except in lists</p>
<p class="last">DocOnce syntax is sensitive to whitespace!
No lines should be indented, only lines belonging to lists.
Indented lines may give strange output in some formats.
Also note that extra whitespace after <code class="docutils literal"><span class="pre">item&quot;</span> <span class="pre">indicators</span> <span class="pre">(``*</span></code>, <code class="docutils literal"><span class="pre">o</span></code>, or <code class="docutils literal"><span class="pre">-</span></code>)
in lists may give strange behavior.</p>
</div>
</div>
</div>
<div class="section" id="inline-tagging">
<span id="id8"></span><h2>Inline Tagging<a class="headerlink" href="#inline-tagging" title="Permalink to this headline">¶</a></h2>
<p>DocOnce supports tags for <em>emphasized phrases</em>, <strong>boldface phrases</strong>,
and <code class="docutils literal"><span class="pre">verbatim</span> <span class="pre">text</span></code> (also called type writer text, for inline code),
plus LaTeX/TeX inline mathematics, such as <span class="math">\(\nu = \sin(x)\)</span>.
Links are easy to define, either with a <a class="reference external" href="http://google.com">text</a> or
just a plain <a class="reference external" href="http://google.com">http://google.com</a>.
Also a non-breaking space (to avoid linebreak), linebreak,</p>
<div class="line-block">
<div class="line">m-dash (as in m&#8212;dash), and horizontal rule can be specified (below).</div>
</div>
<hr class="docutils" />
<div class="admonition-limitation-of-inline-tagging admonition">
<p class="first admonition-title">Limitation of inline tagging</p>
<p class="last">Since DocOnce applies regular expressions to recognize inline tagging,
there might be cases where the tags are not correctly interpreted
and translated. Fortunately, most such pitfalls are easily circumvented.
The <a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/trouble/trouble/trouble.html#trouble:pitfalls">troubleshooting document</a> shows some
examples.</p>
</div>
<div class="section" id="emphasized-words">
<h3>Emphasized Words<a class="headerlink" href="#emphasized-words" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-39"></span><span class="target" id="index-40"></span><p id="index-41">Emphasized text is typeset inside a pair of asterisk, and there should
be no spaces between an asterisk and the emphasized text, as in</p>
<div class="highlight-doconce"><div class="highlight"><pre>*emphasized words*
</pre></div>
</div>
<p>Boldface font is recognized by an underscore instead of an asterisk:</p>
<div class="highlight-doconce"><div class="highlight"><pre>_several words in boldface_ followed by *ephasized text*.
</pre></div>
</div>
<p>The line above gets typeset as
<strong>several words in boldface</strong> followed by <em>ephasized text</em>.
One should only have pure text (no mathematical formulas) between the boldface
or emphasize markers, and no leading or trailing blanks (with such blanks,
the text will not be recognized as boldface or emphasize).</p>
<p>Colored text is formatted as</p>
<div class="highlight-doconce"><div class="highlight"><pre>some text color{red}{more text in red}
</pre></div>
</div>
<p>The current output format does not support colors, however.</p>
</div>
<div class="section" id="inline-verbatim-text">
<h3>Inline Verbatim Text<a class="headerlink" href="#inline-verbatim-text" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-42"></span><p id="index-43">Verbatim text, typically used for short inline code,
is typeset between backticks:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="sb">`call myroutine(a, b)`</span> looks like a Fortran call
while `void myfunc(double *a, double *b)` must be C.
</pre></div>
</div>
<p>The typesetting result looks like this:
<code class="docutils literal"><span class="pre">call</span> <span class="pre">myroutine(a,</span> <span class="pre">b)</span></code> looks like a Fortran call
while <code class="docutils literal"><span class="pre">void</span> <span class="pre">myfunc(double</span> <span class="pre">*a,</span> <span class="pre">double</span> <span class="pre">*b)</span></code> must be C.
Note that there must be no leading or trailing spaces inside the backticks.</p>
<p>It is recommended to have inline verbatim text on the same line in
the DocOnce file, because some formats (LaTeX in combination with
the <code class="docutils literal"><span class="pre">ptex2tex</span></code> program (but not <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">pretex</span></code>))
will have problems with inline verbatim text that is split over two lines.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Watch out for mixing backticks and asterisk (i.e., verbatim and
emphasized code): the DocOnce interpreter is not very smart in
detecting such errors. A missing backtick will also quickly create
strange output. If you suspect inline code to be the
source of problems in the final format, examine the
DocOnce source and the output.</p>
</div>
</div>
<div class="section" id="links-to-web-addresses">
<h3>Links to Web Addresses<a class="headerlink" href="#links-to-web-addresses" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-44"></span><p id="index-45">Web addresses with links are typeset as</p>
<div class="highlight-doconce"><div class="highlight"><pre>some URL like &quot;Search Google&quot;: &quot;http://google.com&quot;.
</pre></div>
</div>
<p>which appears as some URL like <a class="reference external" href="http://google.com">Search Google</a>.
The space after colon is optional, but it is important to enclose the
link and the URL in double quotes.</p>
<p>To have the URL address itself as link text, put an &#8220;URL&#8221; or URL
before the address enclosed in double quotes:</p>
<div class="highlight-doconce"><div class="highlight"><pre>Click on this link: URL: &quot;https://github.com/hplgit/doconce&quot;.
</pre></div>
</div>
<p>which gets rendered as
Click on this link: <a class="reference external" href="https://github.com/hplgit/doconce">https://github.com/hplgit/doconce</a>.</p>
<p>(There is also support for lazy writing of URLs: any http or https web address
with a leading space and a trailing space, comma, semi-colon, or question
mark (but not period!) becomes a link with the web address as link text.)</p>
</div>
<div class="section" id="links-to-mail-addresses">
<h3>Links to Mail Addresses<a class="headerlink" href="#links-to-mail-addresses" title="Permalink to this headline">¶</a></h3>
<p>Links that launches a mail to a specified address is written as
ordinary URLs, typically as</p>
<div class="highlight-doconce"><div class="highlight"><pre>Send &quot;mail&quot;: &quot;mailto:hpl@simula.no&quot;
<span class="c"># Alternative:</span>
to &quot;`hpl@simula.no`&quot;: &quot;mailto:hpl@simula.no&quot;.
</pre></div>
</div>
<p>which appears as Send <a class="reference external" href="mailto:hpl&#37;&#52;&#48;simula&#46;no">mail</a> to
<a class="reference external" href="mailto:hpl&#37;&#52;&#48;simula&#46;no">hpl<span>&#64;</span>simula<span>&#46;</span>no</a>.</p>
</div>
<div class="section" id="links-to-local-files">
<h3>Links to Local Files<a class="headerlink" href="#links-to-local-files" title="Permalink to this headline">¶</a></h3>
<p>Links to files ending in <code class="docutils literal"><span class="pre">.txt</span></code>, <code class="docutils literal"><span class="pre">.html</span></code>, <code class="docutils literal"><span class="pre">.pdf</span></code>, <code class="docutils literal"><span class="pre">.py</span></code>, <code class="docutils literal"><span class="pre">.f</span></code>,
<code class="docutils literal"><span class="pre">.f77</span></code>, <code class="docutils literal"><span class="pre">.f90</span></code>, <code class="docutils literal"><span class="pre">.f95</span></code>, <code class="docutils literal"><span class="pre">.sh</span></code>, <code class="docutils literal"><span class="pre">.csh</span></code>, <code class="docutils literal"><span class="pre">.ksh</span></code>, <code class="docutils literal"><span class="pre">.zsh</span></code>,
<code class="docutils literal"><span class="pre">.c</span></code>, <code class="docutils literal"><span class="pre">.cpp</span></code>, <code class="docutils literal"><span class="pre">.cxx</span></code>, <code class="docutils literal"><span class="pre">.pl</span></code>, and <code class="docutils literal"><span class="pre">.java</span></code> follows the same
setup:</p>
<div class="highlight-doconce"><div class="highlight"><pre>see the &quot;DocOnce Manual&quot;: &quot;manual.do.txt&quot;.
</pre></div>
</div>
<p>which appears as see the <a class="reference external" href="manual.do.txt">DocOnce Manual</a>.
However, linking to local files like this needs caution:</p>
<blockquote>
<div><ul class="simple">
<li>In the <code class="docutils literal"><span class="pre">html</span></code> format the links work well if the files are
supplied with the <code class="docutils literal"><span class="pre">.html</span></code> with the same relative location.</li>
<li>In the <code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code> formats, such links in PDF files
will unless the <code class="docutils literal"><span class="pre">.tex</span></code> file has a full URL specified through
a <code class="docutils literal"><span class="pre">\hyperbaseurl</span></code> command and the linked files are located correctly
relative to this URL. Otherwise full URL must be used in links.</li>
<li>In the <code class="docutils literal"><span class="pre">sphinx</span></code> format, links to local files do not work unless the
files reside in a <code class="docutils literal"><span class="pre">_static</span></code> directory (a warning is issued about this).</li>
</ul>
</div></blockquote>
<p>As a consequence, we strongly recommend that one copies the relevant
files to a <code class="docutils literal"><span class="pre">_static</span></code> or <code class="docutils literal"><span class="pre">_static-name</span></code> directory and makes links to
files in this directory only (<code class="docutils literal"><span class="pre">name</span></code> is the nickname of the DocOnce
document, usually the name of the parent directory or main document).
Other links to files should use the full URL. If DocOnce is used
for HTML output only, then plain links to local files work fine.</p>
<p>If you want a link to a local source code file and have it
viewed in the browser rather than being downloaded, we recommend
to transform the source code file to HTML format by running
<code class="docutils literal"><span class="pre">pygmentize</span></code>, e.g.,</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; pygmentize -l bash -f html -O full,style=emacs \
          -o _static/make.sh.html subdir/make.sh
</pre></div>
</div>
<p>Then you can link to <code class="docutils literal"><span class="pre">_static/make.sh.html</span></code> instead of
<code class="docutils literal"><span class="pre">subdir/make.sh</span></code>. Here is an example where the reader
has the file available as <code class="docutils literal"><span class="pre">src/myprog.py</span></code> in her
software and the document links to <code class="docutils literal"><span class="pre">_static/myprog.py</span></code>:</p>
<div class="highlight-doconce"><div class="highlight"><pre>See the code URL:&quot;src/myprog.py&quot; (&quot;view: &quot;_static/myprog.py.html&quot;).
</pre></div>
</div>
<p>Links to files with other extensions are typeset with
<em>the filename as link text</em>. The syntax consists of
the keyword URL, followed by a colon, and then the filename enclosed
in double quotes:</p>
<div class="highlight-doconce"><div class="highlight"><pre>URL: &quot;manual.html&quot;
</pre></div>
</div>
<p>resulting in the link <a class="reference external" href="manual.html">manual.html</a>.</p>
</div>
<div class="section" id="quotes">
<span id="index-46"></span><h3>Quotes<a class="headerlink" href="#quotes" title="Permalink to this headline">¶</a></h3>
<p id="index-47">Quotations employ either the emphasized font or double quotation marks.
In the latter case, one should not use the character <code class="docutils literal"><span class="pre">&quot;</span></code> but rather
the (LaTeX-inspired) construction with double backticks and two single
quotes:</p>
<div class="highlight-doconce"><div class="highlight"><pre>This is a sentence with ``words to be quoted&#39;&#39;.
</pre></div>
</div>
<p>To candidates for find double quotes that should be transferred to the above
type of quotation (which is a common mistake),
one can run a regular expression search like</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; find . -name &#39;*.do.txt&#39; -exec grep -E \
          &#39;[^(&quot;]&quot;[A-Za-z0-9 ,]+&quot; *[^:`)&quot;]&#39; {} \; -print
</pre></div>
</div>
<p>This search may give many false hits as double quotes are frequently
used in computer code and preprocessor instructions (URLs and hyperlinks
should not give hits in the above regular expressions).</p>
</div>
<div class="section" id="non-breaking-space">
<span id="index-48"></span><h3>Non-Breaking Space<a class="headerlink" href="#non-breaking-space" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-49"></span><p id="index-50">The non-breaking space character is tilde:</p>
<div class="highlight-doconce"><div class="highlight"><pre>Here comes a long line with a specification of a number with unit at the end,
which is an example that requires a &quot;non-breaking space character&quot;:
<span class="s">&quot;http://en.wikipedia.org/wiki/Non-breaking_space&quot;</span>: 7.4~km is traveled
in~$7.4/5.5\approx 1.345$~s. (Computer code, where the tilde has a
meaning, as in `y = ~x`, is not affected. The non-breaking character only
works between characters, numbers, and the math dollar sign.)
</pre></div>
</div>
<p>This is rendered as</p>
<blockquote>
<div>Here comes a long line with a specification of a number with unit at the end,
which is an example that requires a <a class="reference external" href="http://en.wikipedia.org/wiki/Non-breaking_space">non-breaking space character</a>: 7.4&nbsp;km is traveled
in&nbsp;<span class="math">\(7.4/5.5\approx 1.345\)</span>&nbsp;s. (Computer code, where the tilde has a
meaning, as in <code class="docutils literal"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">~x</span></code>, is not affected. The non-breaking character only
works between characters, numbers, and the math dollar sign.)</div></blockquote>
</div>
<div class="section" id="horizontal-rule">
<h3>Horizontal rule<a class="headerlink" href="#horizontal-rule" title="Permalink to this headline">¶</a></h3>
<p id="index-51">A horizontal rule for separating content vertically, like this:</p>
<hr class="docutils" />
<p>is typeset as four or more hyphens on a single line:</p>
<div class="highlight-doconce"><div class="highlight"><pre>---------
</pre></div>
</div>
</div>
<div class="section" id="em-dash">
<h3>Em-dash<a class="headerlink" href="#em-dash" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-52"></span><p id="index-53">The <code class="docutils literal"><span class="pre">latex</span></code>, <code class="docutils literal"><span class="pre">pdflatex</span></code>, <code class="docutils literal"><span class="pre">sphinx</span></code>, and <code class="docutils literal"><span class="pre">html</span></code> formats support em-dash,
indicated by three hyphens: <code class="docutils literal"><span class="pre">---</span></code>. The em-dash has two applications: 1)
as alternative to a hyphen with space around in a sentence&#8212;except that
there are no spaces around the em-dash, and 2) origin of quotes,
where there is no space between the end of the quote and the m-dash:</p>
<blockquote>
<div><em>Premature optimization is the root of all evil.</em>&#8212; Donald Knuth.</div></blockquote>
<p>The associated DocOnce source reads</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!bquote</span>
*Premature optimization is the root of all evil.*--- Donald Knuth.
<span class="k">!equote</span>
</pre></div>
</div>
</div>
<div class="section" id="ampersand">
<h3>Ampersand<a class="headerlink" href="#ampersand" title="Permalink to this headline">¶</a></h3>
<p id="index-54">An ampersand, as in Guns &amp; Roses or Texas A&amp;M, is written as a
plain <code class="docutils literal"><span class="pre">&amp;</span></code> <em>with space(s) on both sides</em>. Single upper case letters on each
side of <code class="docutils literal"><span class="pre">&amp;</span></code>, as in <code class="docutils literal"><span class="pre">Texas</span> <span class="pre">A</span> <span class="pre">&amp;</span> <span class="pre">M</span></code>, remove the spaces and result in
Texas A&amp;M, while words on both sides of <code class="docutils literal"><span class="pre">&amp;</span></code>, as in <code class="docutils literal"><span class="pre">Guns</span> <span class="pre">&amp;</span> <span class="pre">Roses</span></code>,
preserve the spaces: Guns &amp; Roses. Failing to have spaces before and
after <code class="docutils literal"><span class="pre">&amp;</span></code> will result in wrong typesetting of the ampersand in the <code class="docutils literal"><span class="pre">html</span></code>,
<code class="docutils literal"><span class="pre">latex</span></code>, and <code class="docutils literal"><span class="pre">pdflatex</span></code> formats. If special quoting of the ampersand
is undesired, e.g., when one has inserted native LaTeX code for tables,
the command-line option <code class="docutils literal"><span class="pre">--no_ampersand_quote</span></code> for <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> turns
off the ampersand treatment for all formats.</p>
</div>
<div class="section" id="footnotes">
<h3>Footnotes<a class="headerlink" href="#footnotes" title="Permalink to this headline">¶</a></h3>
<p id="index-55">Typesetting of footnotes employs a common email or Extended Markdown syntax:</p>
<div class="highlight-doconce"><div class="highlight"><pre>Footnotes are typeset according to the output format[^typesetting].
The syntax is optional spaces, opening bracket, hat, a footnote name
without spaces[^remedy-for-name-with-spaces], and closing bracket. The
logical name of the footnote is not used in LaTeX, HTML,
reStructuredText, or Sphinx, because these languages employ numbered
footnotes. Other formats employ the logical name.

[^typesetting]: Typesetting of the footnote depends on the format.
Plain text does nothing, LaTeX removes the definition and inserts the
footnote as part of the LaTeX text.  reStructuredText and Sphinx
employ a similar type of typesetting as Extended Markdown and DocOnce,
and in HTML we keep the same syntax, just displayed properly in HTML.

Footnotes are preferably defined after the paragraph they are used.
The definition is the footnote syntax (some optional space, bracket,
hat, name, bracket) followed by colon and a text.
A new paragraph marks the end of a footnote.

[^remedy-for-name-with-spaces]: Just put in dashes or underscores in
case of spaces.
</pre></div>
</div>
<p>The text above looks as follows.</p>
<p>Footnotes are typeset according to the output format <a class="footnote-reference" href="#typesetting" id="id9">[1]</a>.
The syntax is optional spaces, opening bracket, hat, a footnote name
without spaces <a class="footnote-reference" href="#remedy-for-name-with-spaces" id="id10">[2]</a>, and closing bracket. The
logical name of the footnote is not used in LaTeX, HTML,
reStructuredText, or Sphinx, because these languages employ numbered
footnotes. Other formats employ the logical name.</p>
<table class="docutils footnote" frame="void" id="typesetting" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[1]</a></td><td>Typesetting of the footnote depends on the format.
Plain text does nothing, LaTeX removes the definition and inserts the
footnote as part of the LaTeX text.  reStructuredText and Sphinx
employ a similar type of typesetting as Extended Markdown and DocOnce,
and in HTML we keep the same syntax, just displayed properly in HTML.</td></tr>
</tbody>
</table>
<p>Footnotes are preferably defined after the paragraph they are used.
The definition is the footnote syntax (some optional space, bracket,
hat, name, bracket) followed by colon and a text.
A new paragraph marks the end of a footnote.</p>
<table class="docutils footnote" frame="void" id="remedy-for-name-with-spaces" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[2]</a></td><td>Just put in dashes or underscores in
case of spaces.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="inline-comments">
<h3>Inline Comments<a class="headerlink" href="#inline-comments" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-56"></span><p id="index-57">DocOnce also supports inline comments in the text:</p>
<div class="highlight-doconce"><div class="highlight"><pre>[name: comment]
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">name</span></code> is (e.g.) the name of the author of the comment, and <code class="docutils literal"><span class="pre">comment</span></code> is a
plain text text. Note that <em>there must be a space after the colon</em>,
otherwise the comment is not recognized. The name can contain upper and lower
case characters, digits, single quote, <code class="docutils literal"><span class="pre">+</span></code> and <code class="docutils literal"><span class="pre">-</span></code>, as well
as space. Next is an example.
[<strong>hpl&#8217;s comment 1</strong>: Inline comments can span several lines, if desired.]</p>
<p>The name and comment are visible in the output unless <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code>
is run with a command-line argument <code class="docutils literal"><span class="pre">--skip_inline_comments</span></code>
(see the section <a class="reference internal" href="#doconce2formats"><span class="std std-ref">From DocOnce to Other Formats</span></a> for an example). Inline comments
are helpful during development of a document since different authors
and readers can comment on formulations, missing points, etc.
All such comments can easily be removed from the <code class="docutils literal"><span class="pre">.do.txt</span></code> file
by <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">remove_inline_comments</span></code> (see the section <a class="reference internal" href="#doconce2formats"><span class="std std-ref">From DocOnce to Other Formats</span></a>).</p>
<p>Inline comments are typeset in a simple way: boldface name, a
numbering of the comment, and then the comment, all in red and in
parenthesis. However, with the <code class="docutils literal"><span class="pre">--latex_todonotes</span></code> option, LaTeX will
apply the <code class="docutils literal"><span class="pre">todonotespackage</span></code> to typeset the comments in very visible
color boxes.</p>
</div>
<div class="section" id="inline-comments-for-editing">
<h3>Inline Comments for Editing<a class="headerlink" href="#inline-comments-for-editing" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-58"></span><div class="admonition note" id="index-59">
<p class="first admonition-title">Note</p>
<p class="last">The inline editing syntax in DocOnce was implemented before the invention
of <a class="reference external" href="https://github.com/CriticMarkup/CriticMarkup-toolkit">CriticMarkup</a>.
Now it would make sense to use the CriticMarkup syntax and associated
tools. (DocOnce needs proper rendering of CriticMarkup</p>
</div>
<p>Inline comments can also be used to markup editing of the text.
The following syntax is supported:</p>
<div class="highlight-doconce"><div class="highlight"><pre>[add: ,]
[add: .]
[add: ;]
[del: ,]
[del: ,]
[del: .]
[del: ;]
[add: some text]
[del: some text]
[edit: some text -&gt; some replacement for text]
[name: some text -&gt; some replacement for text]
</pre></div>
</div>
<p>That is, one can add, delete, and replace text, and adding or deleting
a comma, period, or semicolon leads to special typesetting where
such a small edit is highlighted. Below
is an example of a text with inline editing.</p>
<p>Originally, we have the text</p>
<div class="highlight-doconce"><div class="highlight"><pre>First consider a quantity $Q$. Without loss of generality, we assume
$Q&gt;0$. There are three, fundamental, basic property of $Q$.
</pre></div>
</div>
<p>Then, some reader wants to change this text and explicitly demonstrate
what is deleted, added, and replaced (as when using track changes
in Microsoft Word). The use of the <code class="docutils literal"><span class="pre">add</span></code>, <code class="docutils literal"><span class="pre">del</span></code>, and replacement
construction with <code class="docutils literal"><span class="pre">-&gt;</span></code> may look as follows.</p>
<div class="highlight-doconce"><div class="highlight"><pre>First[add: ,] consider [edit: a quantity -&gt; the flux]
[del: $Q$. Without loss of generality,
we assume] $Q&gt;0$. There are three[del: ,] fundamental[del: , basic]
[edit: property -&gt; properties] of $Q$. [add: These are not
important for the following discussion.]
</pre></div>
</div>
<p>The text gets rendered as</p>
<blockquote>
<div>First, (<strong>edit 2: add comma</strong>) consider (<strong>edit 3: remove</strong> a quantity) (<strong>insert:</strong>)the flux (<strong>end insert</strong>)
(<strong>edit 4</strong>: <strong>delete</strong> <span class="math">\(Q\)</span>. Without loss of generality,
we assume) <span class="math">\(Q&gt;0\)</span>. There are three (<strong>edit 5</strong>: delete comma) fundamental(<strong>edit 6</strong>: <strong>delete</strong> , basic)
(<strong>edit 7: remove</strong> property) (<strong>insert:</strong>)properties (<strong>end insert</strong>) of <span class="math">\(Q\)</span>.  (<strong>edit 8: add</strong>) These are not
important for the following discussion. (<strong>end add</strong>)</div></blockquote>
<p>Such inline comments with edits are only given special typesetting in
the output formats <code class="docutils literal"><span class="pre">latex</span></code>, <code class="docutils literal"><span class="pre">pdflatex</span></code>, <code class="docutils literal"><span class="pre">html</span></code>, and <code class="docutils literal"><span class="pre">sphinx</span></code>.
Otherwise, just the DocOnce syntax is shown (but that is also quite
readable as edit instructions.)</p>
<p id="index-60">The editing implied by the edit comments can be implemented in the DocOnce
file by the command</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce apply_edit_comments mydoc.do.txt
</pre></div>
</div>
</div>
<div class="section" id="forced-line-breaks">
<h3>Forced Line Breaks<a class="headerlink" href="#forced-line-breaks" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-61"></span><span class="target" id="index-62"></span><p id="index-63">By <em>ending</em> a line in the DocOnce file
with <code class="docutils literal"><span class="pre">&lt;linebreak&gt;</span></code> the output format has a forced
linebreak at this point. This can be used to typeset poems,
songs (if not in a verbatim block), or the origin of quotes.
Here is an example:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!bquote</span>
*Program writing is substantially more demanding than book
writing. Why is it so? I think the main reason is that a larger
attention span is needed when working on a large computer program
than when doing other intellectual tasks.* &lt;linebreak&gt;
Donald Knuth cite[p. 18]{Knuth85}, computer scientist, 1938-.
<span class="k">!equote</span>
</pre></div>
</div>
<p>is rendered as</p>
<blockquote>
<div><p><em>Program writing is substantially more demanding than book
writing. Why is it so? I think the main reason is that a larger
attention span is needed when working on a large computer program
than when doing other intellectual tasks.</em></p>
<div class="line-block">
<div class="line">Donald Knuth <a class="reference internal" href="#ref1" id="id11">[Ref1]</a> (p. 18), computer scientist, 1938-.</div>
</div>
</div></blockquote>
<p>The <code class="docutils literal"><span class="pre">&lt;linebreak&gt;</span></code> is a newline in LaTeX if it has preceding text,
otherwise it is a <code class="docutils literal"><span class="pre">\vspace{3mm}</span></code>. In HTML, <code class="docutils literal"><span class="pre">&lt;linebreak&gt;</span></code> is <code class="docutils literal"><span class="pre">&lt;br&gt;</span></code>.
Both constructions can be used to either force a linebreak or add
vertical space.</p>
<div class="admonition-tip-on-using-forced-linebreaks admonition">
<p class="first admonition-title">Tip on using forced linebreaks</p>
<p class="last">The <code class="docutils literal"><span class="pre">&lt;linebreak&gt;</span></code> tag is often useful in slides to avoid overfull
lines in bullet lists, partion such lines into separate lines,
or to insert vertical
space. It can be used in admonitions too to get more space between
the title and the text. Remember to have <code class="docutils literal"><span class="pre">&lt;linebreak&gt;</span></code> at the end of
the line.</p>
</div>
</div>
<div class="section" id="inline-mathematics">
<h3>Inline Mathematics<a class="headerlink" href="#inline-mathematics" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-64"></span><span class="target" id="index-65"></span><p id="index-66">Inline mathematics is written as in LaTeX, i.e., inside dollar signs.
Many formats leave this syntax as it is (including the two dollar signs),
hence nice math formatting is only obtained in LaTeX, HTML, MediaWiki,
and Sphinx (Epytext has some inline math support that is utilized).</p>
<p>The following text</p>
<div class="highlight-doconce"><div class="highlight"><pre>Let $a=\sin(x) + \cos(x)$. Then $a^2 = 2\sin(x)\cos(x)$
because $\sin^2x + \cos^2x = 1$.
</pre></div>
</div>
<p>is rendered as &#8220;Let <span class="math">\(a=\sin(x) + \cos(x)\)</span>. Then <span class="math">\(a^2 = 2\sin(x)\cos(x)\)</span>
because <span class="math">\(\sin^2x + \cos^2x = 1\)</span>.&#8221;</p>
<p>Mathematical expressions in LaTeX syntax often contains
special formatting commands, which may appear annoying in plain
text. DocOnce therefore supports an extended inline math syntax where
the writer can provide an alternative syntax suited for formats close
to plain ASCII:</p>
<div class="highlight-doconce"><div class="highlight"><pre>Here is an example on a linear system
${\bf A}{\bf x} = {\bf b}$|$Ax=b$,
where $\bf A$|$A$ is an $n\times n$|$nxn$ matrix, and
$\bf x$|$x$ and $\bf b$|$b$ are vectors of length $n$|$n$.
</pre></div>
</div>
<p>That is, we provide two alternative expressions, both enclosed in
dollar signs and separated by a pipe symbol, the expression to the
left is used in formats with LaTeX support (<code class="docutils literal"><span class="pre">latex</span></code>, <code class="docutils literal"><span class="pre">pdflatex</span></code>, <code class="docutils literal"><span class="pre">html</span></code>,
<code class="docutils literal"><span class="pre">sphinx</span></code>, <code class="docutils literal"><span class="pre">mwiki</span></code>), while the expression to the right is used for
all other formats.  The above text is typeset as &#8220;Here is an example
on a linear system <span class="math">\({\bf A}{\bf x} = {\bf b}\)</span>, where <span class="math">\(\bf A\)</span>
is an <span class="math">\(n\times n\)</span> matrix, and <span class="math">\(\bf x\)</span> and <span class="math">\(\bf b\)</span>
are vectors of length <span class="math">\(n\)</span>.&#8221;</p>
</div>
<div class="section" id="cross-referencing">
<h3>Cross-Referencing<a class="headerlink" href="#cross-referencing" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-67"></span><span class="target" id="index-68"></span><span class="target" id="index-69"></span><p id="index-70">References and labels are supported. The syntax is simple:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">label{section:verbatim}</span>   # defines a label
For more information we refer to Section ref{section:verbatim}.
</pre></div>
</div>
<p>The DocOnce label syntax is close that that of labels and cross-references in
LaTeX, but note that <em>labels cannot contain whitespace and cannot have a backslash</em>.</p>
<p>When the label is placed after a section or subsection heading,
the <code class="docutils literal"><span class="pre">plain</span></code> text, <code class="docutils literal"><span class="pre">epytext</span></code>, and <code class="docutils literal"><span class="pre">st</span></code> formats will simply
replace the reference by the title of the (sub)section.  All labels
will become invisible, except those in math environments.  (In the
<code class="docutils literal"><span class="pre">rst</span></code> and <code class="docutils literal"><span class="pre">sphinx</span></code> formats, the end effect is the same, but
the <code class="docutils literal"><span class="pre">label</span></code> and <code class="docutils literal"><span class="pre">ref</span></code> commands are first translated to the proper
reST commands by <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code>.) In the <code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">ipynb</span></code>, and wiki formats,
labels become anchors and references become links,
and with LaTeX <code class="docutils literal"><span class="pre">label</span></code> and <code class="docutils literal"><span class="pre">ref</span></code> are just equipped with backslashes so
these commands work as usual in LaTeX.</p>
<p>Since references to sections appear differently in different formats, we
provide an example.</p>
<div class="highlight-doconce"><div class="highlight"><pre>..., we refer to Section ref{sec:theory}.

<span class="gh">======= Basic Theory =======</span>
<span class="nb">label{sec:theory}</span>

A first discovery was that 1+1 is 2.
</pre></div>
</div>
<p>The reference appears as follows in various output formats:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code>: &#8220;we refer to Section 2.3&#8221; with
LaTeX code <a href="#id12"><span class="problematic" id="id13">`</span></a>we refer to Section&nbsp;:ref:<a href="#id14"><span class="problematic" id="id15">`</span></a>sec:theory&#8221;</li>
<li><code class="docutils literal"><span class="pre">html</span></code>: <code class="docutils literal"><span class="pre">we</span> <span class="pre">refer</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">section</span> <span class="pre">Basic</span> <span class="pre">Theory&quot;</span> <span class="pre">with</span> <span class="pre">the</span> <span class="pre">HTML</span> <span class="pre">code</span> <span class="pre">``we</span> <span class="pre">refer</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">section</span> <span class="pre">&lt;a</span> <span class="pre">href=&quot;#sec:theory&quot;&gt;Basic</span> <span class="pre">Theory&lt;/a&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">rst</span></code>, <code class="docutils literal"><span class="pre">sphinx</span></code>: &#8220;we refer to the section Basic Theory&#8221;</li>
<li><code class="docutils literal"><span class="pre">plain</span></code>: &#8220;we refer to the section &#8220;Basic Theory&#8221;&#8220;</li>
<li><code class="docutils literal"><span class="pre">ipynb</span></code>: &#8220;we refer to the section Basic Theory&#8221; with Markdown code <code class="docutils literal"><span class="pre">we</span> <span class="pre">refer</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">section</span> <span class="pre">[Basic</span> <span class="pre">Theory](#sec:theory)</span></code></li>
<li><code class="docutils literal"><span class="pre">mwiki</span></code>: &#8220;we refer to the section Basic Theory&#8221; with MediaWiki code <code class="docutils literal"><span class="pre">We</span> <span class="pre">refer</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">section</span> <span class="pre">[#Basic_Theory]</span></code></li>
</ul>
</div></blockquote>
<p>Labels and references should only be used for
(sub)sections, equations, figures, and movies (since DocOnce does not
support references to tables and algorithms, for instance).
By the way, here is an example on referencing Figure <a class="reference internal" href="#fig-viz"><span class="std std-ref">A wave</span></a>.
Additional references to the sections <a class="reference internal" href="#mathtext"><span class="std std-ref">LaTeX Blocks of Mathematical Text</span></a> and <a class="reference internal" href="#newcommands"><span class="std std-ref">Macros (Newcommands)</span></a> are
nice to demonstrate, as well as a reference to equations,
say (<span class="xref std std-ref">myeq1</span>)-(<span class="xref std std-ref">myeq2</span>).</p>
<p>Hyperlinks to files or web addresses are handled as explained
in the section <a class="reference internal" href="#inline-tagging"><span class="std std-ref">Inline Tagging</span></a>.</p>
<p id="index-71">References to equations and sections in other documents can be done
by the <em>generalized cross-referencing</em> syntax explained in the next
section. However, sometimes one wants in an HTML document or notebook
to make references to equations and sections in
a LaTeX textbook. This is not well handled by the generalized cross-referencing
technique, but DocOnce has a special option for this feature:
<code class="docutils literal"><span class="pre">--replace_ref_by_latex_auxno=../book.aux</span></code> will read the label and numbering
information from <code class="docutils literal"><span class="pre">../book.aux</span></code> and replace all references (<code class="docutils literal"><span class="pre">ref</span></code>) by the
corresponding number found in the <code class="docutils literal"><span class="pre">../book.aux</span></code> file. Sometimes one wants
to use this feature for selected references. In that case, use <code class="docutils literal"><span class="pre">refaux</span></code>
instead of <code class="docutils literal"><span class="pre">ref</span></code>. If there is a single <code class="docutils literal"><span class="pre">refaux</span></code> command in the DocOnce
source, only <code class="docutils literal"><span class="pre">refaux</span></code> references will be replaced by numbers from the
<code class="docutils literal"><span class="pre">.aux</span></code> file. Otherwise, all <code class="docutils literal"><span class="pre">ref</span></code> commands corresponding to labels in
the <code class="docutils literal"><span class="pre">.aux</span></code> file will be replaced.</p>
</div>
<div class="section" id="generalized-cross-referencing">
<span id="manual-genrefs"></span><h3>Generalized Cross-Referencing<a class="headerlink" href="#generalized-cross-referencing" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-72"></span><span class="target" id="index-73"></span><span class="target" id="index-74"></span><span class="target" id="index-75"></span><span class="target" id="index-76"></span><p id="index-77">Sometimes a series of individual documents may be assembled to one
large document, typically a book.
In the book one wants to make cross references between chapters
and sections, while these become references to external documents
when the chapters (or sections) are compiled as stand-alone
documents. For example, one can in a DocOnce file <code class="docutils literal"><span class="pre">file1.do.txt</span></code>
have text like</p>
<div class="highlight-doconce"><div class="highlight"><pre>...as shown in Section ref{sec:eqs}.
</pre></div>
</div>
<p>with the label <code class="docutils literal"><span class="pre">sec:eqs</span></code> defined in another file <code class="docutils literal"><span class="pre">file2.do.txt</span></code>.
If <code class="docutils literal"><span class="pre">file1.do.txt</span></code> and <code class="docutils literal"><span class="pre">file2.do.txt</span></code> are combined to a single
document, the reference is treated correctly, but if <code class="docutils literal"><span class="pre">file1.do.txt</span></code>
is compiled as a single document, the label <code class="docutils literal"><span class="pre">sec:eqs</span></code> becomes
undefined. Then one would instead write</p>
<div class="highlight-doconce"><div class="highlight"><pre>...as shown in the document &quot;Mathematical Equations&quot;:
<span class="s">&quot;http://some.net/doc/matheqs.html&quot;</span> cite{math_eqs_2020}.
</pre></div>
</div>
<p>LaTeX has functionality for referring to labels
in external documents. One must use the <code class="docutils literal"><span class="pre">xr</span></code> package
and list external documents with a command
<code class="docutils literal"><span class="pre">\externaldocument{name}</span></code> such that LaTeX can extract label
information from the <code class="docutils literal"><span class="pre">name.aux</span></code> file. We are then able to
write the above reference as</p>
<div class="highlight-doconce"><div class="highlight"><pre>\externaldocument{file2}
...
...as shown in Section ref{sec:eqs} in cite{math_eqs_2020}.
</pre></div>
</div>
<p>and get output like &#8221;...as shown in Section 3.4 in [12].&#8221;
When the numbering of sections in <code class="docutils literal"><span class="pre">file2.tex</span></code> changes later,
the output from the shown line in <code class="docutils literal"><span class="pre">file1.tex</span></code> will automatically
be changed if <code class="docutils literal"><span class="pre">file2.aux</span></code> is recently compiled
(so <code class="docutils literal"><span class="pre">file2.aux</span></code> with the mapping from labels to section numbers is updated).</p>
<div class="section" id="generalized-references">
<h4>Generalized References<a class="headerlink" href="#generalized-references" title="Permalink to this headline">¶</a></h4>
<p>DocOnce mimics a generalization of the LaTeX functionality in the
<code class="docutils literal"><span class="pre">xr</span></code> package such that one can refer to external documents in
other formats than LaTeX (HTML, Sphinx, IPython notebooks, wikis, etc.).
This feature is called a <em>generalized reference</em> and involves
a reference with <em>three</em> values.
The syntax of generalized references reads</p>
<div class="highlight-doconce"><div class="highlight"><pre>ref[internal][cite][external]
</pre></div>
</div>
<p>If all references in the text <code class="docutils literal"><span class="pre">internal</span></code> are
to labels defined in the present DocOnce document, the
generalized reference becomes the text <code class="docutils literal"><span class="pre">internal</span></code>.
If one or more references in <code class="docutils literal"><span class="pre">internal</span></code> are not labels
present in the document and
<code class="docutils literal"><span class="pre">latex</span></code> or <code class="docutils literal"><span class="pre">pdflatex</span></code> is the output format,
the generalized reference becomes the
text <code class="docutils literal"><span class="pre">internal</span></code> followed by <code class="docutils literal"><span class="pre">cite</span></code>, while for all other formats the
text in <code class="docutils literal"><span class="pre">external</span></code> is used.</p>
<p>The example above can now be written as the generalized reference</p>
<div class="highlight-doconce"><div class="highlight"><pre>...as shown in ref[Section ref{sec:eqs}][ in cite{math_eqs_2020}][
the document &quot;Mathematical Equations&quot;:
<span class="s">&quot;http://some.net/doc/matheqs.html&quot;</span> cite{math_eqs_2020}].
</pre></div>
</div>
<p>(Note that there must be no spaces between closing and opening brackets: <code class="docutils literal"><span class="pre">][</span></code>.)
When the label <code class="docutils literal"><span class="pre">sec:eqs</span></code> is found in the current DocOnce document,
this generalized reference becomes</p>
<div class="highlight-doconce"><div class="highlight"><pre>Section ref{sec:eqs}
</pre></div>
</div>
<p>If not, and <code class="docutils literal"><span class="pre">latex</span></code> or <code class="docutils literal"><span class="pre">pdflatex</span></code> is the output format,
the reference becomes</p>
<div class="highlight-doconce"><div class="highlight"><pre>Section ref{sec:eqs}] in cite{math_eqs_2020}
</pre></div>
</div>
<p>while in all other cases the reference becomes</p>
<div class="highlight-doconce"><div class="highlight"><pre>the document &quot;Mathematical Equations&quot;:
<span class="s">&quot;http://some.net/doc/matheqs.html&quot;</span> cite{math_eqs_2020}
</pre></div>
</div>
<p>For the reference to a label in an external document
to work in the LaTeX case it is required to list this
document in the DocOnce file as</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="c"># Externaldocuments: file2</span>
</pre></div>
</div>
<p>Several external documents can be listed with comma as delimiter:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="c"># Externaldocuments: file2, file3, myfile</span>
</pre></div>
</div>
<p>on <em>a single line</em>. The <code class="docutils literal"><span class="pre">Externaldocuments</span></code> comment leads to use
of the <code class="docutils literal"><span class="pre">xr</span></code> package and insertion of <code class="docutils literal"><span class="pre">\externaldocument{file2}</span></code>
in the <code class="docutils literal"><span class="pre">.tex</span></code> output file. It is a good habit to place
the <code class="docutils literal"><span class="pre">Externaldocument</span></code> comment after the title, author, and date.</p>
<div class="admonition-external-documents-must-be-recently-compiled admonition">
<p class="first admonition-title">External documents must be recently compiled</p>
<p>When compiling DocOnce documents with generalized references
to <code class="docutils literal"><span class="pre">latex</span></code> or <code class="docutils literal"><span class="pre">pdflatex</span></code>,
all documents listed in
the <code class="docutils literal"><span class="pre">Externaldocuments</span></code> comment must have been recently compiled
such that their <code class="docutils literal"><span class="pre">.aux</span></code> files <em>are available and updated</em>.</p>
<p class="last">Note that cleaning (<code class="docutils literal"><span class="pre">doconce</span> <span class="pre">clean</span></code>)
of the directory holding an external document will destroy the
<code class="docutils literal"><span class="pre">.aux</span></code> file, and <code class="docutils literal"><span class="pre">latex</span></code> or <code class="docutils literal"><span class="pre">pdflatex</span></code> may then complain that
a file listed as <code class="docutils literal"><span class="pre">\externaldocument{}</span></code> has no <code class="docutils literal"><span class="pre">.aux</span></code> file.</p>
</div>
</div>
<div class="section" id="generalized-references-to-chapters">
<span id="index-78"></span><h4>Generalized References to Chapters<a class="headerlink" href="#generalized-references-to-chapters" title="Permalink to this headline">¶</a></h4>
<p>A reference to a chapter in a book becomes just
a reference to a complete stand-alone document
if chapters are compiled individually. Here is an example:</p>
<div class="highlight-doconce"><div class="highlight"><pre>...as shown in Chapter ref{ch:model}.
</pre></div>
</div>
<p>This reference works fine if the present document is a book and <code class="docutils literal"><span class="pre">ch:model</span></code>
is a label of a chapter in the book. However,
if the chapter with label <code class="docutils literal"><span class="pre">ch:model</span></code> is compiled separately, we would
rather write</p>
<div class="highlight-doconce"><div class="highlight"><pre>...as shown in cite{math_eqs_2020}.
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">math_eqs_2020</span></code> is the citation label for the external document
as listed in the Publish database. Or if the output format supports
hyperlinks, we would perhaps add such a link:</p>
<div class="highlight-doconce"><div class="highlight"><pre>the document &quot;Mathematical Equations&quot;:
<span class="s">&quot;http://some.net/doc/matheqs.html&quot;</span> cite{math_eqs_2020}.
</pre></div>
</div>
<p>Such references to
chapters or complete documents are very much like the previously
generalized references, but written with <code class="docutils literal"><span class="pre">refch</span></code> instead
of <code class="docutils literal"><span class="pre">ref</span></code>:</p>
<div class="highlight-doconce"><div class="highlight"><pre>refch[internal][cite][external]
</pre></div>
</div>
<p>The only difference between <code class="docutils literal"><span class="pre">refch</span></code> and <code class="docutils literal"><span class="pre">ref</span></code> is that the former,
for <code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code> output, just use the <code class="docutils literal"><span class="pre">cite</span></code> text
and not <code class="docutils literal"><span class="pre">internal</span></code> if the labels in the <code class="docutils literal"><span class="pre">internal</span></code> text are not found in
the document. To be precise, the reference</p>
<div class="highlight-doconce"><div class="highlight"><pre>...as shown in refch[Chapter ref{ch:eqs}][cite{eqs_doc_2008}][
the document &quot;Some Equations&quot;: &quot;http://some.net/someeqs/&quot;].
</pre></div>
</div>
<p>will be</p>
<div class="highlight-doconce"><div class="highlight"><pre>...as shown in Chapter ref{ch:eqs}.
</pre></div>
</div>
<p>if <code class="docutils literal"><span class="pre">ch:eqs</span></code> is a label defined in the present document. It becomes</p>
<div class="highlight-doconce"><div class="highlight"><pre>...as shown in Chapter cite{eqs_doc_2008}.
</pre></div>
</div>
<p>if <code class="docutils literal"><span class="pre">ch:eqs</span></code> is not found in the present document <em>and</em> the output
format is <code class="docutils literal"><span class="pre">latex</span></code> or <code class="docutils literal"><span class="pre">pdflatex</span></code>. In all other cases the result becomes</p>
<div class="highlight-doconce"><div class="highlight"><pre>...as shown in
the document &quot;Some Equations&quot;: &quot;http://some.net/someeqs/&quot;].
</pre></div>
</div>
</div>
<div class="section" id="generalized-references-to-latex-documents">
<h4>Generalized References to LaTeX Documents<a class="headerlink" href="#generalized-references-to-latex-documents" title="Permalink to this headline">¶</a></h4>
<p>It is difficult in the <code class="docutils literal"><span class="pre">[external]</span></code> part of the generalized reference to
refer to equation numbers in an external document. If one wants to refer
to a LaTeX document, say a textbook, from some HTML or notebook, then
one can use the <code class="docutils literal"><span class="pre">refaux</span></code> reference and an <code class="docutils literal"><span class="pre">.aux</span></code> as explained at the
end of the previous section. Here is one example:</p>
<div class="highlight-doconce"><div class="highlight"><pre>From ref[(ref{eq1})][ in cite{Langtangen_2045}][
equation (refaux{eq1}) in cite{Langtangen_2045}], we realize that...
</pre></div>
</div>
<p>For LaTeX output, the reference to <code class="docutils literal"><span class="pre">eq1</span></code> will remain, but for other
formats</p>
<div class="highlight-text"><div class="highlight"><pre>(refaux{eq1})
</pre></div>
</div>
<p>will be replaced by (say)
<code class="docutils literal"><span class="pre">(1.5)</span></code> if we provide the option <code class="docutils literal"><span class="pre">--replace_ref_by_latex_auxno=mybook.aux</span></code>
and <code class="docutils literal"><span class="pre">mybook.aux</span></code> defines label <code class="docutils literal"><span class="pre">eq1</span></code> to have number <code class="docutils literal"><span class="pre">1.5</span></code>.
Replacing <code class="docutils literal"><span class="pre">refaux</span></code> by <code class="docutils literal"><span class="pre">ref</span></code> above will lead to hardcoding of <cite>:ref:`eq1&#8221;
as ``1.5`</cite> also in LaTeX output (which is okay, the <code class="docutils literal"><span class="pre">xr</span></code> package and
giving <code class="docutils literal"><span class="pre">Externaldocuments:</span> <span class="pre">mybook</span></code> results in the same).</p>
<p>The example above is particularly relevant if one writes exercises that
are to be filtered out as notebooks. The notebooks can then refer to
a LaTeX book, while in the LaTeX version of the document,
the exercises make references to the LaTeX book via the <code class="docutils literal"><span class="pre">xr</span></code> package the
usual way.</p>
<p>Sometimes one does not want to refer to a LaTeX document in the
<code class="docutils literal"><span class="pre">[external]</span></code> part of a generalized reference, but to a web document.
Then the text must be
written in a different way if one has equation or section references.
For example,</p>
<div class="highlight-doconce"><div class="highlight"><pre>From ref[(ref{eq1})][ in cite{Langtangen_2045}][
the differential equation for $u(t)$ in the section
<span class="s">&quot;Setting up the model&quot;</span>: &quot;http://some.where.net/doc#model&quot;
in cite{Langtangen_2045}], we realize that...
</pre></div>
</div>
</div>
<div class="section" id="tool-for-generating-generalizedd-references">
<h4>Tool for Generating Generalizedd References<a class="headerlink" href="#tool-for-generating-generalizedd-references" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ref_external</span></code> command will read all the labels in the
external documents listed in the <code class="docutils literal"><span class="pre">Externaldocuments:</span></code> comment
and use the Publish database file of the current document
(specified by <code class="docutils literal"><span class="pre">BIBFILE:</span></code>) to automatically
generate substitution commands that translate ordinary LaTeX-style
internal references
to generalized references in DocOnce syntax.
For example, <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ref_external</span> <span class="pre">file1</span></code>
will find the reference</p>
<div class="highlight-doconce"><div class="highlight"><pre>......as shown in Section ref{sec:eqs}.
</pre></div>
</div>
<p>as a reference to a label <code class="docutils literal"><span class="pre">sec:eqs</span></code> defined in <code class="docutils literal"><span class="pre">file2</span></code>, grab
the title of <code class="docutils literal"><span class="pre">file2.do.txt</span></code>, find the bibliographic data in
the Publish file, and make a substitution command</p>
<div class="highlight-doconce"><div class="highlight"><pre>doconce subst &quot;Section\s+ref{sec:eqs}&quot; &quot;...&quot; $files
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">&quot;...&quot;</span></code> is the complete generalized reference for this particular
reference.
In other words, with <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ref_external</span></code> one can automatically
generate generalized references between, for example, chapters in
a book that exist as stand-alone documents.</p>
<div class="admonition-references-to-equations admonition">
<p class="first admonition-title">References to equations</p>
<p>Generalized references to equations work well in LaTeX, but
not in other formats as one cannot resolve the equation number
in the external document. It is then better to write different
text using the <code class="docutils literal"><span class="pre">FORMAT</span></code> variable in Mako:</p>
<div class="highlight-doconce"><div class="highlight"><pre>% if FORMAT in (&quot;pdflatex&quot;, &quot;latex&quot;):
By combining ref[(ref{eqs:g1})-(ref{eqs:g4})][ in cite{some_doc}][
dummy] we can derive the expression ...
% else:
One can from cite{some_doc} derive the expression
% endif
</pre></div>
</div>
<p class="last">The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ref_external</span></code> tool generates an <code class="docutils literal"><span class="pre">external</span></code> text
in case of references to equations that says
<a href="#id16"><span class="problematic" id="id17">``</span></a>reference to specific <strong>equations</strong> (label eqs:g1 and eqs:g4)
in external document &#8220;name&#8221;: &#8220;link&#8221; is not recommended&#8221;.
One can then search for this text and make a Mako if-else rewrite
as shown above.</p>
</div>
<div class="admonition-limited-support admonition">
<p class="first admonition-title">Limited support</p>
<p>The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ref_external</span></code> tool cannot correctly handle references
to a range of sections like</p>
<div class="highlight-doconce"><div class="highlight"><pre>Sections ref{mydoc:sec1}-ref{mydoc:sec2}
</pre></div>
</div>
<p class="last">The automatically generated generalized references should always
be manually checked and edited!</p>
</div>
</div>
<div class="section" id="a-worked-example">
<h4>A Worked Example<a class="headerlink" href="#a-worked-example" title="Permalink to this headline">¶</a></h4>
<p>Here is an example on a specific working generalized reference where
the LaTeX output also has a hyperlink:</p>
<div class="highlight-doconce"><div class="highlight"><pre>As explained in
ref[Section ref{subsec:ex}][in &quot;Langtangen, 2012&quot;:
<span class="s">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html#subsec:ex&quot;</span>
cite{DocOnce:test}][a &quot;section&quot;:
<span class="s">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html#subsec:ex&quot;</span> in
the document &quot;A Document for Testing DocOnce&quot;:
<span class="s">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html&quot;</span>
cite{DocOnce:test}], DocOnce documents may include tables.
</pre></div>
</div>
<p>With <code class="docutils literal"><span class="pre">latex</span></code> or <code class="docutils literal"><span class="pre">pdflatex</span></code> as output, this translates to</p>
<div class="highlight-doconce"><div class="highlight"><pre>As explained in
Section ref{subsec:ex}, DocOnce documents may include tables.
</pre></div>
</div>
<p>if the label <code class="docutils literal"><span class="pre">{subsec:ex}</span></code> appears in the present DocOnce source, and
otherwise</p>
<div class="highlight-doconce"><div class="highlight"><pre>As explained in
Section ref{subsec:ex} in &quot;Langtangen, 2012&quot;:
<span class="s">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html#subsec:ex&quot;</span>
cite{DocOnce:test}, DocOnce documents may include tables.
</pre></div>
</div>
<p>The latter DocOnce code is translated to the following
LaTeX code:</p>
<div class="highlight-doconce"><div class="highlight"><pre>As explained in
Section~\ref{subsec:ex} in
\href{{http://hplgit.github.io/doconce/...}}{Langtangen, 2012}
\cite{DocOnce:test}, DocOnce documents may include tables.
</pre></div>
</div>
<p>In a format different from <code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code>, the effective DocOnce
text becomes</p>
<div class="highlight-doconce"><div class="highlight"><pre>As explained in
a &quot;section&quot;:
<span class="s">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html#subsec:ex&quot;</span> in
the document &quot;A Document for Testing DocOnce&quot;:
<span class="s">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html&quot;</span>
cite{DocOnce:test}, DocOnce documents may include tables.
</pre></div>
</div>
<p>The rendered text in the current format becomes</p>
<blockquote>
<div>As explained in
a <a class="reference external" href="http://hplgit.github.io/doconce/test/demo_testdoc.html#subsec:ex">section</a> in
the document <a class="reference external" href="http://hplgit.github.io/doconce/test/demo_testdoc.html">A Document for Testing DocOnce</a>
<a class="reference internal" href="#ref2" id="id18">[Ref2]</a>, DocOnce documents may include tables.</div></blockquote>
<p>A complete &#8220;chapter&#8221; reference may look like</p>
<div class="highlight-doconce"><div class="highlight"><pre>As explained in
refch[Chapter ref{ch:testdoc}][&quot;Langtangen, 2012&quot;:
<span class="s">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html&quot;</span>
cite{DocOnce:test}][the document
<span class="s">&quot;A Document for Testing DocOnce&quot;</span>:
<span class="s">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html&quot;</span>
cite{DocOnce:test}], DocOnce documents may include tables.
</pre></div>
</div>
<p>The output now, if <code class="docutils literal"><span class="pre">ch:testdoc</span></code> is not a label in the document,
becomes in the <code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code> case</p>
<div class="highlight-doconce"><div class="highlight"><pre>As explained in
<span class="s">&quot;Langtangen, 2012&quot;</span>:
<span class="s">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html&quot;</span>
cite{DocOnce:test}, DocOnce documents may include tables.
</pre></div>
</div>
<p>That is, the internal reference <code class="docutils literal"><span class="pre">Chapter</span> <span class="pre">...</span></code> is omitted since
it is not meaningful to refer to an external document as &#8220;Chapter&#8221;.
The resulting rendered text in the current format becomes</p>
<blockquote>
<div>As explained in
the document
<a class="reference external" href="http://hplgit.github.io/doconce/test/demo_testdoc.html">A Document for Testing DocOnce</a>
<a class="reference internal" href="#ref2" id="id19">[Ref2]</a>, DocOnce documents may include tables.</div></blockquote>
<p>Note that LaTeX cannot
have links to local files, so a complete URL on the form
<code class="docutils literal"><span class="pre">http://...</span></code> must be used.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title">Tip</p>
<p class="last">Use <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ref_external</span></code> to get an overview of the external
references in a file. Very often you want to rewrite the text
to reduce the amount of external referencing. Remember then
to compile your document before running <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ref_external</span></code>
again since the command applies the compiled files to get information
(<code class="docutils literal"><span class="pre">tmp_preprocess_*</span></code> or <code class="docutils literal"><span class="pre">tmp_mako_*</span></code>) if you use any of the Preprocess
or Mako preprocessors.</p>
</div>
<div class="admonition-splitting-documents-into-smaller-parts-is-easy admonition">
<p class="first admonition-title">Splitting documents into smaller parts is easy</p>
<p class="last">The generalized references and the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ref_external</span></code> are great
tools for splitting an existing document into smaller parts, say one
chapter into two or one book into two books. Such a split will normally
create a lot of difficulties with cross-document referencing (unless
you just write directly in LaTeX with the <code class="docutils literal"><span class="pre">xr</span></code> packcage).</p>
</div>
</div>
</div>
<div class="section" id="index">
<h3>Index<a class="headerlink" href="#index" title="Permalink to this headline">¶</a></h3>
<p id="index-79">An index can be created for the <code class="docutils literal"><span class="pre">latex</span></code>, <code class="docutils literal"><span class="pre">rst</span></code>, and <code class="docutils literal"><span class="pre">sphinx</span></code> formats
by the <code class="docutils literal"><span class="pre">idx</span></code> keyword, following a LaTeX-inspired syntax:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="nb">idx{some index entry}</span>
<span class="nb">idx{main entry!subentry}</span>
<span class="nb">idx{`verbatim_text` and more}</span>
</pre></div>
</div>
<p>The exclamation mark divides a main entry and a subentry. Backquotes
surround verbatim text, which is correctly transformed in a LaTeX setting to</p>
<div class="highlight-doconce"><div class="highlight"><pre>\index{verbatim\_text@\texttt{\rm\smaller verbatim\_text and more}}
</pre></div>
</div>
<p>Everything related to the index simply becomes invisible in plain
text, Epytext, StructuredText, HTML, and wiki formats.  Note: <code class="docutils literal"><span class="pre">idx</span></code>
commands should be inserted outside paragraphs and admonitions,
not in between the
text as this may cause some strange behaviour of reST and
Sphinx formatting.  As a recommended rule, index items are naturally
placed right after section headings, before the text begins, while
index items related to a paragraph should be placed above the
paragraph one a separate line (and not in between the text or between
the paragraph heading and the text body, although this works fine if
LaTeX is the output format). For paragraphs with <code class="docutils literal"><span class="pre">===</span></code> heading,
the index keywords should be placed above the heading.</p>
<p>The keywords in the index are automatically placed in a meta
tag in <code class="docutils literal"><span class="pre">html</span></code> output such that search engines can make use of the them.</p>
</div>
<div class="section" id="emojis">
<h3>Emojis<a class="headerlink" href="#emojis" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-80"></span><p id="index-81">Emojis are specified by syntax like <code class="docutils literal"><span class="pre">:sweat_smile:</span></code>, followed by
whitespace (blank or newline) before and after.
The available emoji names are shown at <a class="reference external" href="http://www.emoji-cheat-sheet.com">http://www.emoji-cheat-sheet.com</a>.
Here is an example: :sweat_smile:</p>
<p>DocOnce supports emojis for the <code class="docutils literal"><span class="pre">html</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code> formats. All other
formats will just print the raw emoji name (like <code class="docutils literal"><span class="pre">:sweat_smile:</span></code>).
The command-line option <code class="docutils literal"><span class="pre">--no_emoji</span></code> removes all emojis from the output.</p>
</div>
</div>
<div class="section" id="exercises-problems-projects-and-examples">
<span id="manual-exercises"></span><h2>Exercises, Problems, Projects, and Examples<a class="headerlink" href="#exercises-problems-projects-and-examples" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-82"></span><span class="target" id="index-83"></span><span class="target" id="index-84"></span><p id="index-85">DocOnce has special support for four types of &#8220;exercises&#8221;, named
<em>exercise</em>, <em>problem</em>, <em>project</em>, or <em>example</em>.
These are all typeset as special kind of
subsections. Such subsections start with a subsection
headline surrounded 5 <code class="docutils literal"><span class="pre">=</span></code> characters, and last up to the
next headline or the end of the file. The headline itself must
consists of the word <em>Exercise</em>, <em>Problem</em>, <em>Project</em>, or <em>Example</em>, followed
by a colon and a title of the exercise, problem, or project.</p>
<div class="section" id="examples-on-exercise-syntax">
<h3>Examples on Exercise Syntax<a class="headerlink" href="#examples-on-exercise-syntax" title="Permalink to this headline">¶</a></h3>
<p>The next line(s) may contain a label and specification of the
name of the result file (if the answer to the exercise is to be handed
in) and a solution file. The DocOnce code looks like this:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gh">===== Project: Determine the Distance to the Moon =====</span>
<span class="nb">label{proj:moondist}</span>
file=earth2moon.pdf
solution=eart2moon_sol.do.txt

Here goes the running text of the project....
</pre></div>
</div>
<p>DocOnce will recognize the exercise, problem, project, or example <em>title</em>,
the optional <em>label</em>, the optional <em>name of the answer file</em> (<code class="docutils literal"><span class="pre">file=</span></code>), the
optional name of the <em>solution</em> file (<code class="docutils literal"><span class="pre">solution=</span></code>),
and the <em>running text</em>. In addition,
one can add subexercise environments, starting with <code class="docutils literal"><span class="pre">!bsubex</span></code> and ending
with <code class="docutils literal"><span class="pre">!esubex</span></code>, on the beginning of separate lines.
Within the main exercise or
a subexercise, three other environments are possible: (full) solution,
(short) <em>answer</em>, and <em>hints</em>. The environments have begin-end
directives <code class="docutils literal"><span class="pre">!bans</span></code>, <code class="docutils literal"><span class="pre">!eans</span></code>, <code class="docutils literal"><span class="pre">!bsol</span></code>, <code class="docutils literal"><span class="pre">!esol</span></code>, <code class="docutils literal"><span class="pre">!bhint</span></code>, <code class="docutils literal"><span class="pre">!ehint</span></code>, which
all must appear on the beginning of a separate line (just as
<code class="docutils literal"><span class="pre">!bc</span></code> and <code class="docutils literal"><span class="pre">!ec</span></code>).</p>
<p>The solution environment with <code class="docutils literal"><span class="pre">!bsol</span></code> and <code class="docutils literal"><span class="pre">!esol</span></code> allows inline
solution as an alternative to the <code class="docutils literal"><span class="pre">solution=...</span></code> directive mentioned
above, which requires that the solution is in a separate file. Comment
lines are inserted so that the beginning and end of answers and
solutions can be identified and removed if desired.</p>
<p>A full exercise set-up can be sketched as follows:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gh">===== Exercise: Determine the Distance to the Moon =====</span>
<span class="nb">label{exer:moondist}</span>
file=earth2moon.pdf

Here goes main body of text describing the exercise...

<span class="k">!bsubex</span>
Subexercises are numbered a), b), etc.

<span class="k">!bans</span>
Short answer to subexercise a).
<span class="k">!eans</span>

<span class="k">!bhint</span>
First hint to subexercise a).
<span class="k">!ehint</span>

<span class="k">!bhint</span>
Second hint to subexercise a).
<span class="k">!ehint</span>
<span class="k">!esubex</span>

<span class="k">!bsubex</span>
Here goes the text for subexercise b).

<span class="k">!bhint</span>
A hint for this subexercise.
<span class="k">!ehint</span>

<span class="k">!bsol</span>
Here goes the solution of this subexercise.
<span class="k">!esol</span>
<span class="k">!esubex</span>

<span class="k">!bremarks</span>
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
<span class="k">!eremarks</span>

<span class="k">!bsol</span>
Here goes a full solution of the whole exercise.
<span class="k">!esol</span>
<span class="k">!ec</span>
</pre></div>
</div>
<p>A recommended rule for using the different &#8220;exercise&#8221; types goes as follows:</p>
<blockquote>
<div><ul class="simple">
<li>Exercises are smaller problems directly related to the present chapter
(e.g., with references to the text).</li>
<li>Problems are sufficiently independent of the chapter&#8217;s text
that they make sense on their own, separated from the rest of the docoment.</li>
<li>Projects are larger problems that also make sense on their own.</li>
<li>Examples are exercises, problems, or projects, but with full solutions
not typeset with <code class="docutils literal"><span class="pre">!bsol</span></code> and <code class="docutils literal"><span class="pre">!esol</span></code> but as running text</li>
</ul>
</div></blockquote>
<p>The command line options <code class="docutils literal"><span class="pre">--without_answers</span></code> and <code class="docutils literal"><span class="pre">--without_solutions</span></code>
turn off output of answers and solutions, respectively, except for
examples.</p>
<p>Sometimes one does not want the heading of an exercise, problem, project,
or example to contain the keyword <code class="docutils literal"><span class="pre">Exercise:</span></code>, <code class="docutils literal"><span class="pre">Problem:</span></code>, <code class="docutils literal"><span class="pre">Project:</span></code>,
or <code class="docutils literal"><span class="pre">Example:</span></code>. By enclosing the keyword in braces, as in</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gh">===== {Problem}: Find a solution to a problem =====</span>
</pre></div>
</div>
<p>the keyword is marked for being left out of the heading, resulting in
the heading &#8220;Find a solution to a problem&#8221;.</p>
<p>The various elements of exercises are collected in a special data
structure (list of dictionaries) stored in a file <code class="docutils literal"><span class="pre">.mydoc.exerinfo</span></code>,
if <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code> is the name of the DocOnce file.  The file contains
a list of dictionaries, where keys in the dictionary corresponds to
elements in the exercise: filename, solution file, answer, label, list
of hints, list of subexercises, closing remarks, and the main body of
text.</p>
</div>
<div class="section" id="typesetting-of-exercises">
<h3>Typesetting of Exercises<a class="headerlink" href="#typesetting-of-exercises" title="Permalink to this headline">¶</a></h3>
<p>Tailored formatting of exercises in special output formats can make
use of the elements in an exercise.  For example, one can imagine web
formats where the hints are displayed one by one when needed and where
the result file can be uploaded. One can also think of mechanisms for
downloading the solution file if the result file meets certain
criteria.  DocOnce does not yet generate such functionality in any
output format, but this is an intended future feature to be
impelemented.</p>
<p>For now, exercises, problems, projects, examples are typeset as ordinary
DocOnce sections (this is the most general approach that will work for many
formats). One must therefore refer to an exercise, problem, project, or
example by its label, which normally will translate to the section number
(in LaTeX, for instance) or a link to the title of the section.
The <em>title</em> is typeset without any leading <em>Exercise:</em>, <em>Problem:</em>,
or <em>Project:</em> word, so that references like</p>
<div class="highlight-doconce"><div class="highlight"><pre>see Problem ref{...}
</pre></div>
</div>
<p>works well in all formats (i.e., no double <code class="docutils literal"><span class="pre">Problem</span> <span class="pre">Problem</span></code> appears).</p>
<div class="section" id="remark-on-typesettng-of-examples">
<h4>Remark on Typesettng of Examples<a class="headerlink" href="#remark-on-typesettng-of-examples" title="Permalink to this headline">¶</a></h4>
<p>Examples are <em>not</em> typeset similarly to exercises unless one adds
the command-line option <code class="docutils literal"><span class="pre">--examples_as_exercises</span></code>. That is, without
this option, any heading and starting with <code class="docutils literal"><span class="pre">Example:</span></code> makes DocOnce
treat the forthcoming text as ordinary text without any interpretation
of exercise-style instructions.
With the command-line option <code class="docutils literal"><span class="pre">--examples_as_exercises</span></code>,
one can use the <code class="docutils literal"><span class="pre">!bsubex</span></code> and <code class="docutils literal"><span class="pre">!bsol</span></code>
commands to indicate a subproblem and a solution. In this way, the
typesetting of the example looks like an exercise equipped with a solution.</p>
</div>
</div>
<div class="section" id="list-of-exercises-problems-and-projects">
<h3>List of Exercises, Problems, and Projects<a class="headerlink" href="#list-of-exercises-problems-and-projects" title="Permalink to this headline">¶</a></h3>
<p>DocOnce also supports listing all exercises, problems, and projects
with corresponding page numbers.
By default, no such listing is enabled. When running
<code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">pdflatex</span></code> (or <code class="docutils literal"><span class="pre">latex</span></code>)
there is a command-line option <code class="docutils literal"><span class="pre">--list_of_exercises</span></code>
that can be set to</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">toc</span></code>: include exercises, problems, and projects as part of
the table of contents</li>
<li><code class="docutils literal"><span class="pre">loe</span></code>: make a separate list of exercises, problems, and projects,
which appears after the table of contents</li>
</ul>
</div></blockquote>
<p>There is a special LaTeX environment for the exercises that one can
use to further tailor the appearance of exercises (given that one
edits the <code class="docutils literal"><span class="pre">.tex</span></code> file, preferably by a script after each <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code>
command).</p>
</div>
<div class="section" id="numbering-of-extra-equations-in-solutions">
<span id="manual-exercises-sol-no"></span><span id="index-86"></span><h3>Numbering of Extra Equations in Solutions<a class="headerlink" href="#numbering-of-extra-equations-in-solutions" title="Permalink to this headline">¶</a></h3>
<p>A potential problem arises if you produce two versions of your document,
one with solutions and one without solutions (<code class="docutils literal"><span class="pre">--without_solutions</span></code>),
and there are numbered equations in the solutions. Equations in the
text of the document <em>after</em> these exercises sections might then be
numbered differently. There are two ways out of this problem.</p>
<div class="section" id="book">
<h4>Book<a class="headerlink" href="#book" title="Permalink to this headline">¶</a></h4>
<p>In a book with chapters, collect all exercises at the end in a
separate section &#8220;Exercises&#8221;.
Equations are numbered chapter-wise, and equations in solutions
will not influence the numbering of equations before this exercise
section. However, if some of the exercises contain numbered equations
in the exercise text, numbered equations in solutions to previous exercises
will influence the numbering of equations. Avoid numbered equations
in exercise text.</p>
</div>
<div class="section" id="use-the-tag-command">
<h4>Use the tag command<a class="headerlink" href="#use-the-tag-command" title="Permalink to this headline">¶</a></h4>
<p>Equations can be given explicit numbers, completely governed by the writer.
The following equation is given the number <code class="docutils literal"><span class="pre">11.5.3</span></code> and a label <code class="docutils literal"><span class="pre">myeq</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>!bt
\[ 1 + 1 = 2 \tag{11.5.3}
label{myeq}
!et
</pre></div>
</div>
<p>Equations in solutions can then be given their own numbers (here, <code class="docutils literal"><span class="pre">11.5</span></code>
could be chapter 11, section 5). One can use a Mako variable to automatically
assign appropriate numbers in the <code class="docutils literal"><span class="pre">tag</span></code> command.</p>
</div>
</div>
<div class="section" id="extracting-all-exercises-in-a-separate-document">
<h3>Extracting All Exercises in a Separate Document<a class="headerlink" href="#extracting-all-exercises-in-a-separate-document" title="Permalink to this headline">¶</a></h3>
<p>The command</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce extract_exercises tmp_mako__mydoc.do.txt --filter=key1;key2
</pre></div>
</div>
<p>extracts all exercises in <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code> with keywords <code class="docutils literal"><span class="pre">key1</span></code> or <code class="docutils literal"><span class="pre">key2</span></code>
in a separate document <code class="docutils literal"><span class="pre">mydoc_exer.do.txt</span></code>. For example, this feature can
be used to extract all exercises suitable for being published as
IPython/Jupyter notebooks (and perhaps automatically graded by &#8220;<cite>nbgrader</cite>&#8221; &#8220;<a class="reference external" href="https://github.com/jupyter/nbgrader">https://github.com/jupyter/nbgrader</a>&#8221;). Just attach the keyword <code class="docutils literal"><span class="pre">ipynb</span></code> to all
exercises suitable for the IPython/Jupyter notebook and run the command
with <code class="docutils literal"><span class="pre">--filter=ipynb</span></code>. Without <code class="docutils literal"><span class="pre">--filter=</span></code>, the <code class="docutils literal"><span class="pre">extract_exercises</span></code> utility
extracts all exercises such that one can publish this document separately,
with or without solutions and/or short answers.
By &#8220;exercise&#8221; we here mean all exerices, problems,
and projects.</p>
<p><strong>Note:</strong>
Instead of having all filtered exercises in one document, yoy
may (especially for notebooks) want stand-alone documents for each
exercise, see the next section.</p>
</div>
<div class="section" id="extracting-all-exercises-as-stand-alone-documents">
<span id="exercises-standalone"></span><h3>Extracting All Exercises as Stand-Alone Documents<a class="headerlink" href="#extracting-all-exercises-as-stand-alone-documents" title="Permalink to this headline">¶</a></h3>
<p>It is sometimes convenient to publish exercises from a larger document
as <em>individual documents</em>.
With the <code class="docutils literal"><span class="pre">--exercises_in_zip</span></code> option, DocOnce will
generate a zip file <code class="docutils literal"><span class="pre">mydoc_exercises.zip</span></code> (for <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code>) with
each exercise (problem, project, or example) in a separate <code class="docutils literal"><span class="pre">.do.txt</span></code> file.
The zip archive also contains a script <code class="docutils literal"><span class="pre">make.py</span></code> for translating the
<code class="docutils literal"><span class="pre">.do.txt</span></code> files to various formats. In university courses it may be
attractive to give the students <code class="docutils literal"><span class="pre">.tex</span></code> with the exercise text such that
the students can fill in the answers and extend the text to a report.
Or one may distribute the exercises as IPython/Jupyter Notebook files
and let the students fill in answers in the notebooks. This approach
can be combined with &#8220;<cite>nbgrader</cite>&#8221; &#8220;<a class="reference external" href="https://github.com/jupyter/nbgrader">https://github.com/jupyter/nbgrader</a>&#8221;
for automatic grading.</p>
<p>The zip archive also contains a file <code class="docutils literal"><span class="pre">index.do.txt</span></code> with a list of all
the exercise files that can be published on the Internet and used for
download of the exercises. The <code class="docutils literal"><span class="pre">index.do.txt</span></code> file contains a variable
<code class="docutils literal"><span class="pre">FILE_EXTENSIONS</span></code> for the type of formats the exercises are available
in. The user must edit <code class="docutils literal"><span class="pre">make.py</span></code> accordingly so the right set of
formats are compiled as desired.</p>
<p><strong>Note:</strong>
Unzipping the archive packs out the files in a subdirectory
<code class="docutils literal"><span class="pre">standalone_exercises</span></code>. For figure and movie references to work one
needs the <code class="docutils literal"><span class="pre">--figure_prefix=../</span></code> and <code class="docutils literal"><span class="pre">--movie_prefix=../</span></code> options.
If the exercise files are distributed to students, make sure figure
files are also available (check the compiled exercises).</p>
<div class="admonition-references-in-stand-alone-exercises-may-not-work admonition">
<p class="first admonition-title">References in stand-alone exercises may not work</p>
<p class="last">Exercises with references to sections in the running text of the
original document cause trouble when the exercises are compiled as
stand-alone documents. For LaTeX this may work if the original document
is compiled in the parent directory of <code class="docutils literal"><span class="pre">standalone_exercises</span></code> and
the corresponding <code class="docutils literal"><span class="pre">.aux</span></code> file is available (the exercise will in such
cases make use of the <code class="docutils literal"><span class="pre">#</span> <span class="pre">Externaldocuments:</span></code> command in the file and
use the <code class="docutils literal"><span class="pre">xr</span></code> package for cross-referencing between documents).
All other formats will face problems with references to the original
parent document. When missing references are encountered, a comment about
the issue is inserted in the exercise file.</p>
</div>
<p><strong>Naming of Exercise Files.</strong>
The option <code class="docutils literal"><span class="pre">--exercises_in_zip_filename=X</span></code> can be used to determine the
name of the exercise files. With <code class="docutils literal"><span class="pre">X=logical</span></code>, the logical name specified by
the <code class="docutils literal"><span class="pre">file=</span></code> command in the exercise is used. With <code class="docutils literal"><span class="pre">X=number</span></code>, the
filename contains the exercise number, either an absolute number (integer)
like <code class="docutils literal"><span class="pre">132</span></code>
or a <code class="docutils literal"><span class="pre">chapter.local_number</span></code> like <code class="docutils literal"><span class="pre">5.2</span></code> or <code class="docutils literal"><span class="pre">B.4</span></code> (in case of an appendix),
depending on the option
<code class="docutils literal"><span class="pre">--exercise_numbering=X</span></code>, with <code class="docutils literal"><span class="pre">X=absolute</span></code> or <code class="docutils literal"><span class="pre">X=chapter</span></code>, respectively.</p>
</div>
<div class="section" id="example-on-an-exercise">
<h3>Example on an Exercise<a class="headerlink" href="#example-on-an-exercise" title="Permalink to this headline">¶</a></h3>
<p>The next section show the typesetting of the following exercise.
For output in HTML with various Bootstrap styles, hints and answers
appear as unfolded sections - one must click to open the text.</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gh">===== Exercise: Compute integrals =====</span>
<span class="nb">label{doconce:manual:exercise:ex}</span>
file=integrals.py
keywords=integrals

Use the most appropriate tools to answer the various subexercises.

<span class="k">!bsubex</span>
What is 1+1?

<span class="k">!bhint</span>
Your brain is a perfectly appropriate tool for this task.
<span class="k">!ehint</span>
<span class="k">!esubex</span>

<span class="k">!bans</span>
2
<span class="k">!eans</span>

<span class="k">!bsubex</span>
What is the integral of $e^{-ax}\sin(wx)$?

<span class="k">!bhint</span>
Assume $a$ and $w$ real.
<span class="k">!ehint</span>

<span class="k">!bsol</span>
This is an easy task for SymPy:

<span class="k">!bc</span> pyshell
&gt;&gt;&gt; import sympy as sp
&gt;&gt;&gt; x = sp.symbols(&#39;x&#39;)
&gt;&gt;&gt; a, w = sp.symbols(&#39;a w&#39;, real=True,positive=True)
&gt;&gt;&gt; F = sp.integrate(sp.exp(-a*x)*sp.sin(w*x), x)
&gt;&gt;&gt; F
-a*sin(w*x)/(a**2*exp(a*x) + w**2*exp(a*x)) -
w*cos(w*x)/(a**2*exp(a*x) + w**2*exp(a*x))
&gt;&gt;&gt; sp.simplify(F)
-(a*sin(w*x) + w*cos(w*x))*exp(-a*x)/(a**2 + w**2)
<span class="k">!ec</span>
That is, $-\frac{e^{- a x}}{a^{2} + w^{2}}
\left(a \sin{\left (w x \right )}
+ w \cos{\left (w x \right )}\right)$.
<span class="k">!esol</span>
<span class="k">!esubex</span>

<span class="k">!bsubex</span>
Compute $\int_{-\infty}^1 e^{-x^4}dx$.

<span class="k">!bsol</span>
Continuing the last session,

<span class="k">!bc</span> pyshell
&gt;&gt;&gt; F = sp.integrate(sp.exp(-x**4), (x, -sp.oo, 0))
&gt;&gt;&gt; F
gamma(1/4)/4
&gt;&gt;&gt; F.evalf()
0.906402477055477
<span class="k">!ec</span>
<span class="k">!esol</span>
<span class="k">!esubex</span>

<span class="k">!bsubex</span>
<span class="k">!bquiz</span>
Q: What is correct about the integral $\int e^{-t^2}dt$?

Cw: The integral is the error function.
E: Almost correct, but the error function has a slightly different
definition:

<span class="k">!bt</span>
\[ \hbox{erf}(x) = \frac{2}{\sqrt{2}}\int_{0}^x e^{-t^2}dt.\]
<span class="k">!et</span>

Cw: It cannot be computed.
E: That would be correct if computed means ``calculated as
a closed-form formula by hand&#39;&#39;, but the integral
$\int_a^b e^{-t^2}dt$? can be easily computed numerical
methods.

Cr: It equals

<span class="k">!bt</span>
\[ \frac{\Gamma{\left(\frac{1}{4} \right)}
\gamma\left(\frac{1}{4}, x^{4}\right)}{16
\Gamma{\left(\frac{5}{4} \right)}},\]
<span class="k">!et</span>
where $\Gamma(x)$ is the (upper) incomplete gamma function
and $\gamma(x)$ is the lower incomplete gamma function
(see &quot;Wikipedia&quot;:
<span class="s">&quot;http://en.wikipedia.org/wiki/Incomplete_gamma_function&quot;</span>
for definition).
E: This is correct, as proved by SymPy:

<span class="k">!bc</span> pyshell
&gt;&gt;&gt; F = sp.integrate(sp.exp(-x**4), x)
&gt;&gt;&gt; F
gamma(1/4)*lowergamma(1/4, x**4)/(16*gamma(5/4))
<span class="k">!ec</span>

Cw: It equals the cumulative normal density function.
E: The cumulative normal density function, with mean $\mu$ and
standard deviation $\sigma$, is defined as

<span class="k">!bt</span>
\[ \Phi(x) = \int_{-\infty}^x \frac{1}{\sqrt{2\pi}\sigma}
e^{-\frac{(t-\mu)^2}{2\sigma}}dt.\]
<span class="k">!et</span>
<span class="k">!equiz</span>
<span class="k">!esubex</span>

<span class="k">!bremarks</span>
This exercise demonstrates subexercise, hint, solution, short answer,
multiple-choice question (quiz), and final remark - combined with
mathematics and computer code.
<span class="k">!eremarks</span>
</pre></div>
</div>
</div>
<div class="section" id="exercise-1-compute-integrals">
<span id="doconce-manual-exercise-ex"></span><h3>Exercise 1: Compute integrals<a class="headerlink" href="#exercise-1-compute-integrals" title="Permalink to this headline">¶</a></h3>
<p>Use the most appropriate tools to answer the various subexercises.</p>
<p><strong>a)</strong>
What is 1+1?</p>
<p><strong>Hint.</strong>
Your brain is a perfectly appropriate tool for this task.</p>
<p><strong>Answer.</strong>
2</p>
<p><strong>b)</strong>
What is the integral of <span class="math">\(e^{-ax}\sin(wx)\)</span>?</p>
<p><strong>Hint.</strong>
Assume <span class="math">\(a\)</span> and <span class="math">\(w\)</span> real.</p>
<p><strong>Solution.</strong>
This is an easy task for SymPy:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sympy</span> <span class="kn">as</span> <span class="nn">sp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="s">&#39;a w&#39;</span><span class="p">,</span> <span class="n">real</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">positive</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">a</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="n">x</span><span class="p">),</span> <span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span>
<span class="go">-a*sin(w*x)/(a**2*exp(a*x) + w**2*exp(a*x)) -</span>
<span class="go">w*cos(w*x)/(a**2*exp(a*x) + w**2*exp(a*x))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sp</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
<span class="go">-(a*sin(w*x) + w*cos(w*x))*exp(-a*x)/(a**2 + w**2)</span>
</pre></div>
</div>
<p>That is, <span class="math">\(-\frac{e^{- a x}}{a^{2} + w^{2}}
\left(a \sin{\left (w x \right )}
+ w \cos{\left (w x \right )}\right)\)</span>.</p>
<p><strong>c)</strong>
Compute <span class="math">\(\int_{-\infty}^1 e^{-x^4}dx\)</span>.</p>
<p><strong>Solution.</strong>
Continuing the last session,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">F</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">**</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">sp</span><span class="o">.</span><span class="n">oo</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span>
<span class="go">gamma(1/4)/4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span><span class="o">.</span><span class="n">evalf</span><span class="p">()</span>
<span class="go">0.906402477055477</span>
</pre></div>
</div>
<p><strong>d)</strong></p>
<p><strong>Question:</strong> What is correct about the integral <span class="math">\(\int e^{-t^2}dt\)</span>?</p>
<p><strong>Choice A:</strong> The integral is the error function.</p>
<p><abbr title="Wrong!">?</abbr></p>
<p><strong>Choice B:</strong> It cannot be computed.</p>
<p><abbr title="Wrong!">?</abbr> <abbr title="That would be correct if computed means &quot;calculated as a closed-form formula by hand&quot;, but the integral int_a^b e^{-t^2}dt? can be easily computed numerical methods.">#</abbr></p>
<p><strong>Choice C:</strong> It equals</p>
<div class="math">
\[\frac{\Gamma{\left(\frac{1}{4} \right)}
\gamma\left(\frac{1}{4}, x^{4}\right)}{16
\Gamma{\left(\frac{5}{4} \right)}},\]</div>
<p>where <span class="math">\(\Gamma(x)\)</span> is the (upper) incomplete gamma function
and <span class="math">\(\gamma(x)\)</span> is the lower incomplete gamma function
(see <a class="reference external" href="http://en.wikipedia.org/wiki/Incomplete_gamma_function">Wikipedia</a>
for definition).</p>
<p><abbr title="Right!">?</abbr></p>
<p><strong>Choice D:</strong> It equals the cumulative normal density function.</p>
<p><abbr title="Wrong!">?</abbr></p>
<p>Filename: <code class="docutils literal"><span class="pre">integrals.py</span></code>.</p>
<div class="section" id="remarks">
<h4>Remarks<a class="headerlink" href="#remarks" title="Permalink to this headline">¶</a></h4>
<p>This exercise demonstrates subexercise, hint, solution, short answer,
multiple-choice question (quiz), and final remark - combined with
mathematics and computer code.</p>
</div>
</div>
</div>
<div class="section" id="other-environments">
<h2>Other Environments<a class="headerlink" href="#other-environments" title="Permalink to this headline">¶</a></h2>
<div class="section" id="blocks-of-verbatim-computer-code">
<span id="sec-verbatim-blocks"></span><h3>Blocks of Verbatim Computer Code<a class="headerlink" href="#blocks-of-verbatim-computer-code" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-87"></span><span class="target" id="index-88"></span><span class="target" id="index-89"></span><p id="index-90">Blocks of computer code, to be typeset verbatim, must appear inside a
&#8220;begin code&#8221; <code class="docutils literal"><span class="pre">!bc</span></code> keyword and an &#8220;end code&#8221; <code class="docutils literal"><span class="pre">!ec</span></code> keyword. Both
keywords must be on a single line and <em>start at the beginning of the
line</em>.  Before such a code block there must be a plain sentence
(at least if successful transformation to reST and
ASCII-type formats is desired). For example, a code block cannot come
directly after a section/paragraph heading or a table.</p>
<p>Here is a plain code block:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!bc</span>
% Could be a comment line in some file
% And some data
1.003 1.025
2.204 1.730
3.001 1.198
<span class="k">!ec</span>
</pre></div>
</div>
<p>which gets rendered as</p>
<div class="highlight-text"><div class="highlight"><pre>% Could be a comment line in some file
% And some data
1.003 1.025
2.204 1.730
3.001 1.198
</pre></div>
</div>
<div class="section" id="typesetting-styles">
<h4>Typesetting Styles<a class="headerlink" href="#typesetting-styles" title="Permalink to this headline">¶</a></h4>
<p>There may be an argument after the <code class="docutils literal"><span class="pre">!bc</span></code> tag to specify a certain
environment (for <code class="docutils literal"><span class="pre">ptex2tex</span></code>, <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code>, or Sphinx) for
typesetting the verbatim code. For instance, <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">dat</span></code> corresponds to
the data file environment and <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">cod</span></code> is typically used for a code
snippet. There are some predefined environments explained below. If
there is no argument specifying the environment, one assumes some
plain verbatim typesetting (for <code class="docutils literal"><span class="pre">ptex2tex</span></code> this means the <code class="docutils literal"><span class="pre">ccq</span></code>
environment, which is defined in the config file <code class="docutils literal"><span class="pre">.ptex2tex.cfg</span></code>,
while for Sphinx it defaults to the <code class="docutils literal"><span class="pre">python</span></code> environment).</p>
<p>By default, <code class="docutils literal"><span class="pre">pro</span></code> is used for complete programs in Python, <code class="docutils literal"><span class="pre">cod</span></code> is
for a code snippet in Python, while <code class="docutils literal"><span class="pre">Xcod</span></code> and <code class="docutils literal"><span class="pre">Xpro</span></code> imply computer
language specific typesetting where <code class="docutils literal"><span class="pre">X</span></code> can be <code class="docutils literal"><span class="pre">f</span></code> for Fortran, <code class="docutils literal"><span class="pre">c</span></code>
for C, <code class="docutils literal"><span class="pre">cpp</span></code> for C++, <code class="docutils literal"><span class="pre">sh</span></code> for Unix shells, <code class="docutils literal"><span class="pre">pl</span></code> for Perl, <code class="docutils literal"><span class="pre">m</span></code> for
Matlab, <code class="docutils literal"><span class="pre">cy</span></code> for Cython, <code class="docutils literal"><span class="pre">r</span></code> for Ruby, <code class="docutils literal"><span class="pre">js</span></code> for JavaScript,
<code class="docutils literal"><span class="pre">latex</span></code> for LaTeX, <code class="docutils literal"><span class="pre">html</span></code> for HTML, and <code class="docutils literal"><span class="pre">py</span></code> for Python.  The
argument <code class="docutils literal"><span class="pre">sys</span></code> means by default <code class="docutils literal"><span class="pre">console</span></code> for Sphinx and
<code class="docutils literal"><span class="pre">CodeTerminal</span></code> (ptex2tex environent) for LaTeX. Other specifications
are <code class="docutils literal"><span class="pre">dat</span></code> for a data file or print out, <code class="docutils literal"><span class="pre">pyshell</span></code> for plain interactive Python
shell sessions, and <code class="docutils literal"><span class="pre">ipy</span></code> for interactive IPython sessions (the latter
does not introduce any environment in <code class="docutils literal"><span class="pre">sphinx</span></code> output, as interactive
sessions are automatically recognized and handled in that format).
(All these definitions of the arguments after <code class="docutils literal"><span class="pre">!bc</span></code> can be redefined
in the <code class="docutils literal"><span class="pre">.ptex2tex.cfg</span></code> configuration file for <code class="docutils literal"><span class="pre">ptex2tex</span></code> and in
the <code class="docutils literal"><span class="pre">sphinx</span> <span class="pre">code-blocks</span></code> comments for Sphinx, see below.)</p>
</div>
<div class="section" id="executable-and-non-executable-code">
<h4>Executable and Non-Executable Code<a class="headerlink" href="#executable-and-non-executable-code" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">ipynb</span></code> and <code class="docutils literal"><span class="pre">matlabnb</span></code> formats create notebooks where computer
code can be executed. Sometimes one wants to show code that is <em>not</em>
to be executed, but just shown as a text block. Any code environment
with a postfix <code class="docutils literal"><span class="pre">-t</span></code> indicates that the code is not to be executed, only
displayed. For example, <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">pycod-t</span></code> is a Python snippet not intended
for execution. All other formats than the notebook formats ignore the
<code class="docutils literal"><span class="pre">-t</span></code> postfix.</p>
</div>
<div class="section" id="customizing-code-environments-types-for-sphinx">
<h4>Customizing Code Environments Types for Sphinx<a class="headerlink" href="#customizing-code-environments-types-for-sphinx" title="Permalink to this headline">¶</a></h4>
<p>The argument after <code class="docutils literal"><span class="pre">!bc</span></code> can in case of
Sphinx output be mapped onto any valid Pygments language for typesetting of
the verbatim block by Pygments, if you do not want to rely on
the defaults. This mapping takes place in an
optional comment to be inserted in the DocOnce source file. Here is an
example on such a comment line:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="c"># sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console</span>
</pre></div>
</div>
<p>Three arguments are defined: <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">pycod</span></code> maps on to the
Pygments style <code class="docutils literal"><span class="pre">python</span></code> for Python code,
<code class="docutils literal"><span class="pre">!bc</span> <span class="pre">cod</span></code> maps on to the Pygments style <code class="docutils literal"><span class="pre">fortran</span></code> for Fortran
code, <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">cppcod</span></code>  maps on to the Pygments style <code class="docutils literal"><span class="pre">c++</span></code> for C++ code,
and <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">sys</span></code> maps on to the Pygments <code class="docutils literal"><span class="pre">console</span></code> style for
terminal sessions. The same arguments would be defined
in <code class="docutils literal"><span class="pre">.ptex2tex.cfg</span></code> or on the command line for <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code>
for how to typeset the blocks in LaTeX using
various verbatim styles (Pygments can also be used in a LaTeX
context).</p>
</div>
<div class="section" id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<p>Here is a verbatim code block with Python code (<code class="docutils literal"><span class="pre">pycod</span></code> style):</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!bc</span> pycod
def f(x, y):
    return x + y

<span class="c"># Main program</span>
from math import pi
print &#39;Testing f:&#39;, f(pi, 0)
<span class="k">!ec</span>
</pre></div>
</div>
<p>The typeset result of this block becomes</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="c"># Main program</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>
<span class="k">print</span> <span class="s">&#39;Testing f:&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">(</span><span class="n">pi</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-tip admonition">
<p class="first admonition-title">Tip</p>
<p class="last">The enclosing <code class="docutils literal"><span class="pre">!ec</span></code> tag of verbatim computer code blocks must
be followed by a newline.  A common error in list environments is to
forget to indent the plain text surrounding the code blocks. In
general, we recommend to use paragraph headings instead of list items
in combination with code blocks (it usually looks better, and some
common errors are naturally avoided).</p>
</div>
<p>And here is a C++ code snippet (<code class="docutils literal"><span class="pre">cppcod</span></code> style):</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!bc</span> cppcod
void myfunc(double* x, const double&amp; myarr) {
    for (int i = 1; i &lt; myarr.size(); i++) {
        myarr[i] = myarr[i] - x[i]*myarr[i-1]
    }
}
<span class="k">!ec</span>
</pre></div>
</div>
<p>with the rendered result</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">myfunc</span><span class="p">(</span><span class="kt">double</span><span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="k">const</span> <span class="kt">double</span><span class="o">&amp;</span> <span class="n">myarr</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">myarr</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">myarr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">myarr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">myarr</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="copying-code-from-source-files">
<h4>Copying Code from Source Files<a class="headerlink" href="#copying-code-from-source-files" title="Permalink to this headline">¶</a></h4>
<p>Computer code can be copied directly from a file, if desired. The syntax
is then</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gu">@@@CODE myfile.f</span>
<span class="gu">@@@CODE myfile.f fromto: subroutine\s+test@^C\s{5}END1</span>
</pre></div>
</div>
<p>The first line implies that all lines in the file <code class="docutils literal"><span class="pre">myfile.f</span></code> are
copied into a verbatim block, typset in a <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">Xpro</span></code> environment, where
<code class="docutils literal"><span class="pre">X</span></code> is the extension of the filename, here <code class="docutils literal"><span class="pre">f</span></code> (i.e., the environment
becomes <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">fpro</span></code> and will typically lead to some Fortran-style
formatting).  The
second line has a <code class="docutils literal"><span class="pre">fromto:</span></code> directive, which implies copying code
between two lines in the code, typset within a !`bc Xcod`
environment (again, <code class="docutils literal"><span class="pre">X</span></code> is the filename extension, implying the
type of file). Note that the <code class="docutils literal"><span class="pre">pro</span></code> and <code class="docutils literal"><span class="pre">cod</span></code> arguments are only used for LaTeX
and Sphinx output, all other formats will have the code typeset within
a plain <code class="docutils literal"><span class="pre">!bc</span></code> environment.) Two regular expressions, separated by the
<code class="docutils literal"><span class="pre">&#64;</span></code> sign, define the &#8220;from&#8221; and &#8220;to&#8221; lines.  The &#8220;from&#8221; line is
included in the verbatim block, while the &#8220;to&#8221; line is not. In the
example above, we copy code from the line matching <code class="docutils literal"><span class="pre">subroutine</span> <span class="pre">test</span></code>
(with as many blanks as desired between the two words) and the line
matching <code class="docutils literal"><span class="pre">C</span> <span class="pre">END1</span></code> (C followed by 5 blanks and then the text END1). The
final line with the &#8220;to&#8221; text is not included in the verbatim block.</p>
<p>One can also specify the code environment explictly rather than relying
on the file extension:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gu">@@@CODE somefile.py envir=X fromto: def myfunc@def yourfunc</span>
</pre></div>
</div>
<p>This is the same as writing <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">X</span></code> and copying parts of the <code class="docutils literal"><span class="pre">somefile.py</span></code>
text into the DocOnce source file, followed by <code class="docutils literal"><span class="pre">!ec</span></code>.
For example, if the lines between the <code class="docutils literal"><span class="pre">myfunc</span></code> and <code class="docutils literal"><span class="pre">yourfunc</span></code> functions
actually work as a complete Python program, one could specify <code class="docutils literal"><span class="pre">envir=pypro</span></code>
to indicate that it is a complete program that can be run as is.
By default, copying a part of a <code class="docutils literal"><span class="pre">.py</span></code> file will lead to
<code class="docutils literal"><span class="pre">!bc</span> <span class="pre">pycod</span></code>, which indicates a code snippet that normally needs
additional code to be run.</p>
<p>Using <code class="docutils literal"><span class="pre">envir=None</span></code> results in a pure include of the file, without any
surrounding code environment (i.e., no <code class="docutils literal"><span class="pre">!bc</span></code> or <code class="docutils literal"><span class="pre">!ec</span></code> directives around
the contents of the file). The section <a class="reference internal" href="#manual-mako-nomenclature"><span class="std std-ref">Example: Nomenclature functionality</span></a> shows
an example.</p>
<p>Let us demonstrate the result of copying a whole file, as
specified in the first line above:</p>
<div class="highlight-fortran"><div class="highlight"><pre><span class="n">C</span>     <span class="n">a</span> <span class="n">comment</span>

      <span class="k">subroutine </span><span class="n">test</span><span class="p">()</span>
      <span class="kt">integer </span><span class="n">i</span>
      <span class="kt">real</span><span class="o">*</span><span class="mi">8</span> <span class="n">r</span>
      <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="k">do </span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span>
         <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="n">i</span>
      <span class="k">end do</span>
<span class="k">      return</span>
<span class="n">C</span>     <span class="n">END1</span>

      <span class="k">program </span><span class="n">testme</span>
      <span class="k">call </span><span class="n">test</span><span class="p">()</span>
      <span class="k">return</span>
</pre></div>
</div>
<p>Let us then copy just a piece in the middle as indicated by the <code class="docutils literal"><span class="pre">fromto:</span></code>
directive above:</p>
<div class="highlight-fortran"><div class="highlight"><pre><span class="k">subroutine </span><span class="n">test</span><span class="p">()</span>
<span class="kt">integer </span><span class="n">i</span>
<span class="kt">real</span><span class="o">*</span><span class="mi">8</span> <span class="n">r</span>
<span class="n">r</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">do </span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span>
   <span class="n">r</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="n">i</span>
<span class="k">end do</span>
<span class="k">return</span>
</pre></div>
</div>
</div>
<div class="section" id="the-fromto-and-from-to-directives">
<h4>The <code class="docutils literal"><span class="pre">fromto</span></code> and <code class="docutils literal"><span class="pre">from-to</span></code> directives<a class="headerlink" href="#the-fromto-and-from-to-directives" title="Permalink to this headline">¶</a></h4>
<p>Note that the &#8220;to&#8221; line is never copied into the DocOnce file, but the
&#8220;from&#8221; line is. Sometimes it is convenient to also neglect the
&#8220;from&#8221; line, a feature that is allowed by replacing <code class="docutils literal"><span class="pre">fromto:</span></code> by
<code class="docutils literal"><span class="pre">from-to</span></code> (&#8220;from with minus&#8221;). This allows for copying very similar
code segments throughout a file, while still distinguishing between them.
Copying the second set of parameters from the text</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># --- Start Example 1 ---</span>
<span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">A</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">p0</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">simulate_and_plot</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">p0</span><span class="p">)</span>
<span class="c"># --- End Example 1 ---</span>

<span class="c"># --- Start Example 2 ---</span>
<span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">A</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">p0</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">simulate_and_plot</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">p0</span><span class="p">)</span>
<span class="c"># --- End Example 2 ---</span>
</pre></div>
</div>
<p>is easy with</p>
<div class="highlight-doconce"><div class="highlight"><pre>from-to: Start Example 2@End Example 2
</pre></div>
</div>
<p>With only <code class="docutils literal"><span class="pre">fromto:</span></code> this would be impossible.</p>
<p>Remark for those familiar with <code class="docutils literal"><span class="pre">ptex2tex</span></code>: The from-to
syntax is slightly different from that used in <code class="docutils literal"><span class="pre">ptex2tex</span></code>. When
transforming DocOnce to LaTeX, one first transforms the document to a
<code class="docutils literal"><span class="pre">.p.tex</span></code> file to be treated by <code class="docutils literal"><span class="pre">ptex2tex</span></code> or <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code>.
However, note that the <code class="docutils literal"><span class="pre">&#64;&#64;&#64;CODE</span></code> line
is always interpreted by DocOnce first.</p>
<p>Remark for those familiar with the <code class="docutils literal"><span class="pre">listings</span></code> package in LaTeX: the
<code class="docutils literal"><span class="pre">listing</span></code> package can copy code from files, but snippets must be
specified through exact line numbers. The <code class="docutils literal"><span class="pre">&#64;&#64;&#64;CODE</span></code> directive
above works with regular expressions which are much less sensitive
to edits of the source code file than the line numbers.
Moreover, copy of code from file works in Dococe across formats
(HTML, Sphinx, Markdown, etc.).</p>
<p>The <code class="docutils literal"><span class="pre">--code_prefix=text</span></code> option adds a path <code class="docutils literal"><span class="pre">text</span></code> to the filename specified
in the <code class="docutils literal"><span class="pre">&#64;&#64;&#64;CODE</span></code> command. For example</p>
<div class="highlight-text"><div class="highlight"><pre>@@@CODE src/myfile.py
</pre></div>
</div>
<p>and <code class="docutils literal"><span class="pre">--code_prefix=http://some.place.net</span></code>, the file</p>
<div class="highlight-text"><div class="highlight"><pre>http://some.place.net/src/myfile.py
</pre></div>
</div>
<p>will be included. If source files have a header with author, email, etc.,
one can remove this header by the option <code class="docutils literal"><span class="pre">'--code_skip_until=#</span> <span class="pre">---'</span></code>.
The lines up to and including (the first) <code class="docutils literal"><span class="pre">#</span> <span class="pre">---</span></code> will then be excluded.</p>
</div>
</div>
<div class="section" id="latex-blocks-of-mathematical-text">
<span id="mathtext"></span><h3>LaTeX Blocks of Mathematical Text<a class="headerlink" href="#latex-blocks-of-mathematical-text" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-91"></span><span class="target" id="index-92"></span><p id="index-93">Blocks of mathematical text are like computer code blocks, but
the opening tag is <code class="docutils literal"><span class="pre">!bt</span></code> (begin TeX) and the closing tag is
<code class="docutils literal"><span class="pre">!et</span></code>. It is important that <code class="docutils literal"><span class="pre">!bt</span></code> and <code class="docutils literal"><span class="pre">!et</span></code> appear on the beginning of the
line and followed by a newline.</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!bt</span>
<span class="nb">\begin{align}</span>
{\partial u\over\partial t} &amp;= \nabla^2 u + f, label{myeq1}\\
{\partial v\over\partial t} &amp;= \nabla\cdot(q(u)\nabla v) + g. label{myeq2}
<span class="nb">\end{align}</span>
<span class="k">!et</span>
</pre></div>
</div>
<div class="section" id="support-of-latex-math-in-various-output-formats">
<h4>Support of LaTeX Math in Various Output Formats<a class="headerlink" href="#support-of-latex-math-in-various-output-formats" title="Permalink to this headline">¶</a></h4>
<p>The support of LaTeX mathematics varies among the formats:</p>
<blockquote>
<div><ul class="simple">
<li>Output in LaTeX (<code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code> formats) has full
support of all LaTeX mathematics, of course.</li>
<li>The <code class="docutils literal"><span class="pre">html</span></code> format supports single equations and multiple equations
via the align environment, also with labels.</li>
<li>Markdown (<code class="docutils literal"><span class="pre">pandoc</span></code> format) allows single equations and inline mathematics,
but does not allow references to equations (the generated DocOnce code
simulates such references, however).</li>
<li>MediaWiki (<code class="docutils literal"><span class="pre">mwiki</span></code> format) does not enable labels in equations and hence
equations cannot be referred to.</li>
</ul>
</div></blockquote>
<div class="admonition-important admonition">
<p class="first admonition-title">Important</p>
<p class="last">The main conclusion is that for
output beyond LaTeX (<code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code> formats), stick to
simple <code class="docutils literal"><span class="pre">\[</span></code> and <code class="docutils literal"><span class="pre">\]</span></code> or <code class="docutils literal"><span class="pre">equation</span></code> and <code class="docutils literal"><span class="pre">align</span></code> or <code class="docutils literal"><span class="pre">align*</span></code> environments,
and avoid referring to equations in MediaWikis.</p>
</div>
<span class="target" id="index-94"></span><p id="index-95">Going from DocOnce to MS Word is most easily done by outputting in the
<code class="docutils literal"><span class="pre">latex</span></code> format and then using the <a class="reference external" href="http://johnmacfarlane.net/pandoc/">Pandoc</a> or <a class="reference external" href="http://latex2rtf.sourceforge.net/">latex2rtf</a> programs to translate from LaTeX
to MS Word. Note that only a subset of LaTeX will be translated
correctly, and mathematics is notoriously difficult and unpredicatble.</p>
<span class="target" id="index-96"></span><span class="target" id="index-97"></span></div>
<div class="section" id="epub">
<span id="index-98"></span><h4>ePub<a class="headerlink" href="#epub" title="Permalink to this headline">¶</a></h4>
<p>Conversion to ePub format can go via HTML and the <a class="reference external" href="http://calibre-ebook.com/">Calibre</a> tools. However, simple PDF and HTML with
mathematics has not been well converted to ePub by Calibre (PDF
looks strange, MathJax is not used to render formulas in HTML).
Pandoc is another program that can generate ePub (not tested).  The
ePub3 format supports mathematics via MathML.  Some dicussions of this
topic appear in <a class="reference external" href="http://tex.stackexchange.com/questions/1551/use-latex-to-produce-epub">http://tex.stackexchange.com/questions/1551/use-latex-to-produce-epub</a>. The
<a class="reference external" href="http://dlmf.nist.gov/LaTeXML/">LaTeXML</a> program can convert LaTeX
to XML and XHTML and can be a good starting point for further
conversion to ePub, but the plain <code class="docutils literal"><span class="pre">latexml</span></code> fails miserably on LaTeX
documents generated from DocOnce (the present manual to be precise).</p>
<p>What has been successfully used to convert DocOnce documents with
mathematics and code to ePub is
the <code class="docutils literal"><span class="pre">ebookmaker.py</span></code> script (use this <a class="reference external" href="https://github.com/hplgit/ebookmaker">fork</a> by the author for a version of this script that actually works).
HTML, in particular with Bootstrap styles, translates well to ePub by
this script. The script requires a JSON file describing the content of
the book. A typical file for a DocOnce document <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code> that
is translated to HTML and split into a series of files <code class="docutils literal"><span class="pre">._mydoc*.html</span></code>
goes as follows:</p>
<div class="highlight-text"><div class="highlight"><pre>{
    &quot;filename&quot; : &quot;mydoc&quot;,
    &quot;title&quot; : &quot;Title of the document&quot;,
    &quot;authors&quot; : [
        {
            &quot;name&quot; : &quot;Hans Petter Langtangen&quot;,
            &quot;sort&quot; : &quot;Langtangen, Hans Petter&quot;
        }
    ],
    &quot;rights&quot; : &quot;Public Domain&quot;,
    &quot;language&quot; : &quot;en&quot;,
    &quot;publisher&quot;: &quot;hpl&quot;,
    &quot;subjects&quot; : [ &quot;Science&quot; ],
    &quot;contributors&quot; : [
        {
            &quot;name&quot; : &quot;Hans Petter Langtangen&quot;,
            &quot;role&quot; : &quot;author&quot;
        }
    ],
    &quot;identifier&quot; : {
        &quot;scheme&quot; : &quot;URL&quot;,
        &quot;value&quot; : &quot;http://somewhere.net&quot;
    },
    &quot;contents&quot; : [
        {
            &quot;type&quot; : &quot;text&quot;,
            &quot;source&quot; : &quot;._mydoc*.html&quot;
        }
    ],
    &quot;toc&quot; : {
        &quot;depth&quot; : 2,
        &quot;parse&quot; : [ &quot;text&quot; ],
        &quot;generate&quot; : {
            &quot;title&quot; : &quot;Index&quot;
        }
    }
}
</pre></div>
</div>
<p>Just edit this file, save it as <code class="docutils literal"><span class="pre">mydoc.json</span></code> and run
<code class="docutils literal"><span class="pre">epubmaker.py</span> <span class="pre">mydoc.json</span></code> to produce <code class="docutils literal"><span class="pre">mydoc.epub</span></code>.</p>
</div>
<div class="section" id="apple-ibook-format">
<h4>Apple iBook Format<a class="headerlink" href="#apple-ibook-format" title="Permalink to this headline">¶</a></h4>
<p>A converter to iBooks would be nice. In theory, ePub documents can be
imported and converted to iBooks in the iBooks Author application, but
ePub files created by <code class="docutils literal"><span class="pre">ebookmaker.py</span></code> do not translate well.
The <code class="docutils literal"><span class="pre">.iba</span></code> files of iBooks documents can be unzipped and the
XML code for the book is available in <code class="docutils literal"><span class="pre">index.xml</span></code>. However, the XML
is undocumented and must be manipulated and filled with the contents
of a DocOnce document, e.g., by first translating DocOnce to HTML,
and then using BeautifulSoup to get an XHTML version of the HTML
that can act as a starting point for filling the XML file for an
iBook. See also other &#8220;ideas&#8221; &#8220;<a class="reference external" href="http://christian-fries.de/blog/files/2012-10-iBooks-Author-LaTeX.html">http://christian-fries.de/blog/files/2012-10-iBooks-Author-LaTeX.html</a>&#8221;.</p>
</div>
<div class="section" id="dealing-with-mathematics-in-formats-without-latex-math-support">
<h4>Dealing with Mathematics in Formats without LaTeX Math Support<a class="headerlink" href="#dealing-with-mathematics-in-formats-without-latex-math-support" title="Permalink to this headline">¶</a></h4>
<p>If the document targets formats with and without support of LaTeX
mathematics, one can use the preprocessor to typeset the mathematics
in two versions. After <code class="docutils literal"><span class="pre">#if</span> <span class="pre">FORMAT</span> <span class="pre">in</span> <span class="pre">(&quot;latex&quot;,</span> <span class="pre">&quot;pdflatex&quot;,</span> <span class="pre">&quot;html&quot;,</span>
<span class="pre">&quot;sphinx&quot;,</span> <span class="pre">&quot;mwiki&quot;,</span> <span class="pre">&quot;pandoc&quot;)</span></code> one places LaTeX mathematics, and after
<code class="docutils literal"><span class="pre">#else</span></code> one can write inline mathematics in a way that looks nice in
plain text and wiki formats without support for mathematical
typesetting. Such branching can be used with mako if-else statements
alternatively:</p>
<div class="highlight-doconce"><div class="highlight"><pre>% if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;, &quot;html&quot;, &quot;sphinx&quot;, &quot;mwiki&quot;, &quot;pandoc&quot;):
<span class="k">!bt</span>
\[ \sin^2x + \cos^2x = 1,\]
<span class="k">!et</span>
% else:
<span class="k">!bc</span>
              sin^2(x) + cos^2(x) = 1,
<span class="k">!ec</span>
% endif
</pre></div>
</div>
</div>
<div class="section" id="mathematics-for-powerpoint-openoffice">
<h4>Mathematics for PowerPoint/OpenOffice<a class="headerlink" href="#mathematics-for-powerpoint-openoffice" title="Permalink to this headline">¶</a></h4>
<p>If you have LaTeX mathematics written in DocOnce, it is fairly easy
to generate PNG images of all mathematical formulas and equations for
use with PowerPoint or OpenOffice presentations.</p>
<blockquote>
<div><ol class="arabic simple">
<li>Make a Sphinx version of the DocOnce file.</li>
<li>Go to the Sphinx directory and load the <code class="docutils literal"><span class="pre">conf.py</span></code> file into
a browser.</li>
<li>Search for &#8220;math&#8221; and comment out the
<code class="docutils literal"><span class="pre">'sphinx.ext.mathjax'</span></code> (enabled by default) and
<code class="docutils literal"><span class="pre">'matplotlib.sphinxext.mathmpl'</span></code> (disabled by default)
lines, and uncomment the <code class="docutils literal"><span class="pre">'sphinx.ext.pngmath'</span></code> package.
This is the package that generates small PNG pictures
of the mathematics.</li>
<li>Uncomment the line with <code class="docutils literal"><span class="pre">pngmath_dvipng_args</span> <span class="pre">=</span></code> and
set the PNG resolution to <code class="docutils literal"><span class="pre">-D</span> <span class="pre">200</span></code> when the purpose is to
generate mathematics pictures for slides.</li>
<li>Run <code class="docutils literal"><span class="pre">make</span> <span class="pre">html</span></code>.</li>
<li>Look at the HTML source file in the <code class="docutils literal"><span class="pre">_build/html</span></code>
directory: all mathematics are in <code class="docutils literal"><span class="pre">img</span></code> tags with <code class="docutils literal"><span class="pre">src=</span></code>
pointing to a PNG file and <code class="docutils literal"><span class="pre">alt=</span></code> pointing to the LaTeX
source for the formula in question. This makes it very
easy to find the PNG file that corresponding to a particular
mathematical expression.</li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="macros-newcommands">
<span id="newcommands"></span><h3>Macros (Newcommands)<a class="headerlink" href="#macros-newcommands" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-99"></span><span class="target" id="index-100"></span><p id="index-101">DocOnce supports a type of macros via a LaTeX-style <em>newcommand</em>
construction, but only inside mathematical expressions (inline
LaTeX math or LaTeX math blocks). Newcommands are not allowed
in the running text. Here is an example:</p>
<div class="highlight-latex"><div class="highlight"><pre><span class="k">\newcommand</span><span class="nb">{</span><span class="k">\beqa</span><span class="nb">}{</span><span class="k">\begin</span><span class="nb">{</span>eqnarray<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\eeqa</span><span class="nb">}{</span><span class="k">\end</span><span class="nb">{</span>eqnarray<span class="nb">}}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\ep</span><span class="nb">}{</span><span class="k">\thinspace</span> . <span class="nb">}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\uvec</span><span class="nb">}{</span><span class="k">\vec</span> u<span class="nb">}</span>
<span class="k">\newcommand</span><span class="nb">{</span><span class="k">\Q</span><span class="nb">}{</span><span class="k">\pmb</span><span class="nb">{</span>Q<span class="nb">}}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you desire a newcommand for the running text, using a Mako function
(written in plain Python) is much more flexible. See
the section <a class="reference internal" href="#manual-mako"><span class="std std-ref">Mako Programming</span></a>.</p>
</div>
<p>The newcommands must be defined by the standard LaTeX command
<code class="docutils literal"><span class="pre">newcommand{name}{definition}</span></code> in a separate file with name
<code class="docutils literal"><span class="pre">newcommands*.tex</span></code>. Use of <code class="docutils literal"><span class="pre">\def</span></code> is ignored. Each newcommand
definition <em>must</em> appear on a single line.</p>
<p>Newcommands in a file with name
<code class="docutils literal"><span class="pre">newcommand_replace.tex</span></code> are expanded when DocOnce is translated to
other formats, except for LaTeX (since LaTeX performs the expansion
itself).  Newcommands in files with names <code class="docutils literal"><span class="pre">newcommands.tex</span></code> and
<code class="docutils literal"><span class="pre">newcommands_keep.tex</span></code> are kept unaltered when DocOnce text is
translated to other formats, except for the Sphinx format. (Since Sphinx
understands LaTeX math, but not newcommands if the Sphinx output is
HTML, it makes most sense to expand all newcommands.)  Normally, a user
will put all newcommands that appear in math blocks surrounded by
<code class="docutils literal"><span class="pre">!bt</span></code> and <code class="docutils literal"><span class="pre">!et</span></code> in <code class="docutils literal"><span class="pre">newcommands_keep.tex</span></code> to keep them unchanged, at
least if they contribute to make the raw LaTeX math text easier to
read in the formats that cannot render LaTeX.</p>
</div>
<div class="section" id="writing-guidelines-especially-for-latex-users">
<span id="manual-latex-guide"></span><h3>Writing Guidelines (Especially for LaTeX Users!)<a class="headerlink" href="#writing-guidelines-especially-for-latex-users" title="Permalink to this headline">¶</a></h3>
<p>LaTeX writers often have their own writing habits with use of their
own favorite LaTeX packages. DocOnce is a much simpler format and
corresponds to writing in quite plain LaTeX.
Any LaTeX syntax is accepted when DocOnce translates the text to
LaTeX, but if output in the <code class="docutils literal"><span class="pre">sphinx</span></code>, <code class="docutils literal"><span class="pre">pandoc</span></code>, <code class="docutils literal"><span class="pre">mwiki</span></code>, <code class="docutils literal"><span class="pre">html</span></code>, or
<code class="docutils literal"><span class="pre">ipynb</span></code> formats is also important, one should follow the rules below.</p>
<blockquote>
<div><ul class="simple">
<li>AMS LaTeX mathematics is supported, also for the <code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">sphinx</span></code>,
and <code class="docutils literal"><span class="pre">ipynb</span></code> formats.</li>
<li>Only five equation environments can be used: <code class="docutils literal"><span class="pre">\[</span> <span class="pre">...</span> <span class="pre">\]</span></code>,
<code class="docutils literal"><span class="pre">equation*</span></code>, <code class="docutils literal"><span class="pre">equation</span></code>, <code class="docutils literal"><span class="pre">align*</span></code>, and <code class="docutils literal"><span class="pre">align</span></code>.
(DocOnce performs extensions to <code class="docutils literal"><span class="pre">sphinx</span></code>, <code class="docutils literal"><span class="pre">ipynb</span></code>,
and other formats such that
labels in <code class="docutils literal"><span class="pre">align</span></code> environments work well.)
This may feel restrictive to LaTeX writers who are used to
<code class="docutils literal"><span class="pre">split</span></code>, <code class="docutils literal"><span class="pre">aligned</span></code>, <code class="docutils literal"><span class="pre">alignat</span></code>, and other environments (rewrite to
<code class="docutils literal"><span class="pre">align</span></code> and use a number for each equation, or use <code class="docutils literal"><span class="pre">\nonumber\\</span></code>
to end intermediate calculations on multiple lines and use a label
in the last, final result).</li>
<li>Do not use comments inside equations.</li>
<li>Newcommands in mathematical formulas are allowed, but not in
the running text. Newcommands must be defined in files with names
<code class="docutils literal"><span class="pre">newcommands*.tex</span></code>. Use <code class="docutils literal"><span class="pre">\newcommands</span></code> and not <code class="docutils literal"><span class="pre">\def</span></code>.
Each newcommand must be defined on a single line.
Use Mako functions if you need macros in the running text.</li>
<li>Use labels and refer to them
for sections, figures, movies, and equations only.
MediaWiki (<code class="docutils literal"><span class="pre">mwiki</span></code>) does not support references to equations.</li>
<li>Spaces are not allowed in labels.</li>
<li>Never use <code class="docutils literal"><span class="pre">\pageref</span></code> as pages are not a concept in web documents
(there is only a <code class="docutils literal"><span class="pre">ref</span></code> command in DocOnce and it refers to labels).</li>
<li>Only figures and movies are floating elements in DocOnce, all other elements
(code, tables, algorithms) must appear <em>inline</em> without numbers or labels
for reference <a class="footnote-reference" href="#exception" id="id20">[3]</a> (refer to inline elements by a section label).
The reason is that floating elements are in general
not used in web documents, but we made an exception with figures
and movies.</li>
<li>Keep figure captions shorts as they are used as references in the
Sphinx format. Avoid inline mathematics since Sphinx will strip it
away in the figure reference.
(Many writing styles encourage rich captions that
explains everything about the figure, but this will work well
only in the HTML and LaTeX formats.)</li>
<li>You cannot use <code class="docutils literal"><span class="pre">subfigure</span></code> to combine several image files in one
figure, but you can combine the files to one file using
the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">combine_images</span></code> tool. Refer to individual image files
in the caption or text by (e.g.) &#8220;left&#8221; and &#8220;right&#8221;, or
&#8220;upper left&#8221;, &#8220;lower right&#8221;, etc.</li>
<li>Footnotes can be used as usual in LaTeX, but some HTML formats are not
able to display mathematics or inline verbatim or other formatted
code (emphasis, boldface, color) in footnotes - have that in mind.</li>
<li>Use plain <code class="docutils literal"><span class="pre">cite</span></code> for references (e.g., <code class="docutils literal"><span class="pre">\citeauthor</span></code> has no counterpart
in DocOnce). The bibliography must be prepared in the Publish format,
but import from (clean) BibTeX is possible.</li>
<li>Use <code class="docutils literal"><span class="pre">idx</span></code> for index entries, but put the definitions between paragraphs,
not inside them (required by Sphinx).</li>
<li>Use the <code class="docutils literal"><span class="pre">bm</span></code> package and the <code class="docutils literal"><span class="pre">\bm</span></code> command for boldface in mathematics.</li>
<li>Make sure all ordinary text starts in column 1 on each line. Equations
can be indented. The <code class="docutils literal"><span class="pre">\begin{}</span></code> and <code class="docutils literal"><span class="pre">\end{}</span></code> directives should start
in column 1.</li>
<li>If you depend on various LaTeX environments for your writings, you have
to give up these, or implement <em>user-defined environments</em> in DocOnce.
For instance, examples are normally typeset as subsections in DocOnce.
Learn about the exercise support in DocOnce to typeset exercises, problems,
and projects.</li>
<li>Learn about the preprocessors Preprocess and Mako - these are smart
tools for, e.g., commenting out/in large portions of text and creating
macros.</li>
<li>Use <em>generalized referenes</em> with for referring to companion documents
that may later be put together in a book.</li>
<li>Follow <a class="reference external" href="https://github.com/hplgit/setup4book-doconce">recommendations for DocOnce books</a> if you plan to write a book.</li>
</ul>
</div></blockquote>
<table class="docutils footnote" frame="void" id="exception" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id20">[3]</a></td><td>There is an exception: by using <em>user-defined environments</em>
within <code class="docutils literal"><span class="pre">!bu-name</span></code> and <code class="docutils literal"><span class="pre">!eu-name</span></code> directives, it is possible to
label any type of text and refer to it. For example, one can have
environments for examples, tables, code snippets, theorems, lemmas, etc.
One can also use Mako functions to implement enviroments.</td></tr>
</tbody>
</table>
<div class="admonition-use-the-preprocessor-to-tailor-output admonition">
<p class="first admonition-title">Use the preprocessor to tailor output</p>
<p class="last">If you really need special LaTeX constructs in the LaTeX output
from DocOnce, you may use use preprocessor if-tests on
the format (typically <code class="docutils literal"><span class="pre">#if</span> <span class="pre">FORMAT</span> <span class="pre">in</span> <span class="pre">(&quot;latex&quot;,</span> <span class="pre">&quot;pdflatex&quot;)</span></code>) to
include such special LaTeX code. With an else clause you can easily
create corresponding constructions for other formats. This way
of using Preprocess or Mako
allows advanced LaTeX features, or HTML features for the HTML formats,
and thereby fine tuning of the resulting
document. More tuning can be done by automatic editing of the
output file (e.g., <code class="docutils literal"><span class="pre">.tex</span></code> or <code class="docutils literal"><span class="pre">.html</span></code>) produced by DocOnce using
your own scripts or the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">replace</span></code> and <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">subst</span></code> commands.</p>
</div>
<div class="admonition-autotranslation-of-latex-to-doconce admonition">
<p class="first admonition-title">Autotranslation of LaTeX to DocOnce</p>
<p>The tool <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">latex2doconce</span></code> may help you translating LaTeX files
to DocOnce syntax. However, if you use computer code in floating
list environments, special packages for typesetting algorithms,
example environments, <code class="docutils literal"><span class="pre">subfigure</span></code> in figures,
or a lot of newcommands in the running text, there will be need for
a lot of manual edits and adjustments.</p>
<p>For examples, figure environments
can be translated by <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">latex2doconce</span></code> only if the label is inside
the caption and the figure is typeset like</p>
<div class="highlight-latex"><div class="highlight"><pre><span class="k">\begin</span><span class="nb">{</span>figure<span class="nb">}</span>
  <span class="k">\centering</span>
  <span class="k">\includegraphics</span><span class="na">[width=0.55\linewidth]</span><span class="nb">{</span>figs/myfig.pdf<span class="nb">}</span>
  <span class="k">\caption</span><span class="nb">{</span>This is a figure. <span class="k">\labe</span><span class="nb">{</span>myfig<span class="nb">}}</span>
<span class="k">\end</span><span class="nb">{</span>figure<span class="nb">}</span>
</pre></div>
</div>
<p>If the LaTeX is consistent with respect to placement of
the label, a simple script can autoedit the label inside the caption,
but many LaTeX writers put the label at different places in different
figures, and then it becomes more difficult to autoedit figures and
translate them to the DocOnce <code class="docutils literal"><span class="pre">FIGURE:</span></code> syntax.</p>
<p>Tables are hard to interpret and translate, because the headings and
caption can be typeset in many different ways. The type of table
that is recognized looks like</p>
<div class="highlight-latex"><div class="highlight"><pre><span class="k">\begin</span><span class="nb">{</span>table<span class="nb">}</span>
<span class="k">\caption</span><span class="nb">{</span>Here goes the caption.<span class="nb">}</span>
<span class="k">\begin</span><span class="nb">{</span>tabular<span class="nb">}{</span>lr<span class="nb">}</span>
<span class="k">\hline</span>
<span class="k">\multicolumn</span><span class="nb">{</span>1<span class="nb">}{</span>c<span class="nb">}{</span><span class="s">$</span><span class="nb">v_</span><span class="m">0</span><span class="s">$</span><span class="nb">}</span> <span class="nb">&amp;</span> <span class="k">\multicolumn</span><span class="nb">{</span>1<span class="nb">}{</span>c<span class="nb">}{</span><span class="s">$</span><span class="nb">f_R</span><span class="o">(</span><span class="nb">v_</span><span class="m">0</span><span class="o">)</span><span class="s">$</span><span class="nb">}</span><span class="k">\\</span>
<span class="k">\hline</span>
1.2 <span class="nb">&amp;</span> 4.2<span class="k">\\</span>
1.1 <span class="nb">&amp;</span> 4.0<span class="k">\\</span>
0.9 <span class="nb">&amp;</span> 3.7
<span class="k">\hline</span>
<span class="k">\end</span><span class="nb">{</span>tabular<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>table<span class="nb">}</span>
</pre></div>
</div>
<p>Recall that table captions do not make sense in DocOnce since tables
must be inlined and explained in the surrounding text.</p>
<p class="last">Footnotes are also problematic for <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">latex2doconce</span></code> since DocOnce
footnotes must have the explanation outside the paragraph where the
footnote is used. This calls for manual work. The translator from
LaTeX to DocOnce will insert <code class="docutils literal"><span class="pre">_PROBLEM_</span></code> and mark footnotes. One
solution is to avoid footnotes in the LaTeX document if fully automatic
translation is desired.</p>
</div>
</div>
<div class="section" id="typesetting-of-algorithms">
<h3>Typesetting of Algorithms<a class="headerlink" href="#typesetting-of-algorithms" title="Permalink to this headline">¶</a></h3>
<p id="index-102">DocOnce has no support for typesetting of algorithms, while LaTeX
has quite sophisticated support. LaTeX writes need some strategy with
dealing with algorithms in DocOnce: they should be sophisticated
when the output is in LaTeX and they should be readable when the
output is in other formats that have no native support for
algorithms.</p>
<p>The simplest solution is to use the preprocessor (Preprocess or Mako)
to allow different solutions for different formats.
There are basically three typesetting styles available: LaTeX
algorithm environments, pseudo code in a verbatim block, and
a nested list. A preprocessor variable, say <code class="docutils literal"><span class="pre">ALG</span></code> can be used
to select the typesetting. With Mako we can write</p>
<div class="highlight-doconce"><div class="highlight"><pre>% if ALG == &#39;latex&#39;:
<span class="c"># Write native LaTeX code for the algorithm</span>
% elif ALG == &#39;code&#39;:
<span class="c"># Write pseudo code in (e.g.) a python-like style</span>
<span class="k">!bc</span> pycode
if feature in element:
...
<span class="k">!ec</span>
% elif ALG == &#39;list&#39;:
<span class="c"># Use lists to express the algorithm</span>
  o if this element has the feature:
    * ...
% endif
</pre></div>
</div>
</div>
<div class="section" id="admonitions-1">
<h3>Admonitions<a class="headerlink" href="#admonitions-1" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-103"></span><span class="target" id="index-104"></span><span class="target" id="index-105"></span><span class="target" id="index-106"></span><span class="target" id="index-107"></span><p id="index-108">DocOnce offers strong support for admonition environments, such
as warning boxes, notification boxes, question boxes,
and summary boxes. The boxes normally have an icon, a heading,
and may also have a background color. A special box, the block,
has never any icon and can be used when an icon would be disturbing
or misleading. The variety of admonitions and their many typesetting
styles are available through a <a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/admon/index.html">demo</a>.</p>
<div class="section" id="examples-on-admonition-types">
<h4>Examples on Admonition Types<a class="headerlink" href="#examples-on-admonition-types" title="Permalink to this headline">¶</a></h4>
<p>The following admonition environments are available:
<code class="docutils literal"><span class="pre">block</span></code>, <code class="docutils literal"><span class="pre">warning</span></code>, <code class="docutils literal"><span class="pre">notice</span></code>, <code class="docutils literal"><span class="pre">question</span></code>, and <code class="docutils literal"><span class="pre">summary</span></code>.
The box is defined by begin and end tags such as <code class="docutils literal"><span class="pre">!bnotice</span></code> and <code class="docutils literal"><span class="pre">!enotice</span></code>.
The title of the box is fully customizable.</p>
<p>Here are a few examples:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!bwarning</span>
Here is a warning!
<span class="k">!ewarning</span>

<span class="k">!bnotice</span>
This is a notice box with default title.
<span class="k">!enotice</span>

<span class="k">!bnotice</span> Hint
A *Hint* or *Tip* box can use the `notice` box.
<span class="k">!enotice</span>

<span class="k">!bquestion</span>
How many admonition types are there in DocOnce?
<span class="k">!equestion</span>

<span class="k">!bblock</span> This is a block.
A block has never any icon. A block has never any icon,
but may feature a title. It is often used in slides.
<span class="k">!eblock</span>

<span class="k">!bnotice</span> Going deeper
This is text meant to provide more details. The box has the
layout of the notice box, but a custom title, here *Going deeper*.
<span class="k">!enotice</span>

Finally some summary:

<span class="k">!bsummary</span>
The main message is to utilize the admonition styles for
marking different parts of the text
<span class="k">!esummary</span>
</pre></div>
</div>
<p>The above DocOnce code is in the present format rendered as</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Here is a warning!</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is a notice box with default title.</p>
</div>
<div class="admonition-hint admonition">
<p class="first admonition-title">Hint</p>
<p class="last">A <em>Hint</em> or <em>Tip</em> box can, e.g., use the <code class="docutils literal"><span class="pre">notice</span></code> box.</p>
</div>
<div class="admonition-question admonition">
<p class="first admonition-title">Question</p>
<p class="last">How many admonition types are there in DocOnce?</p>
</div>
<div class="admonition-this-is-a-block admonition">
<p class="first admonition-title">This is a block</p>
<p class="last">A block has never any icon. A block has never any icon,
but may feature a title. It is often used in slides.</p>
</div>
<div class="admonition-going-deeper admonition">
<p class="first admonition-title">Going deeper</p>
<p class="last">This is text meant to provide more details. The box has the
layout of the notice box, but a custom title, here <em>Going deeper</em>.</p>
</div>
<p>Finally some summary:</p>
<div class="admonition-summary admonition">
<p class="first admonition-title">Summary</p>
<p class="last">The main message is to utilize the admonition styles for
marking different parts of the text</p>
</div>
<p>The layout of admonitions depend on the format.  In the <code class="docutils literal"><span class="pre">rst</span></code> and
<code class="docutils literal"><span class="pre">sphinx</span></code> formats one applies the native admonitions, but in <code class="docutils literal"><span class="pre">sphinx</span></code>
the <code class="docutils literal"><span class="pre">automake_sphinx.py</span></code> script manipulates the HTML file to set a
gray background for all admonitions.  In <code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">latex</span></code> and
<code class="docutils literal"><span class="pre">pdflatex</span></code> there is quite some functionality to control the layout of
admonitions.</p>
<span class="target" id="index-109"></span></div>
<div class="section" id="layout-of-admonitions-in-html">
<span id="index-110"></span><h4>Layout of Admonitions in HTML<a class="headerlink" href="#layout-of-admonitions-in-html" title="Permalink to this headline">¶</a></h4>
<p>The command-line argument <code class="docutils literal"><span class="pre">--html_admon</span></code> sets the admonition style
for the <code class="docutils literal"><span class="pre">html</span></code> format (see <a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/admon/index.html">demo</a>):</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">--html_admon=gray</span></code> for
icons with gray background and small font,</li>
<li><code class="docutils literal"><span class="pre">--html_admon=yellow</span></code>
and <code class="docutils literal"><span class="pre">--html_admon=apricot</span></code> are similar,
but the icons and colors are different,</li>
<li><code class="docutils literal"><span class="pre">--html_admon=colors</span></code> has quite bright colors
as backgrounds for the different admonitions,</li>
<li><code class="docutils literal"><span class="pre">--html_admon=lyx</span></code>
gives a white background and small icons,</li>
<li><code class="docutils literal"><span class="pre">--html_admon=bootstrap_alert</span></code> gives the common colored admonition
boxes associated with the Bootstrap HTML styles (only effective
if <code class="docutils literal"><span class="pre">--html_style=boots*</span></code>),</li>
<li><code class="docutils literal"><span class="pre">--html_admon=bootstrap_panel</span></code> applies the panel construction
in Bootstrap to make admonition boxes with (normally) white background
but a colored background for the title (only effective
if <code class="docutils literal"><span class="pre">--html_style=boots*</span></code>),</li>
<li><code class="docutils literal"><span class="pre">--html_admon=paragraph</span></code> results in a simple paragraph with the
admon title as heading. With <code class="docutils literal"><span class="pre">--html_admon=paragraph-X</span></code>, where <code class="docutils literal"><span class="pre">X</span></code>
is <code class="docutils literal"><span class="pre">small</span></code> or <code class="docutils literal"><span class="pre">large</span></code> (or a number less than 100 or grater than 100,
resp.). The admon text is then typeset with a small or large font.</li>
</ul>
</div></blockquote>
<p>The options <code class="docutils literal"><span class="pre">--html_admon_bg_color=...</span></code> and <code class="docutils literal"><span class="pre">--html_admon_bd_color=...</span></code>
can be used to override the default background and boundary frame colors
of the admon styles (respectively). These options have only effect
for the <code class="docutils literal"><span class="pre">apricot</span></code>, <code class="docutils literal"><span class="pre">yellow</span></code>, and <code class="docutils literal"><span class="pre">gray</span></code> styles.</p>
<p>Some recommended combinations for admonitions in HTML are</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">--html_style=bloodish</span></code>, <code class="docutils literal"><span class="pre">--html_admon=gray</span></code>, <code class="docutils literal"><span class="pre">--pygments_html_style=none</span></code> or
<code class="docutils literal"><span class="pre">--pygments_html_style=default</span></code></li>
<li><code class="docutils literal"><span class="pre">--html_style=blueish2</span></code>, <code class="docutils literal"><span class="pre">--html_admon=yellow</span></code>, <code class="docutils literal"><span class="pre">--pygments_html_style=none</span></code> or <code class="docutils literal"><span class="pre">--pygments_html_style=default</span></code></li>
<li><code class="docutils literal"><span class="pre">--html_style=boots*</span></code>, <code class="docutils literal"><span class="pre">--html_admon=bootstrap_alert</span></code> or <code class="docutils literal"><span class="pre">--html_admon=bootstrap_panel</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="layout-of-admonitions-in-latex">
<span id="index-111"></span><h4>Layout of Admonitions in LaTeX<a class="headerlink" href="#layout-of-admonitions-in-latex" title="Permalink to this headline">¶</a></h4>
<p>In <code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code>, the type of admonition style is set by
the command-line option <code class="docutils literal"><span class="pre">--latex_admon=</span></code>.
Several values are available (see <a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/admon/index.html">demo</a>):</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">paragraph</span></code> is the simplest type of admonition and typeset
as plain text with an optional paragraph heading. The variant
<code class="docutils literal"><span class="pre">paragraph-X</span></code> typesets the paragraph with font size <code class="docutils literal"><span class="pre">X</span></code>, where
<code class="docutils literal"><span class="pre">X</span></code> can be <code class="docutils literal"><span class="pre">large</span></code>, <code class="docutils literal"><span class="pre">small</span></code>, <code class="docutils literal"><span class="pre">footnotesize</span></code>, or <code class="docutils literal"><span class="pre">tiny</span></code>. With the <code class="docutils literal"><span class="pre">X</span></code>
specification there is also some small space above and below the admon.</li>
<li><code class="docutils literal"><span class="pre">colors1</span></code> (inspired by the original NumPy User Guide in LaTeX/PDF)
applies different colors for
the different admons with an embedded icon.</li>
<li><code class="docutils literal"><span class="pre">colors2</span></code> is like <code class="docutils literal"><span class="pre">colors1</span></code> but the text is wrapped around the icon.</li>
<li><code class="docutils literal"><span class="pre">mdfbox</span></code> is the default and gives rounded white boxes with a potential
title and no icon (using the very flexible <code class="docutils literal"><span class="pre">mdframed</span></code> packaged in LaTeX).</li>
<li><code class="docutils literal"><span class="pre">graybox2</span></code> has square corners, gray background, and is narrower
than <code class="docutils literal"><span class="pre">mdfbox</span></code>. One special feature of <code class="docutils literal"><span class="pre">graybox2</span></code> is the summary
admon, which has a different look with horizontal rules only,
and for A4 format, the summary box is half of the text width and
wrapped with running text around (if it does not contain verbatim text,
in that case the standard <code class="docutils literal"><span class="pre">graybox2</span></code> style is used). This small
summary box is effective in proposals to disperse small paragraphs
of key points around.</li>
<li><code class="docutils literal"><span class="pre">grayicon</span></code> has icons and a light gray background.</li>
<li><code class="docutils literal"><span class="pre">yellowicon</span></code> has icons and a light yellow background.</li>
</ul>
</div></blockquote>
<p>There is also an option <code class="docutils literal"><span class="pre">--latex_admon_color=...</span></code> that can be used
to override the default color. Values are either saturated colors
like <code class="docutils literal"><span class="pre">gray!10</span></code> or an RGB tuple <code class="docutils literal"><span class="pre">0.95,0.91,0.97</span></code>. The chosen color
replaces all default colors for all admon styles except <code class="docutils literal"><span class="pre">paragraph</span></code>.
For example, an oval gray box is produced by <code class="docutils literal"><span class="pre">--latex_admon=mdfbox</span></code>
and <code class="docutils literal"><span class="pre">'--latex_admon_color=gray!10'</span></code> (note the quotes: they are necessary
to avoid a Bash error due to the exclamation mark in the color
specification).</p>
<p>The <code class="docutils literal"><span class="pre">mdfbox</span></code> admonition styles has boxes with many possibilities for
customization by editing the <code class="docutils literal"><span class="pre">.tex</span></code> file. For example, <code class="docutils literal"><span class="pre">linecolor</span></code>
sets the color of the frame border and <code class="docutils literal"><span class="pre">frametitlebackgroundcolor</span></code>
sets the background color of the title area. A dark blue frame and
a light blue background for the title is produced by this automatic
edit:</p>
<div class="highlight-bash"><div class="highlight"><pre>doconce replace &#39;linecolor=black,&#39; &#39;linecolor=darkblue,&#39; mydoc.tex
doconce subst &#39;frametitlebackgroundcolor=.*?,&#39; &#39;frametitlebackgroundcolor=blue!5 mydoc.tex
</pre></div>
</div>
<p>Admonition titles without a period, exclamation mark, or colon at the end
will by default get a period at the end. For some LaTeX admonitions
(e.g., <code class="docutils literal"><span class="pre">mdfbox</span></code>), it may be natural to view the title with a heading
<em>without</em> any period. The command-line option <code class="docutils literal"><span class="pre">--latex_admon_title_no_period</span></code>
avoids appending a period.</p>
</div>
<div class="section" id="latex-code-environments-inside-admonitions">
<h4>LaTeX code Environments Inside Admonitions<a class="headerlink" href="#latex-code-environments-inside-admonitions" title="Permalink to this headline">¶</a></h4>
<p>Sometimes one sets a special background color in the admonitions, and
colored code blocks, which look fine in the running text, may then
have inappropriate colors inside admonitions. The option
<code class="docutils literal"><span class="pre">--latex_admon_envir_map=...</span></code> is used to map an environment (usually
for code) to a new style inside admonitions. Specifying a number,
say 2, as in <code class="docutils literal"><span class="pre">--latex_admon_envir_map=2</span></code>, appends the number
to all environments inside admonitions, so <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">pycod</span></code> becomes
effectively <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">pycod2</span></code>.
One can then in <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code> (or in the <code class="docutils literal"><span class="pre">ptex2tex</span></code> configuration
file) specify the typesetting
of the <code class="docutils literal"><span class="pre">pycod2</span></code> environment.
Otherwise the specification must be a mapping for each envir
that should be changed inside the admons:</p>
<div class="highlight-text"><div class="highlight"><pre>--latex_admon_envir_map=pycod-pycod_yellow,fpro-fpro2
</pre></div>
</div>
<p>i.e., a from-to, from-to type of syntax. In this particular example,
the <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">pycod</span></code> environment becomes <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">pycod_yellow</span></code> and
<code class="docutils literal"><span class="pre">!bc</span> <span class="pre">fpro</span></code> becomes <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">fpro2</span></code> inside admonitions.</p>
<span class="target" id="index-112"></span><span class="target" id="index-113"></span></div>
<div class="section" id="the-box-environment">
<span id="index-114"></span><h4>The Box Environment<a class="headerlink" href="#the-box-environment" title="Permalink to this headline">¶</a></h4>
<p>A plain box without any title or colored background,
just a rectangular frame, is also
available. The syntax goes like</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!bbox</span>
<span class="k">!bt</span>
\[ \nabla\cdot\boldsymbol{u} = 0  \quad\hbox{(mass balance)}\]
<span class="k">!et</span>
<span class="k">!ebox</span>
</pre></div>
</div>
<p>resulting in</p>
<div class="math">
\[\nabla\cdot\boldsymbol{u} = 0\quad\hbox{(mass balance)}\]</div>
<p>Admonitions are usually used to typeset something that should be distinct
from the running text: a warning, a remark, a notification, a question,
a summary, while a box is often used to highlight a key finding
in the running text: an equation, a hypothesis, a theorem, a
rule, or a conclusion.</p>
</div>
</div>
<div class="section" id="user-defined-environments">
<span id="manual-userdef-envir"></span><h3>User-Defined Environments<a class="headerlink" href="#user-defined-environments" title="Permalink to this headline">¶</a></h3>
<p>LaTeX writers are often fond of their favorite environments and think
that formats like DocOnce, Markdown, and HTML are primitive without
these favorite environments. DocOnce, however, offers <em>user-defined</em> environments with begin and end tags, as typical in LaTeX. This section explains
how to define such user-defined environments.</p>
<p><strong>Remark.</strong>
Special environments can always be implemented by Mako code as illustrated
in the section <a class="reference internal" href="#manual-theorem-envir"><span class="std std-ref">Example: Defining a Theorem Environment</span></a>, but the DocOnce user-defined
environments are easier to use.</p>
<p>For example, suppose you want to typeset examples using
a native <em>example</em> environment in LaTeX, while other formats can
simply typeset examples as subsections. You can
then introduce your own example
environment in DocOnce and write the environment like this:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!bu</span>-example Addition label=ex:math:1p1
We have

<span class="k">!bt</span>
\[ 1 + 1 = 2 \]
<span class="k">!et</span>
|!eu-example
</pre></div>
</div>
<p>The convention for this type of examples is to have a title,
and the title line
may feature <code class="docutils literal"><span class="pre">label=xxx</span></code>, where we can use <code class="docutils literal"><span class="pre">xxx</span></code> as a label for the
example.
The example environment above is in the <code class="docutils literal"><span class="pre">${FORMAT}</span></code> output format
typeset like this:</p>
</div>
<div class="section" id="example-1-addition">
<span id="ex-math-1p1"></span><h3>Example 1: Addition<a class="headerlink" href="#example-1-addition" title="Permalink to this headline">¶</a></h3>
<p>We have</p>
<div class="math">
\[1 + 1 = 2\]</div>
<p>The definition of the example environment must be done in a Python
module <code class="docutils literal"><span class="pre">userdef_environments</span></code>, located in the same directory as the
DocOnce source code or the parent directory.
In this file (<code class="docutils literal"><span class="pre">userdef_environments.py</span></code>),
we must provide a dictionary <code class="docutils literal"><span class="pre">envir2format</span></code> for translating an
environment into the right code for a specific format:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">envir2format</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;intro&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;latex&#39;</span><span class="p">:</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">\usepackage{amsthm}</span>
<span class="s">\theoremstyle{definition}</span>
<span class="s">\newtheorem{example}{Example}[section]</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">,},</span>
    <span class="s">&#39;example&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;latex&#39;</span><span class="p">:</span> <span class="n">example</span><span class="p">,</span>
        <span class="s">&#39;do&#39;</span><span class="p">:</span> <span class="n">do_example</span><span class="p">,</span>
        <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">intro</span></code> key contains initializing statements for the LaTeX and
HTML formats (the preamble and the <code class="docutils literal"><span class="pre">head</span></code> tag, respectively).
Here, we need the <code class="docutils literal"><span class="pre">amsthm</span></code> package and a definition of the <code class="docutils literal"><span class="pre">example</span></code>
environment in LaTeX. No initialization is needed for HTML.
The other keys are the names of the environments. For each environment,
we use a function to format the code for a specific output format.
The <code class="docutils literal"><span class="pre">do</span></code> key is a default DocOnce formatting, expressed in
DocOnce syntax and applied if the output format is not present amont
the other keys. The LaTeX output is here defined by the function
<code class="docutils literal"><span class="pre">example</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">example</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">titleline</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="n">format</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;LaTeX typesetting of example environment.&quot;&quot;&quot;</span>
    <span class="n">label</span><span class="p">,</span> <span class="n">titleline</span> <span class="o">=</span> <span class="n">get_label</span><span class="p">(</span><span class="n">titleline</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">\begin{example}</span>
<span class="s">&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">label</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;label{</span><span class="si">%s</span><span class="s">}</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">label</span>  <span class="c"># no \ (is added by DocOnce)</span>
    <span class="n">s</span> <span class="o">+=</span> <span class="s">r&quot;&quot;&quot;</span>
<span class="s">\noindent\emph{</span><span class="si">%s</span><span class="s">}.</span>

<span class="si">%s</span><span class="s"></span>
<span class="s">\end{example}</span>
<span class="s">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">titleline</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span>

<span class="k">def</span> <span class="nf">get_label</span><span class="p">(</span><span class="n">titleline</span><span class="p">):</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
    <span class="k">if</span> <span class="s">&#39;label=&#39;</span> <span class="ow">in</span> <span class="n">titleline</span><span class="p">:</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&#39;label=([^\s]+)&#39;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">titleline</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">titleline</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">titleline</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">label</span><span class="p">,</span> <span class="n">titleline</span>
</pre></div>
</div>
<p>The arguments are <code class="docutils literal"><span class="pre">text</span></code> for the body of the environment, <code class="docutils literal"><span class="pre">titleline</span></code>
for the title (everything that comes after <code class="docutils literal"><span class="pre">!bc-example</span></code> on the line),
an integer <code class="docutils literal"><span class="pre">counter</span></code> that counts the number of the current environment
(1, 2, and so on, which can be used for reference as an alternative to
the label), and the <code class="docutils literal"><span class="pre">format</span></code> string holding the user&#8217;s output format.
In the present case,
we add the label inside the example environment if we have a  label
in the title, and we typeset the title in the emphasize font.
Otherwise, we rely on the standard <code class="docutils literal"><span class="pre">example</span></code> (or <code class="docutils literal"><span class="pre">newtheorem</span></code>)
LaTeX environment.</p>
<p>In HTML and other formats, we simply typeset the example as a subsection:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">do_example</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">titleline</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="n">format</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;General typesetting of example environment via a section.&quot;&quot;&quot;</span>
    <span class="n">label</span><span class="p">,</span> <span class="n">titleline</span> <span class="o">=</span> <span class="n">get_label</span><span class="p">(</span><span class="n">titleline</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>

<span class="s">===== Example </span><span class="si">%d</span><span class="s">: </span><span class="si">%s</span><span class="s"> =====</span>
<span class="s">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="n">titleline</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">label</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;label{</span><span class="si">%s</span><span class="s">}</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">label</span>
    <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">text</span>
    <span class="k">return</span> <span class="n">s</span>
</pre></div>
</div>
<p>We quickly encounter a problem when referring to a specific example.
In LaTeX, we want to write <a href="#id21"><span class="problematic" id="id22">`</span></a>Example :ref:<a href="#id23"><span class="problematic" id="id24">`</span></a>label&#8221;, using the label
defined in the example heading. In other formats, this label is a
section number, or usually the section (example) heading. Different
wording is needed for different formats. This is easiest accomplished
by a little Mako function in the top of the DocOnce source:</p>
<div class="highlight-text"><div class="highlight"><pre>&lt;%
def refex(label, capital=False):
    if FORMAT in (&#39;latex&#39;, &#39;pdflatex&#39;):
        return &#39;Example ref{%s}&#39; % label
    else:
        s = &#39;The &#39; if capital else &#39;the &#39;
        s += &#39;example in Section ref{%s}&#39; % label
        return s
%&gt;
</pre></div>
</div>
<p>We can then write something like</p>
<div class="highlight-text"><div class="highlight"><pre>${refex(&#39;ex:test:1p1&#39;, capital=True)} demonstrates how to do 1+1.
That is, the calculation 1+1 appears in ${refex(&#39;ex:test:1p1&#39;)}.
</pre></div>
</div>
<p>Note that we distinguish between <code class="docutils literal"><span class="pre">capital=True</span></code>, which means that the
example reference opens a sentence, and <code class="docutils literal"><span class="pre">capital=False</span></code>, which refers
to a reference later in the sentence. In HTML we see the difference:</p>
<div class="highlight-text"><div class="highlight"><pre>The example in the section
&lt;a href=&quot;#ex:test:1p1&quot;&gt;Example 1: A test function&lt;/a&gt;
demonstrates how to do 1+1.
That is, the calculation 1+1 appears in the example in the section
&lt;a href=&quot;#ex:test:1p1&quot;&gt;Example 1: A test function&lt;/a&gt;.
</pre></div>
</div>
<p>while there is no difference in LaTeX since we refer to <em>Example</em> with
capital E anyway:</p>
<div class="highlight-text"><div class="highlight"><pre>Example~\ref{ex:test:1p1} demonstrates how to do 1+1.
That is, the calculation 1+1 appears in Example~\ref{ex:test:1p1}.
</pre></div>
</div>
<p>To summarize, the <em>example</em> environment together with the <code class="docutils literal"><span class="pre">refex</span></code> Mako
function allows you to work with native LaTeX example environments, while
there is a neat alternative solution for all other formats.</p>
<p>You may take a look at a complete <a class="reference external" href="https://github.com/hplgit/doconce/blob/master/doc/src/manual/userdef_environments.py">userdef_environments.py</a>
file to see this example environment and another <em>highligh</em> environment
where we define blue boxes in LaTeX and HTML and rely on a standard
notice admon for all other formats. The highlight environment is
written like</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!bu</span>-highlight Highlight box!
This environment is used to highlight something:

<span class="k">!bt</span>
\[ E = mc^2 \]
<span class="k">!et</span>
<span class="k">!eu</span>-highlight
</pre></div>
</div>
<p>and typeset (in <code class="docutils literal"><span class="pre">${FORMAT}</span></code>) as</p>
<div class="admonition-highlight-box admonition">
<p class="first admonition-title">Highlight box</p>
<p>This environment is used to highlight something:</p>
<div class="last math">
\[E = mc^2\]</div>
</div>
<div class="admonition-tip-test-userdef-environments-py admonition">
<p class="first admonition-title">Tip: Test <code class="docutils literal"><span class="pre">userdef_environments.py</span></code></p>
<p>Make sure you run the <code class="docutils literal"><span class="pre">userdef_environments.py</span></code> file to check
that all syntax is correct:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; python userdef_environments.py
</pre></div>
</div>
<p class="last">A common error is to have the <code class="docutils literal"><span class="pre">envir2format</span></code> dictionary defined
before the functions it refers to.</p>
</div>
<p>A complete example showing how one can create tailored environments
for computer code, using <code class="docutils literal"><span class="pre">--latex_code_style</span></code>,
in particular the following one (with a caption),</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="_images/userdef_code_envir.png"><img alt="_images/userdef_code_envir.png" src="_images/userdef_code_envir.png" style="width: 400px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<p>appears at the end of the document
<a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/latexcode/demo.html">Demonstration of DocOnce support for LaTeX code block environments</a>.</p>
</div>
</div>
<div class="section" id="bibliography-references">
<h2>Bibliography (References)<a class="headerlink" href="#bibliography-references" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-115"></span><span class="target" id="index-116"></span><p id="index-117">DocOnce applies the software tool <a class="reference external" href="https://bitbucket.org/logg/publish">Publish</a> to handle the bibliography in a
document. With Publish it is easy to import BibTeX data and maintain a
database in a clean, self-explanatory textual format. From the Publish
format it is easy to go BibTeX and reST or straightforward DocOnce
typesetting (and from there to HTML, plain text, wiki formats, and so
on).</p>
<p>Installing Publish is trivial: either do</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; pip install -e \
   hg+https://bitbucket.org/logg/publish#egg=publish#egg=publish
</pre></div>
</div>
<p>or checkout the code on
<a class="reference external" href="https://bitbucket.org/logg/publish">bitbucket.org</a>:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; hg clone https://bitbucket.org/logg/publish
Terminal&gt; cd publish
Terminal&gt; sudo python setup.py install
</pre></div>
</div>
<div class="section" id="importing-your-data-to-the-publish-database">
<h3>Importing your data to the Publish database<a class="headerlink" href="#importing-your-data-to-the-publish-database" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-118"></span><p id="index-119">Many scientists have their bibliographic data in the BibTex format. Here we
assume that you have two files, <code class="docutils literal"><span class="pre">refs1.bib</span></code> and <code class="docutils literal"><span class="pre">refs2.bib</span></code>. These can
be imported to a Publish database, residing in the file <code class="docutils literal"><span class="pre">papers.pub</span></code>,
by the commands</p>
<div class="highlight-text"><div class="highlight"><pre>publish import refs1.bib
publish import refs2.bib
</pre></div>
</div>
<p>During import, Publish may ask you for accepting the name of new
institutions or journals. Publish already have a database of journals
and institutions/departments, but when you add new, you also get
a file <code class="docutils literal"><span class="pre">venues.list</span></code> (in the current working directory) which will be used
for future imports in this directory. Make sure you store <code class="docutils literal"><span class="pre">publish.pub</span></code>
and <code class="docutils literal"><span class="pre">venues.list</span></code> along with your DocOnce document files (they do not
need to reside in the same directory, but make sure you add them to
your version control system).</p>
<div class="admonition-importing-big-bibtex-databases-may-imply-a-lot-of-work admonition">
<p class="first admonition-title">Importing big BibTeX databases may imply a lot of work</p>
<p class="last">If your BibTeX database does not confirm to the strict BibTeX syntax
required by Publish (entry names must be in lower case, their values
must be surrounded by curly braces), you will get error messages.
Publish will also check the names of all journals and detect duplicate
entries. For databases automatically created by some of the modern
web tools for references, the BibTeX file may need a lot of
edits before it can be accepted by Publish. Consider using a script
to automate many of the edits.</p>
</div>
</div>
<div class="section" id="requirements-to-input-data">
<h3>Requirements to input data<a class="headerlink" href="#requirements-to-input-data" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that Publish only accepts BibTeX files where the keys (author,
title, etc.) are in lower case and where the data are enclosed in
curly braces. You may need to edit your BibTeX files to meet this
demand.</p>
</div>
<p>The utility <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">fix_bibtex4publish</span> <span class="pre">file.bib</span></code> fixes several known
issues with BibTeX files such that Publish has a better chance of
accepting the entries. Run this utility first, then run Publish,
respond to any requirements that Publish spits out, remove <code class="docutils literal"><span class="pre">papers.pub</span></code>
if it exists, and run the import statements again.</p>
<p>Although references are visible as numbers only in the
output, it is recommended to have apply a nice, consistent
typesetting of your keys. It is suggested to use the following scheme:</p>
<div class="highlight-doconce"><div class="highlight"><pre>Langtangen_2003a          # single author
Langtangen_Pedersen_2002  # two authors
Langtangen_et_al_2002     # three or more authors
</pre></div>
</div>
<p>One can add a, b, c, and so forth if several keys feature the same
authors and year.</p>
</div>
<div class="section" id="adding-new-references-to-the-database">
<h3>Adding new references to the database<a class="headerlink" href="#adding-new-references-to-the-database" title="Permalink to this headline">¶</a></h3>
<p>When you get some new BibTeX references you simply put them in
a file, say <code class="docutils literal"><span class="pre">refs3.pub</span></code> and run the <code class="docutils literal"><span class="pre">publish</span> <span class="pre">import</span> <span class="pre">refs3.pub</span></code> command
to update the database. You may also consider editing the <code class="docutils literal"><span class="pre">papers.pub</span></code>
file directly when adding new references.</p>
</div>
<div class="section" id="exporting-the-database">
<h3>Exporting the database<a class="headerlink" href="#exporting-the-database" title="Permalink to this headline">¶</a></h3>
<p>Export of everything in the database to
BibTeX is done by</p>
<div class="highlight-text"><div class="highlight"><pre>publish export mybibtexfile.bib
</pre></div>
</div>
<p>You can easily export subsets of the database, e.g., only papers associated
with a particular author (the Publish manual has details on how this is
done). DocOnce will automatically export the database to BibTeX if
the output format is <code class="docutils literal"><span class="pre">latex</span></code> or <code class="docutils literal"><span class="pre">pdflatex</span></code>.</p>
</div>
<div class="section" id="referring-to-publications">
<h3>Referring to publications<a class="headerlink" href="#referring-to-publications" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-120"></span><p id="index-121">We use the command</p>
<div class="highlight-doconce"><div class="highlight"><pre>cite{key}
</pre></div>
</div>
<p>to refer to a publication with bibliographic key <code class="docutils literal"><span class="pre">key</span></code>.
Here is an example: <a class="reference internal" href="#ref3" id="id25">[Ref3]</a> discussed propagation of
large destructive water waves, <a class="reference internal" href="#ref4" id="id26">[Ref4]</a> gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in <a class="reference internal" href="#ref5" id="id27">[Ref5]</a>.
The book chapter <a class="reference internal" href="#ref6" id="id28">[Ref6]</a> contains information on
C++ software tools for programming multigrid methods. A real retro
reference is <a class="reference internal" href="#ref7" id="id29">[Ref7]</a> about a big FORTRAN package.
Multiple references are also possible, e.g., see
<a class="reference internal" href="#ref3" id="id30">[Ref3]</a> <a class="reference internal" href="#ref6" id="id31">[Ref6]</a>.</p>
<p>A LaTeX-style cite command with additional detailed reference is also possible,</p>
<div class="highlight-doconce"><div class="highlight"><pre>cite[details]{key}
</pre></div>
</div>
<p>for example as in <a class="reference internal" href="#ref4" id="id32">[Ref4]</a> (Section 2)
or <a class="reference internal" href="#ref4" id="id33">[Ref4]</a> (Equation (4.2)).</p>
<p>In LaTeX, the <code class="docutils literal"><span class="pre">cite</span></code> command is directly translated to the
corresponding LaTeX version of the command with a backslash; in reST
and Sphinx the citations becomes links, with the citation keys as
names; in HTML the citations are numbered from 1, 2, and so forth
according to their appearance, and the numbers appear as links; while
in other formats the citations are simply the keys inside square
brackets and the corresponding references are listed in the order they
are cited.</p>
</div>
<div class="section" id="specifying-the-publish-database">
<h3>Specifying the Publish database<a class="headerlink" href="#specifying-the-publish-database" title="Permalink to this headline">¶</a></h3>
<p>The specification of the Publish database file in the DocOnce document
is done one a line containing <code class="docutils literal"><span class="pre">BIBFILE:</span> <span class="pre">papers.pub</span></code> (you may give
the database file another name and store it in another directory).
The references will be inserted at the place where this command appears.
Before the command you will often want to have a headline with
<a href="#id34"><span class="problematic" id="id35">``</span></a>References&#8221;, &#8220;Bibliography&#8221;, or similar.
Here is an example:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gh">======= References =======</span>

BIBFILE: papers.pub
</pre></div>
</div>
<p>In LaTeX and pdfLaTeX the <code class="docutils literal"><span class="pre">papers.pub</span></code> file is exported to BibTeX format
and included in the document, while in all other formats, suitable
text is produced from the database.</p>
</div>
<div class="section" id="latex-bibliography-style">
<h3>LaTeX Bibliography Style<a class="headerlink" href="#latex-bibliography-style" title="Permalink to this headline">¶</a></h3>
<p id="index-122">The bibliography style is &#8220;plain&#8221; in LaTeX output. To change this, just
edit the <code class="docutils literal"><span class="pre">.p.tex</span></code> file. For example,</p>
<div class="highlight-text"><div class="highlight"><pre>doconce format latex mydoc
doconce replace &#39;bibliographystyle{plain}&#39; &#39;bibliographystyle{abbrev}&#39; mydoc.p.tex
</pre></div>
</div>
</div>
</div>
<div class="section" id="preprocessing-and-postprocessing">
<h2>Preprocessing and Postprocessing<a class="headerlink" href="#preprocessing-and-postprocessing" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-123"></span><p id="index-124">DocOnce allows preprocessor commands for, e.g., including files,
leaving out text, or inserting special text depending on the format.
These commands are run prior to translation of the document.
After translation, there are <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">split_*</span></code> commands available
for splitting HTML and Sphinx documents into smaller pieces (web pages)
as a postprocess. Each split is performed where the document writer
has inserted a <code class="docutils literal"><span class="pre">!split</span></code> command (starting in the first column of a
line and being the only text on that line):</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="c"># Split document here</span>
<span class="k">!split</span>
<span class="gh">======= New section =======</span>
</pre></div>
</div>
<div class="section" id="the-preprocess-and-mako-preprocessors">
<h3>The Preprocess and Mako Preprocessors<a class="headerlink" href="#the-preprocess-and-mako-preprocessors" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-125"></span><span class="target" id="index-126"></span><p id="index-127">Two preprocessors are supported: preprocess
(<a class="reference external" href="http://code.google.com/p/preprocess">http://code.google.com/p/preprocess</a>) and mako
(<a class="reference external" href="http://www.makotemplates.org/">http://www.makotemplates.org/</a>). The former allows include and if-else
statements much like the well-known preprocessor in C and C++ (but it
does not allow sophisticated macro substitutions). The latter
preprocessor is a very powerful template system.  With Mako you can
automatically generate various type of text and steer the generation
through Python code embedded in the DocOnce document. An arbitrary set
of <code class="docutils literal"><span class="pre">name=value</span></code> command-line arguments (at the end of the command line)
automatically define Mako variables that are substituted in the document.</p>
<p>DocOnce will detect if preprocess or Mako commands are used and run
the relevant preprocessor prior to translating the DocOnce source to a
specific format.</p>
<p>The preprocess and mako programs always have the variable <code class="docutils literal"><span class="pre">FORMAT</span></code>
defined as the desired output format of DocOnce (<code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">latex</span></code>,
<code class="docutils literal"><span class="pre">plain</span></code>, <code class="docutils literal"><span class="pre">rst</span></code>, <code class="docutils literal"><span class="pre">sphinx</span></code>, <code class="docutils literal"><span class="pre">epydoc</span></code>, <code class="docutils literal"><span class="pre">st</span></code>).  It is then easy to test on
the value of <code class="docutils literal"><span class="pre">FORMAT</span></code> and take different actions for different
formats. Below is an example:</p>
<div class="highlight-text"><div class="highlight"><pre>First some math:

!bt
\begin{align}
x &amp;= 3
label{x:eq1}\\
y &amp;= 5
label{y:eq1}
\end{align}
!et
Let us now reason about this.

# Sphinx cannot refer to labels in align environments

# #if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;, &quot;html&quot;)
From (\ref{x:eq})-(\ref{y:eq1}) we get that
# #elif FORMAT == &quot;sphinx&quot;
From
!bt
\[ x = 3 \]
!et
and
!bt
\[ y= 5 \]
!et
it follows that
# #else
From the above equations it follows that
# #endif
$x+y$ is 8.
</pre></div>
</div>
<p>A variable <code class="docutils literal"><span class="pre">DEVICE</span></code> is also defined. It equals <code class="docutils literal"><span class="pre">screen</span></code> by default,
but the command-line argument <code class="docutils literal"><span class="pre">--device=paper</span></code> can set <code class="docutils literal"><span class="pre">DEVICE</span></code> to
<code class="docutils literal"><span class="pre">paper</span></code> (or another value). Testing on <code class="docutils literal"><span class="pre">DEVICE</span></code> inside the document
makes it possible to test if the output is on paper media, a sreen,
or a particular device.</p>
<p>Other user-defined variables for the preprocessor can be set at
the command line as explained in the section <a class="reference internal" href="#doconce2formats"><span class="std std-ref">From DocOnce to Other Formats</span></a>.</p>
<p>More advanced use of mako can include Python code that may automate
the writing of parts of the document.</p>
<div class="admonition-on-the-type-of-a-mako-variable-from-the-command-line admonition">
<p class="first admonition-title">On the type of a Mako variable from the command line</p>
<p>You define Mako variables as in this example:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format html mydoc LANG=C NO=4 COMMENTS=False
</pre></div>
</div>
<p class="last">The variable <code class="docutils literal"><span class="pre">LANG</span></code> gets the value <code class="docutils literal"><span class="pre">'C'</span></code> as a Python string
inside the document. All values are treated as strings, except
if the value is <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code> or if it is an integer.
Therefore, <code class="docutils literal"><span class="pre">NO</span></code> becomes the integer <code class="docutils literal"><span class="pre">4</span></code> and you can test
like <code class="docutils literal"><span class="pre">%</span> <span class="pre">if</span> <span class="pre">NO</span> <span class="pre">&gt;</span> <span class="pre">4:</span></code>. The variable <code class="docutils literal"><span class="pre">COMMENTS</span></code> gets
the boolean value <code class="docutils literal"><span class="pre">False</span></code> and <code class="docutils literal"><span class="pre">%</span> <span class="pre">if</span> <span class="pre">not</span> <span class="pre">COMMENT:</span></code> is a positive
test. With Mako such variables set on the command-line
you can easily leave out portions
of the document or choose between different versions of the text
in a very flexible and fine-tuned way.</p>
</div>
<div class="admonition-advanced-setting-of-mako-variables admonition">
<p class="first admonition-title">Advanced setting of Mako variables</p>
<p>Mako variables can also be run through <code class="docutils literal"><span class="pre">eval</span></code> before being
sent to Mako. For example,</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format latex mydoc \
          SOMEVAR=&quot;eval([&#39;problem&#39;, &#39;data&#39;, &#39;results&#39;])&quot;
</pre></div>
</div>
<p>Now, <code class="docutils literal"><span class="pre">SOMEVAR</span></code> will be defined by</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SOMEVAR</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s">&quot;[&#39;problem&#39;, &#39;data&#39;, &#39;results&#39;]&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>and result in the list <code class="docutils literal"><span class="pre">['problem',</span> <span class="pre">'data',</span> <span class="pre">'results']</span></code>.
In a DocOnce document, we can write</p>
<div class="highlight-doconce"><div class="highlight"><pre>% for element in SOMEVAR:
 * &quot;`${element}.pdf`&quot;: &quot;http://some.net/pdf/${element}.pdf&quot;
% endfor
</pre></div>
</div>
<p>and produce the following LaTeX code:</p>
<div class="highlight-latex"><div class="highlight"><pre><span class="k">\begin</span><span class="nb">{</span>itemize<span class="nb">}</span>
 <span class="k">\item</span> <span class="k">\href</span><span class="nb">{{</span>http://some.net/pdf/problem.pdf<span class="nb">}}{</span><span class="k">\nolinkurl</span><span class="nb">{</span>problem.pdf<span class="nb">}}</span>

 <span class="k">\item</span> <span class="k">\href</span><span class="nb">{{</span>http://some.net/pdf/data.pdf<span class="nb">}}{</span><span class="k">\nolinkurl</span><span class="nb">{</span>data.pdf<span class="nb">}}</span>

 <span class="k">\item</span> <span class="k">\href</span><span class="nb">{{</span>http://some.net/pdf/results.pdf<span class="nb">}}{</span><span class="k">\nolinkurl</span><span class="nb">{</span>results.pdf<span class="nb">}}</span>
<span class="k">\end</span><span class="nb">{</span>itemize<span class="nb">}</span>
</pre></div>
</div>
<p>Instead of giving the <code class="docutils literal"><span class="pre">SOMEVAR</span></code> list on the command line, we can hardcode
it inside the document:</p>
<div class="highlight-doconce"><div class="highlight"><pre>&lt;%
SOMEVAR = [&#39;problem&#39;, &#39;data&#39;, &#39;results&#39;]
%&gt;
</pre></div>
</div>
<p class="last">The flexibility enabled by Mako variables and statements is one of the
major reasons to adopt DocOnce.</p>
</div>
</div>
<div class="section" id="splitting-documents-into-smaller-pieces">
<h3>Splitting Documents into Smaller Pieces<a class="headerlink" href="#splitting-documents-into-smaller-pieces" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-128"></span><p id="index-129">Long documents are conveniently split into smaller DocOnce files.
However, there must be a master document including all the pieces,
otherwise references to sections and the index will not work properly.
The master document is preferably a file just containing a set of
preprocessor include statements of the form <code class="docutils literal"><span class="pre">#include</span> <span class="pre">&quot;file.do.txt&quot;</span></code>.
The preprocessor will put together all the pieces so that DocOnce
sees a long file with the complete text.</p>
<p>For web documents it is often desired to split long pages into shorter
ones. This is done by the DocOnce command <code class="docutils literal"><span class="pre">!split</span></code> placed at the
beginning of a line. The <code class="docutils literal"><span class="pre">!split</span></code> commands works with output in
<code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">rst</span></code>, <code class="docutils literal"><span class="pre">sphinx</span></code>, <code class="docutils literal"><span class="pre">latex</span></code>, and <code class="docutils literal"><span class="pre">pdflatex</span></code>. The <code class="docutils literal"><span class="pre">!split</span></code> command
are normally placed before section headings. It is very actively used
when writing slides with DocOnce. The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> command does not
recognize <code class="docutils literal"><span class="pre">!split</span></code> instructions: one needs to run <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">split_*</span></code>
as a postprocess, where the <code class="docutils literal"><span class="pre">*</span></code> means <code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">rst</span></code>, or <code class="docutils literal"><span class="pre">beamer</span></code>.</p>
<p id="index-130"><strong>HTML.</strong>
Splitting an HTML document is done by</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format html mydoc
Terminal&gt; doconce split_html mydoc
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">mydoc.html</span></code> document created by the first command is replaced
by a new HTML file, representing the first part of the document,
after the second command. The various files that constitute the
parts of the document are listed after the <code class="docutils literal"><span class="pre">split_html</span></code> command.
The files have names <code class="docutils literal"><span class="pre">mydoc.html</span></code>, <code class="docutils literal"><span class="pre">._mydoc000.html</span></code> (equal to
<code class="docutils literal"><span class="pre">mydoc.html</span></code>), <code class="docutils literal"><span class="pre">._mydoc001.html</span></code>, <code class="docutils literal"><span class="pre">._mydoc002.html</span></code>, and so
on. Recall that all the parts are needed if the HTML document is to be moved
to another location (you can always check <code class="docutils literal"><span class="pre">.mydoc_html_file_collection</span></code>
for a list of all the files that are needed to display this HTML
document).</p>
<p>MathJax cannot refer to equations defined in other HTML files, but
the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">split_html</span></code> fixes this problem. Note, however, that
running <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">split_html</span></code> leads to another equation numbering
than in the original HTML document. In the latter, we use AMS
equation numbering, which means that the standard LaTeX conventions
are followed, while in the splitted document only the subset of
equations with labels are given numbers.</p>
<p>The HTML documents have by default very simple navigation buttons for
the previous and next document. These buttons are customizable:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce split_html mydoc.html --nav_buttons=X
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">X</span></code> can be <code class="docutils literal"><span class="pre">text</span></code> (pure text &#8220;Previous&#8221; and &#8220;Next&#8221;, no
buttons), <code class="docutils literal"><span class="pre">gray1</span></code>, <code class="docutils literal"><span class="pre">gray2</span></code>, <code class="docutils literal"><span class="pre">bigblue</span></code>, <code class="docutils literal"><span class="pre">blue</span></code>, or <code class="docutils literal"><span class="pre">green</span></code> as
shown here, respectively (from left to right):</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/nav_buttons.png"><img alt="_images/nav_buttons.png" src="_images/nav_buttons.png" style="width: 300px;" /></a>
</div>
<p>However, if <code class="docutils literal"><span class="pre">--html_theme=</span></code> is set any theme starting
with <code class="docutils literal"><span class="pre">bootstrap</span></code> or <code class="docutils literal"><span class="pre">bootswatch</span></code>, the navigation buttons are ignored,
and Bootstrap-style buttons are used.</p>
<span class="target" id="index-131"></span><span class="target" id="index-132"></span><p id="index-133"><strong>reStructuredText and Sphinx.</strong>
Here is a typical split of a large Sphinx document <code class="docutils literal"><span class="pre">mydoc.rst</span></code>
into smaller pieces:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format sphinx mydoc
Terminal&gt; doconce split_rst mydoc
Terminal&gt; doconce sphinx_dir author=&quot;Some Author&quot; \
          title=&quot;Short title&quot; theme=fenics dirname=mydir mydoc
Terminal&gt; python automake_sphinx.py
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">sphinx</span> <span class="pre">mydoc</span></code> command is needed to produce <code class="docutils literal"><span class="pre">mydoc.rst</span></code>,
which is the starting point for the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">split_rst</span></code> command.
The various files that constitute the complete Sphinx document are
<code class="docutils literal"><span class="pre">mydoc.rst</span></code>, <code class="docutils literal"><span class="pre">._mydoc000.rst</span></code>, <code class="docutils literal"><span class="pre">._mydoc001.rst</span></code>, <code class="docutils literal"><span class="pre">._mydoc002.rst</span></code>,
and so on. The <code class="docutils literal"><span class="pre">automake_sphinx.py</span></code> script ensures that the Sphinx document
is compiled correctly. If all links to local files are in a <code class="docutils literal"><span class="pre">_static</span></code>
directory, the whole Sphinx document exists in a complete version
in the compiled directory (usually <code class="docutils literal"><span class="pre">sphinx-rootdir/_build/html</span></code>) and
can easily be moved around.</p>
<p><strong>Split and LaTeX.</strong>
LaTeX Beamer slides generated from DocOnce source also apply <code class="docutils literal"><span class="pre">!split</span></code> to
indicate the start of individual slides. However, the split is
performed by the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">slides_beamer</span></code> command and does not result
in individual files like <code class="docutils literal"><span class="pre">split_rst</span></code> and <code class="docutils literal"><span class="pre">split_html</span></code> do.</p>
</div>
</div>
<div class="section" id="writing-slides">
<h2>Writing Slides<a class="headerlink" href="#writing-slides" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-134"></span><span class="target" id="index-135"></span><span class="target" id="index-136"></span><p id="index-137">It is a potentially fast procedure to make slides from large amounts
of DocOnce text, in particular for condensing running material for
lectures or just providing the slide set as an overview or study
guide.  The slides can either be ordinary, separate slides - or just a
document with much briefer text and emphasis on bullet lists, figures,
mathematical formulas, admonitions, and little text.</p>
<p>Points to consider (just sketches...):</p>
<blockquote>
<div><ul class="simple">
<li>Only some pygments style are suited for a particular reveal.js/deck.js
theme</li>
<li>Only some admon styles are appropriate</li>
<li>Admon styles are erased in reveal</li>
<li>Use <code class="docutils literal"><span class="pre">--keep_pygments_html_bg</span></code> to avoid big changes in background
color for code</li>
<li><code class="docutils literal"><span class="pre">|\pause|</span></code> command for pop-up in Beamer slides (ignored in other formats).</li>
<li>Can use PowerPoint or Google Presenter to design a slide and then
save as image (GP directly, PP via Save as Picture or
Save As + choosing image type,
and then all or present slide only), then import image in doconce.
LaTeX formulas in image are easiest created as PNGs using
<a class="reference external" href="http://www.codecogs.com/latex/eqneditor.php">http://www.codecogs.com/latex/eqneditor.php</a>.</li>
<li>From doconce to PP or GP: use the latexslides script to convert
to PDFs and odp format, convert odp to ppt interactively or with
<code class="docutils literal"><span class="pre">unoconv</span></code>.</li>
<li>Sections (7 <code class="docutils literal"><span class="pre">=</span></code>) are used to indicate sections in slides (gives
a toc in beamer slides), while subsections (5 <code class="docutils literal"><span class="pre">=</span></code>) are used for
slide headings. Remember <code class="docutils literal"><span class="pre">!split</span></code> before each slide (subsection).
A comment <code class="docutils literal"><span class="pre">#</span> <span class="pre">Short</span> <span class="pre">title:</span> <span class="pre">title</span></code> after a section is interpreted
in <code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">pdflatex</span></code> output as a short title for the section.</li>
</ul>
</div></blockquote>
<div class="section" id="overview-1">
<h3>Overview<a class="headerlink" href="#overview-1" title="Permalink to this headline">¶</a></h3>
<div class="section" id="slide-types">
<h4>Slide Types<a class="headerlink" href="#slide-types" title="Permalink to this headline">¶</a></h4>
<p>DocOnce can generate two types of slides: HTML5+CSS3 type of
slides to be presented through a web browser, and classical
LaTeX Beamer slides. A <a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/slides/demo/index.html">comprehensive demo</a> shows the range of possibile
layouts.</p>
<p>The following specific types of output is supported:</p>
<blockquote>
<div><ul class="simple">
<li>LaTeX:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://en.wikibooks.org/wiki/LaTeX/Presentations">Beamer slides</a></li>
</ul>
</div></blockquote>
<ul class="simple">
<li>HTML5:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://lab.hakim.se/reveal-js/#/">reveal.js</a></li>
<li><a class="reference external" href="http://imakewebthings.com/deck.js/">deck.js</a></li>
<li><a class="reference external" href="http://leaverou.github.io/CSSS/#intro">CSSS</a></li>
<li><a class="reference external" href="http://paulrouget.com/dzslides/">dzslides</a></li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Markdown:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://remarkjs.com/#1">Remark</a></li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="syntax">
<h4>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h4>
<p>Basically, DocOnce slides are ordinary DocOnce text with <code class="docutils literal"><span class="pre">!split</span></code>
inserted before each slide. Nevertheless, contents of slide differ
considerably from ordinary running text. Some guidelines on
the elements within each slide are necessary to produce effective
slide sets:</p>
<blockquote>
<div><ul class="simple">
<li>Use a section heading (7 <code class="docutils literal"><span class="pre">=</span></code>) for dividing a presentation into parts.
There can be text of figure(s) after the heading to illustrate
the part.</li>
<li>Use a subsection heading as slide heading (5 <code class="docutils literal"><span class="pre">=</span></code>).</li>
<li>Limit the amount of running text (as always).</li>
<li>Limit the amount of material so it fits within a slide
(inspect slides visually to move or delete content - just
an extra <code class="docutils literal"><span class="pre">!split</span></code> and a new heading is enough to make a new
slide).</li>
<li>Use the <code class="docutils literal"><span class="pre">pop</span></code> environment to pop up list items or blocks
one by one.</li>
<li>You can use <code class="docutils literal"><span class="pre">|\pause|</span></code> inside code or math blocks to pop up
code lines or formulas in Beamer slides (the pause command is
simply ignored in other formats).</li>
<li>Use the <code class="docutils literal"><span class="pre">slidecell</span></code> environment (see below) to create
a grid of slide cells (makes it easy to move figures and
bullet lists or text around).</li>
<li>Adjust the size of figures (<code class="docutils literal"><span class="pre">width</span></code> parameter for HTML,
<code class="docutils literal"><span class="pre">frac</span></code> parameter for LaTeX Beamer) so they become effective
on the slide.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="slide-elements">
<h3>Slide Elements<a class="headerlink" href="#slide-elements" title="Permalink to this headline">¶</a></h3>
<div class="section" id="title-page">
<span id="index-138"></span><h4>Title page<a class="headerlink" href="#title-page" title="Permalink to this headline">¶</a></h4>
<p>Here is a typical title page:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gh">TITLE: On Something Interesting</span>
<span class="gh">AUTHOR:</span> O. Nordmann at Seg. Fault Ltd. &amp; D. Bug Inc.
<span class="gh">AUTHOR:</span> John Doe Email: john.doe@mail.com at Progress Ltd.
<span class="gh">AUTHOR:</span> Chan Siu Ming at Progress Ltd &amp; Moon University
<span class="gh">DATE:</span> today

<span class="nb">FIGURE: [fig/logo, width=300 frac=0.3]</span>
</pre></div>
</div>
</div>
<div class="section" id="parts-page">
<h4>Parts Page<a class="headerlink" href="#parts-page" title="Permalink to this headline">¶</a></h4>
<p>Parts of the presentation are divided by section headings. Here
we also add some keywords in a bullet list on the left and a
figure on the right. The <code class="docutils literal"><span class="pre">!bslidecell</span> <span class="pre">XY</span> <span class="pre">f</span></code> command starts the
definition of a cell in a grid of cells in the slide. The <code class="docutils literal"><span class="pre">XY</span></code>
part defines the coordinates of the cell, <code class="docutils literal"><span class="pre">00</span></code> is upper left,
<code class="docutils literal"><span class="pre">01</span></code> is upper right. The <code class="docutils literal"><span class="pre">f</span></code> parameter specifies the fraction
of the width occupied by this column of cells (can be left out,
which results in columns of equal widths).</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!split</span>
<span class="gh">======= Problem setting and methods =======</span>
<span class="c"># Short title: Problem</span>

<span class="k">!bslidecell</span> 00 0.4

 * Scope
 * Focus
 * Approach

<span class="k">!eslidecell</span>

<span class="k">!bslidecell</span> 01 0.6
<span class="nb">FIGURE: [fig/method, width=600 frac=0.7]</span>
<span class="k">!eslidecell</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">#</span> <span class="pre">Short</span> <span class="pre">title:</span> <span class="pre">...</span></code> line can be used to define a short
title for slide formats with navigation (where long titles are
inappropriate), e.g., Beamer PDF slides.</p>
</div>
<div class="section" id="standard-bullet-list-page">
<h4>Standard bullet list page<a class="headerlink" href="#standard-bullet-list-page" title="Permalink to this headline">¶</a></h4>
<p>Bullet lists are typeset as usual in DocOnce:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!split</span>
<span class="gh">===== Methods =====</span>

 * Slow:
   * Pick-and-choose
   * Foxtrot
 * Fast:
   * Quickstep
   * MMST
   * PQR
</pre></div>
</div>
<p>Some prefer the bullet list or other contents of the slide to
appear in a frame or Beamer block (potentially with shadows in
some Beamer styles). This design is enabled by putting the
contents inside the <code class="docutils literal"><span class="pre">block</span></code> environment:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!split</span>
<span class="gh">===== Methods =====</span>

<span class="k">!bblock</span> Methods are slow or fast:
 * Slow:
   * Pick-and-choose
   * Foxtrot
 * Fast:
   * Quickstep
   * MMST
   * PQR
<span class="k">!eblock</span>
</pre></div>
</div>
<p>The block title is optional.</p>
<p>One can easily pop up one item at a time using <code class="docutils literal"><span class="pre">!bpop</span></code> and <code class="docutils literal"><span class="pre">!epop</span></code>:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!split</span>
<span class="gh">===== Methods =====</span>

<span class="k">!bblock</span> Methods are slow or fast:
<span class="k">!bpop</span>
 * Slow:
   * Pick-and-choose
   * Foxtrot
 * Fast:
   * Quickstep
   * MMST
   * PQR
<span class="k">!epop</span>
<span class="k">!eblock</span>
</pre></div>
</div>
</div>
<div class="section" id="equations-movies-figures">
<h4>Equations, movies, figures<a class="headerlink" href="#equations-movies-figures" title="Permalink to this headline">¶</a></h4>
<p>Standard DocOnce elements and formatting work in slides too:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!split</span>
<span class="gh">===== Key formulas =====</span>

<span class="k">!bt</span>
\[ a = b \]
<span class="k">!et</span>

<span class="nb">FIGURE: [fig/a_eq_b, width=500 frac=0.4]</span>

<span class="nb">MOVIE: [mov/animate_a_eq_b]</span>
</pre></div>
</div>
<p>Here is another example on math and code:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="k">!split</span>
<span class="gh">===== Example =====</span>

<span class="k">!bblock</span> Problem:
Solve $ax+b=0$.
<span class="k">!eblock</span>

<span class="k">!bblock</span> Solution:
$x=-b/a$
<span class="k">!eblock</span>

<span class="k">!bblock</span> Implementation:
<span class="k">!bc</span> pypro
import sys
a = float(sys.argv[1])
b = float(sys.argv[2])
x = -b/a
print x
<span class="k">!ec</span>
<span class="k">!eblock</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="html5-slides">
<h3>HTML5 Slides<a class="headerlink" href="#html5-slides" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-139"></span><p>Not yet written...</p>
<p>Just a very preliminary sketch of commands:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format html myslides \
          --pygments_html_style=native --keep_pygments_html_bg
Terminal&gt; doconce slides_html myslides reveal \
          --html_slide_theme=darkgray
</pre></div>
</div>
<div class="section" id="potential-problems">
<h4>Potential Problems<a class="headerlink" href="#potential-problems" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Some newer Firefox does not show rounded corners of the
admonition boxes, e.g., notice and warning (tested on Ubuntu)</li>
<li>DocOnce performs some adjustments of the spacing around
equations. More edits (automate with <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">subst</span></code>) might be needed.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="latex-beamer-slides">
<h3>LaTeX Beamer Slides<a class="headerlink" href="#latex-beamer-slides" title="Permalink to this headline">¶</a></h3>
<div class="section" id="themes-1">
<h4>Themes<a class="headerlink" href="#themes-1" title="Permalink to this headline">¶</a></h4>
<p>Four themes come with DocOnce: <code class="docutils literal"><span class="pre">X_Y</span></code>, where <code class="docutils literal"><span class="pre">X</span></code> is <code class="docutils literal"><span class="pre">blue</span></code> or <code class="docutils literal"><span class="pre">red</span></code>
(the main color of the slides) and <code class="docutils literal"><span class="pre">Y</span></code> is <a class="reference external" href="http://hplgit.github.io/teamods/doconce/demo/demo_red_plain.pdf">plain</a>
for simple layout and
<a class="reference external" href="http://hplgit.github.io/teamods/doconce/demo/demo_blue_shadow.pdf">shadow</a>
for shadowed boxes and more visual structure in the slides.</p>
</div>
<div class="section" id="pop-of-list-items-and-blocks">
<h4>Pop of list items and blocks<a class="headerlink" href="#pop-of-list-items-and-blocks" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">!bpop</span></code> and <code class="docutils literal"><span class="pre">!epop</span></code> directives have the following effect in
Beamer slides:</p>
<blockquote>
<div><ul class="simple">
<li>If <code class="docutils literal"><span class="pre">!bpop</span></code> comes right before the beginning of a list, each list
item is popped up, one at a time.</li>
<li>Otherwise, the rest of the slide, or the text until the next <code class="docutils literal"><span class="pre">!bpop</span></code>
pops up all at once.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="compilation">
<h4>Compilation<a class="headerlink" href="#compilation" title="Permalink to this headline">¶</a></h4>
<p>The cycle is</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">pdflatex</span> <span class="pre">mydoc</span></code> for producing <code class="docutils literal"><span class="pre">mydoc.p.tex</span></code></li>
<li><code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code> or <code class="docutils literal"><span class="pre">ptex2tex</span></code> for translating <code class="docutils literal"><span class="pre">mydoc.p.tex</span></code> to <code class="docutils literal"><span class="pre">mydoc.tex</span></code></li>
<li><code class="docutils literal"><span class="pre">doconce</span> <span class="pre">slides_beamer</span> <span class="pre">mydoc.tex</span></code> to produce a Beamer version <code class="docutils literal"><span class="pre">mydoc.tex</span></code></li>
<li>standard pdfLaTeX compilation of <code class="docutils literal"><span class="pre">mydoc.tex</span></code></li>
</ul>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="misc">
<h2>Misc<a class="headerlink" href="#misc" title="Permalink to this headline">¶</a></h2>
<div class="section" id="missing-features">
<h3>Missing Features<a class="headerlink" href="#missing-features" title="Permalink to this headline">¶</a></h3>
<p>DocOnce does not aim to support sophisticated typesetting, simply because
sophisticated typesetting usually depend quite strongly on the particular
output format chosen. When a particular feature needed is not supported
by DocOnce, it is recommended to hardcode that feature for a particular
format and use the if-else construction of the preprocessor. For example,
if a sophisticated table is desired in LaTeX output, do something like</p>
<div class="highlight-text"><div class="highlight"><pre># #if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;)
# insert native LaTeX code for fancy table
# #else
# insert a DocOnce-formatted &quot;inline&quot; table
# #endif
</pre></div>
</div>
<p>Similarly, if certain adjustments are needed, like
pagebreaks in LaTeX, hardcode that in the DocOnce format (and recall
that this is really LaTeX dependent - pagebreaks are not
relevant HTML formats).</p>
<p>Instead of inserting special code in the DocOnce document, one can
alternatively script editing of the output from DocOnce. That is,
we develop a Python or Bash script that runs the translation of
a DocOnce document to a ready docoment in another format. Inside this
script, we may edit and fine-tune the output from DocOnce.</p>
</div>
<div class="section" id="git-gitignore-file">
<span id="gitignore"></span><h3>Git <code class="docutils literal"><span class="pre">.gitignore</span></code> File<a class="headerlink" href="#git-gitignore-file" title="Permalink to this headline">¶</a></h3>
<p>For DocOnce repositories using the Git version control system, the
follwing <code class="docutils literal"><span class="pre">.gitignore</span></code> file is useful:</p>
<div class="highlight-text"><div class="highlight"><pre>syntax: glob
# compiled files:
*.o
*.so
*.a
# temporary files:
build
*.bak
*.swp
*~
.*~
*.old
tmp*
temp*
.#*
\#*
# tex files:
*.log
*.dvi
*.aux
*.blg
*.bbl
*.idx
*.ilg
*.ind
*.loe
*.nav
*.out
*.toc
*.snm
*.vrb
# eclipse files:
*.cproject
*.project
# misc:
.DS_Store
.idea
__pycache__
_minted-*
# doconce:
.*_html_file_collection
.*.exerinfo
.*.copyright
sphinx-rootdir
Trash
</pre></div>
</div>
</div>
<div class="section" id="emacs-doconce-formatter">
<span id="emacs-doconce"></span><h3>Emacs DocOnce Formatter<a class="headerlink" href="#emacs-doconce-formatter" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-140"></span><span class="target" id="index-141"></span><span class="target" id="index-142"></span><p id="index-143">The file <a class="reference external" href="https://github.com/hplgit/doconce/blob/master/misc/.doconce-mode.el">.doconce-mode.el</a> in the DocOnce source distribution
gives a &#8220;DocOnce Editing Mode&#8221; in Emacs.</p>
<p>Here is how to get the DocOnce Editing Mode in Emacs: Download <a class="reference external" href="https://raw.github.com/hplgit/doconce/master/misc/.doconce-mode.el">.doconce-mode.el</a> and save it in your home directory, then add these lines to <code class="docutils literal"><span class="pre">~/.emacs</span></code>:</p>
<div class="highlight-doconce"><div class="highlight"><pre>(load-file &quot;~/.doconce-mode.el&quot;)
</pre></div>
</div>
<p>Emacs will now recognize files with extension <code class="docutils literal"><span class="pre">.do.txt</span></code> and enter
the DocOnce Editing Mode.</p>
<p>The major advantage with the DocOnce Editing Mode in Emacs is that
many keyboard shortcuts are defined:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Emacs key</th>
<th class="head">Action</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Ctrl+c f</td>
<td>figure</td>
</tr>
<tr class="row-odd"><td>Ctrl+c v</td>
<td>movie/video</td>
</tr>
<tr class="row-even"><td>Ctrl+c h1</td>
<td>heading level 1 (section/h1)</td>
</tr>
<tr class="row-odd"><td>Ctrl+c h2</td>
<td>heading level 2 (subsection/h2)</td>
</tr>
<tr class="row-even"><td>Ctrl+c h3</td>
<td>heading level 2 (subsection/h3)</td>
</tr>
<tr class="row-odd"><td>Ctrl+c hp</td>
<td>heading for paragraph</td>
</tr>
<tr class="row-even"><td>Ctrl+c me</td>
<td>math environment: <code class="docutils literal"><span class="pre">!bt</span></code> equation <code class="docutils literal"><span class="pre">!et</span></code></td>
</tr>
<tr class="row-odd"><td>Ctrl+c ma</td>
<td>math environment: <code class="docutils literal"><span class="pre">!bt</span></code> align <code class="docutils literal"><span class="pre">!et</span></code></td>
</tr>
<tr class="row-even"><td>Ctrl+c ce</td>
<td>code environment: <code class="docutils literal"><span class="pre">!bc</span></code> code <code class="docutils literal"><span class="pre">!ec</span></code></td>
</tr>
<tr class="row-odd"><td>Ctrl+c cf</td>
<td>code from file: <code class="docutils literal"><span class="pre">&#64;&#64;&#64;CODE</span></code></td>
</tr>
<tr class="row-even"><td>Ctrl+c table2</td>
<td>table with 2 columns</td>
</tr>
<tr class="row-odd"><td>Ctrl+c table3</td>
<td>table with 3 columns</td>
</tr>
<tr class="row-even"><td>Ctrl+c table4</td>
<td>table with 4 columns</td>
</tr>
<tr class="row-odd"><td>Ctrl+c exer</td>
<td>exercise outline</td>
</tr>
<tr class="row-even"><td>Ctrl+c slide</td>
<td>slide outline</td>
</tr>
<tr class="row-odd"><td>Ctrl+c help</td>
<td>print this table</td>
</tr>
</tbody>
</table>
<p>Typing <code class="docutils literal"><span class="pre">Ctrl+c</span> <span class="pre">help</span></code> prints the above table in Emacs. Try out
the different shortcuts and see how handy they are in learning
DocOnce and saving much typing!</p>
</div>
</div>
<div class="section" id="mako-programming">
<span id="manual-mako"></span><h2>Mako Programming<a class="headerlink" href="#mako-programming" title="Permalink to this headline">¶</a></h2>
<p id="index-144">The <a class="reference external" href="http://docs.makotemplates.org/">Mako</a> templating engine is used
as preprocessor for DocOnce documents, but the <a class="reference external" href="http://code.google.com/p/preprocess">Preprocess</a> is run prior to Mako and is recommended for
including other files via <code class="docutils literal"><span class="pre">#</span> <span class="pre">#include</span> <span class="pre">&quot;filename&quot;</span></code>. Preprocess is also
sufficient for if-else tests to steer which parts of the text that
are to be compiled. For more demanding tasks, use Mako, which resembles
a real programming language.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Unfortunately, the combination of Mako and LaTeX mathematics may
lead to problems because Mako applies syntax like <code class="docutils literal"><span class="pre">${var}</span></code> to extract
variables or call functions, while LaTeX mathematics sometimes applies
the same syntax, e.g., <code class="docutils literal"><span class="pre">${\cal</span> <span class="pre">O}(\Delta</span> <span class="pre">x^2)$</span></code> which looks like a
Mako function call. This problem can give rise to strange error
messages from Mako, usually that a variable is not defined.
The solution is to avoid such Mako-style syntax when writing
LaTeX mathematics, e.g., by defining newcommands if it is otherwise
problematic.</p>
</div>
<div class="section" id="the-basics-of-mako">
<h3>The Basics of Mako<a class="headerlink" href="#the-basics-of-mako" title="Permalink to this headline">¶</a></h3>
<p>Just a preliminary sketch of some Mako code (next example is better!):</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="c"># Define variables</span>
&lt;%
mycounter = 1
mydict = {}
%&gt;

<span class="c"># Assume MYVAR is given on the command line as MYVAR=mytext (e.g.)</span>
% if MYVAR is not UNDEFINED:
The value of MYVAR is ${MYVAR}.
% endif

&lt;%
<span class="c">## Manipulation of variables</span>
mycounter += 1
%&gt;

% if MYVAR in (2,4,6):
MYVAR is even integer in [2,6].
% elif MYVAR &gt; 1000000:
MYVAR is big.
% else:
MYVAR=${MYVAR}, mycounter=${mycounter}.
% endif

<span class="c"># Function</span>
&lt;%
<span class="c"># Define Python function: FORMAT and DEVICE</span>
<span class="c"># are always defined</span>

def link(filename):
    url = &quot;https://github.com/some/path/to/&#39; + filename + &#39;&quot;&#39;
    if DEVICE == &#39;screen&#39;:
        # make link to url
        return &#39;&quot;filename&quot;:&#39; + url
    elif DEVICE == &#39;paper&#39;:
        # write URL explicit on paper
        return &#39;URL:&#39; + url
%&gt;

&lt;%doc&gt;
This
is
a
block
comment in Mako.
&lt;%doc/&gt;
</pre></div>
</div>
</div>
<div class="section" id="debugging-python-code-in-mako">
<span id="mako-py-debugging"></span><h3>Debugging Python code in Mako<a class="headerlink" href="#debugging-python-code-in-mako" title="Permalink to this headline">¶</a></h3>
<p>Although it is easy to put in Python code inside <code class="docutils literal"><span class="pre">&lt;%</span></code> and <code class="docutils literal"><span class="pre">%&gt;</span></code> directives,
it may quickly become a nightmare to debug the Python code. If Mako
reports a syntax error in the Python code, it is recommended to debug
the Python code outside of Mako. That is, copy all Python code to a
separate file and run it as standard Python code. This will give much
more precise (and familiar) error messages.</p>
<p>A setup that is easy for developing and maintaining the Python code
used in Mako goes as follows. Different pieces of Python code in Mako
is placed in separate files and included via the Preprocess preprocessor
in the DocOnce document. For instance,</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="c">## Define Mako variables and basic functions</span>
&lt;%
<span class="c"># #include &quot;variables.py&quot;</span>
<span class="c"># #include &quot;basic_functions.py&quot;</span>
%&gt;

Some DocOnce text ....

<span class="c">## Define more functions</span>
&lt;%
<span class="c"># #include &quot;more_functions.py&quot;</span>
%&gt;
</pre></div>
</div>
<p>Here, we have separated the Python code in Mako into three files:
<code class="docutils literal"><span class="pre">variables.py</span></code>, <code class="docutils literal"><span class="pre">basic_functions.py</span></code>, and <code class="docutils literal"><span class="pre">more_functions.py</span></code>.
With the <code class="docutils literal"><span class="pre">#</span> <span class="pre">#include</span></code> statements, Mako sees the <code class="docutils literal"><span class="pre">.py</span></code> files inserted
as text inside the <code class="docutils literal"><span class="pre">&lt;%</span></code> and <code class="docutils literal"><span class="pre">%&gt;</span></code> directives (check the file
<code class="docutils literal"><span class="pre">tmp_preprocess__mydoc.do.txt</span></code> for the result of running Preprocess and
the complete DocOnce file that Mako sees).</p>
<p>To debug the <code class="docutils literal"><span class="pre">.py</span></code> files, collect all their text in one single <code class="docutils literal"><span class="pre">.py</span></code>
file and run it. The recommended way is to use Preprocess to copy
all the text in the <code class="docutils literal"><span class="pre">.py</span></code> files into a single file, named (say) <code class="docutils literal"><span class="pre">all_code.p.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># --*-- coding: utf-8 -*-</span>
<span class="c"># (Encoding info cannot be in mako code, but required here</span>
<span class="c"># in Python code if we use non-ascii characters)</span>

<span class="c"># #include &quot;variables.py&quot;</span>
<span class="c"># #include &quot;basic_functions.py&quot;</span>
<span class="c"># #include &quot;more_functions.py&quot;</span>

<span class="c"># Test the code included above</span>
<span class="k">print</span> <span class="n">some_func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;arg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that after including the <code class="docutils literal"><span class="pre">.py</span></code> files one can insert calls to functions,
print variables, etc., as desired to debug and experiment.</p>
<p>Run Preprocess on <code class="docutils literal"><span class="pre">all_code.p.py</span></code> to produce an ordinary Python file
<code class="docutils literal"><span class="pre">all_code.py</span></code> and run that code to test and debug. A little shell script
<code class="docutils literal"><span class="pre">all_code.sh</span></code> doing both these things is convenient:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/sh</span>
preprocess all_code.p.py &gt; all_code.py
python all_code.py
</pre></div>
</div>
<p>Especially when the Python code in Mako grows and becomes non-trivial,
this setup for having the code external to the DocOnce document is
very effective.</p>
<div class="admonition-things-to-remember-when-programming-mako admonition">
<p class="first admonition-title">Things to remember when programming Mako</p>
<blockquote>
<div><ul class="simple">
<li>Do not use continuation character (backslash) in Python code.</li>
<li>When a Mako error refers to a line in the text, invoke the
file that Mako sees: <code class="docutils literal"><span class="pre">tmp_preprocess__mydoc.do.txt</span></code> if
the DocOnce file has name <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code>.</li>
<li>Use double <code class="docutils literal"><span class="pre">##</span></code> (Mako comment) to comment out Mako calls
of the form <code class="docutils literal"><span class="pre">${name...}</span></code>.</li>
</ul>
</div></blockquote>
<p class="last">And to be repeated: keep the Python code in separate files!</p>
</div>
<p>One can use Mako to extend the DocOnce syntax. Four examples are given next.</p>
</div>
<div class="section" id="example-nomenclature-functionality">
<span id="manual-mako-nomenclature"></span><h3>Example: Nomenclature functionality<a class="headerlink" href="#example-nomenclature-functionality" title="Permalink to this headline">¶</a></h3>
<p>LaTeX has a package for nomenclatures (see <a class="reference external" href="http://cs.brown.edu/about/system/managed/latex/doc/nomencl.pdf">documentation</a>) that allows a user
to issue a simple command</p>
<div class="highlight-latex"><div class="highlight"><pre><span class="k">\nomenclature</span><span class="nb">{</span>symbol<span class="nb">}{</span>definition<span class="nb">}</span>
</pre></div>
</div>
<p>to add a symbol and its definition to a nomenclature. The
command <code class="docutils literal"><span class="pre">\printglossary</span></code> inserts the nomenclature table in the document.</p>
<p>We can easily create someting similar in DocOnce with the aid of Mako.
Here are the basic ideas:</p>
<blockquote>
<div><ul class="simple">
<li>Collect the nomenclature definitions in a table in a file <code class="docutils literal"><span class="pre">.nomenclature.do.txt</span></code>.</li>
<li>Introduce a command <code class="docutils literal"><span class="pre">${insert_nomenclature()}</span></code> to make a fresh
<code class="docutils literal"><span class="pre">.nomenclature.do.txt</span></code> file and return a <code class="docutils literal"><span class="pre">&#64;&#64;&#64;CODE</span></code> command
for inserting the nomenclature table.</li>
<li>Introduce a command <code class="docutils literal"><span class="pre">${nomenclature(symbol,</span> <span class="pre">definition)}</span></code>
for adding a new line in the nomenclature table in the file.</li>
<li>Introduce a command <code class="docutils literal"><span class="pre">${end_nomenclature()}</span></code> to finish the nomenclature
table, i.e., insert the last table line.</li>
</ul>
</div></blockquote>
<p>The Mako functions are defined by</p>
<div class="highlight-doconce"><div class="highlight"><pre>&lt;%
<span class="c"># Nomenclature functionality</span>

def insert_nomenclature():
    # Make new file
    with open(&#39;.nomenclature.do.txt&#39;, &#39;w&#39;) as f:
        f.write(&quot;&quot;&quot;\
<span class="s">|---------------------------------|</span>
<span class="s">| symbol | definition             |</span>
<span class="s">|---l---------l-------------------|</span>
<span class="s">&quot;&quot;&quot;</span>)
    # Use envir=None to make plain include
    return &#39;@@@CODE .nomenclature.do.txt envir=None&#39;

def nomenclature(symbol, definition):
    with open(&#39;.nomenclature.do.txt&#39;, &#39;a&#39;) as f:
        f.write(&#39;| &#39; + symbol + &#39; | &#39; + definition + &#39; |\n&#39;)
    return &#39;&#39;

def end_nomenclature():
    with open(&#39;.nomenclature.do.txt&#39;, &#39;a&#39;) as f:
        f.write(&#39;|---------------------------------|\n&#39;)
    return &#39;&#39;
%&gt;
</pre></div>
</div>
<p>The typical application in a DocOnce document is</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gh">TITLE: ...</span>
<span class="gh">AUTHOR:</span> ...
<span class="gh">DATE:</span> today

<span class="k">!split</span>
<span class="gh">TOC:</span> on

<span class="k">!split</span>
${insert_nomenclature()}

<span class="c"># Here comes a lot of text...</span>

The equation becomes

<span class="k">!bt</span>
\[ \nabla\cdot\sigma = \varrho f,\]
<span class="k">!et</span>
where $\sigma$ is the stress tensor, $\varrho$ is the density,
and $f$ is a body force.
${nomenclature(r&#39;$\sigma$&#39;, &#39;stress tensor&#39;)}
${nomenclature(r&#39;$\varrho$&#39;, &#39;density&#39;)}
${nomenclature(r&#39;$f$&#39;, &#39;body force&#39;)}

<span class="c">## More text....</span>

<span class="c">## At the end:</span>
${end_nomenclature()}
</pre></div>
</div>
<p>Make it a habit to use raw strings <code class="docutils literal"><span class="pre">r&quot;...&quot;</span></code>
for the symbol in <code class="docutils literal"><span class="pre">${nomenclature(r&quot;...&quot;,</span> <span class="pre">....</span></code>
(sometimes backslashes enter the definition too and raw strings are
required).</p>
<p>Here is
the resulting DocOnce after mako is run (found in <code class="docutils literal"><span class="pre">tmp_mako__mydoc.do.txt</span></code> if
<code class="docutils literal"><span class="pre">mydoc.do.txt</span></code> is the file above):</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="gh">TITLE: Test</span>
<span class="gh">AUTHOR:</span> HPL
<span class="gh">DATE:</span> today

<span class="k">!split</span>
<span class="gh">TOC:</span> on

<span class="k">!split</span>
<span class="gu">@@@CODE .nomenclature.do.txt envir=None</span>

<span class="c"># Here comes a lot of text...</span>

The equation becomes

<span class="k">!bt</span>
\[ \nabla\cdot\sigma = \varrho f,\]
<span class="k">!et</span>
where $\sigma$ is the stress tensor, $\varrho$ is the density,
and $f$ is a body force.
</pre></div>
</div>
<p>The file <code class="docutils literal"><span class="pre">.nomenclature.do.txt</span></code> reads</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="s">|---------------------------------|</span>
<span class="s">| symbol | definition             |</span>
<span class="s">|---l---------l-------------------|</span>
<span class="s">| $\sigma$ | stress tensor |</span>
<span class="s">| $\varrho$ | density |</span>
<span class="s">| $f$ | body force |</span>
<span class="s">|---------------------------------|</span>
</pre></div>
</div>
</div>
<div class="section" id="example-executing-python-and-using-sympy-objects-in-latex">
<h3>Example: Executing Python and using SymPy Objects in LaTeX<a class="headerlink" href="#example-executing-python-and-using-sympy-objects-in-latex" title="Permalink to this headline">¶</a></h3>
<p>Here is an example where we want to illustrate how to calculate a
double integral. All mathematics is to be done in SymPy, and results
are supposed to be embedded in the document&#8217;s text.
We can include Python code to be executed, anywhere in the document,
and a variable <code class="docutils literal"><span class="pre">var</span></code> in the Python code is reached by <code class="docutils literal"><span class="pre">${var}</span></code>.
Here, we run SymPy and use SymPy&#8217;s LaTeX converter to make LaTeX
code out of computed SymPy expressions:</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="c"># Execute Python code</span>
&lt;%
import sympy as sm
x, y, a = sm.symbols(&#39;x y a&#39;)
f = a*x + sm.sin(y)
step1 = sm.Integral(f, x, y)
step2 = sm.Integral(sm.Integralf, x).doit(), y)
step3 = step2.doit()
%&gt;

<span class="c"># Make use of results in the above block when writing LaTeX math</span>
<span class="k">!bt</span>
<span class="nb">\begin{align*}</span>
${sm.latex(step1)} &amp;= ${sm.latex(step2)}\\
&amp;= ${sm.latex(step3)}
<span class="nb">\end{align*}</span>
<span class="k">!et</span>
</pre></div>
</div>
<p>The result of the LaTeX block above, after Mako is run, becomes</p>
<div class="highlight-latex"><div class="highlight"><pre><span class="k">\begin</span><span class="nb">{</span>align*<span class="nb">}</span>
<span class="k">\iint</span> a x + y<span class="nb">^{</span>2<span class="nb">}</span> <span class="k">\sin</span><span class="nb">{</span><span class="k">\left</span> (y <span class="k">\right</span> )<span class="nb">}</span><span class="k">\,</span> dx<span class="k">\,</span> dy <span class="nb">&amp;</span>=
<span class="k">\int</span> <span class="k">\frac</span><span class="nb">{</span>a x<span class="nb">^{</span>2<span class="nb">}}{</span>2<span class="nb">}</span> + x y<span class="nb">^{</span>2<span class="nb">}</span> <span class="k">\sin</span><span class="nb">{</span><span class="k">\left</span> (y <span class="k">\right</span> )<span class="nb">}</span><span class="k">\,</span> dy<span class="k">\\</span>
<span class="nb">&amp;</span>= <span class="k">\frac</span><span class="nb">{</span>a y<span class="nb">}{</span>2<span class="nb">}</span> x<span class="nb">^{</span>2<span class="nb">}</span> + x <span class="k">\left</span>(- y<span class="nb">^{</span>2<span class="nb">}</span> <span class="k">\cos</span><span class="nb">{</span><span class="k">\left</span> (y <span class="k">\right</span> )<span class="nb">}</span> +
2 y <span class="k">\sin</span><span class="nb">{</span><span class="k">\left</span> (y <span class="k">\right</span> )<span class="nb">}</span> + 2 <span class="k">\cos</span><span class="nb">{</span><span class="k">\left</span> (y <span class="k">\right</span> )<span class="nb">}</span><span class="k">\right</span>)
<span class="k">\end</span><span class="nb">{</span>align*<span class="nb">}</span>
</pre></div>
</div>
<p>Debugging Python code in Mako is less convenient than debugging Python
files directly, so one may prefer to just include the Python code
that Mako is supposed to run by</p>
<div class="highlight-text"><div class="highlight"><pre>&lt;%
# #include &quot;src/ex1.py&quot;
%&gt;
</pre></div>
</div>
<p>This is the recommended way to make use of SymPy
to automate the mathematical derivations: first develop and test
the SymPy code files, include the files in the document inside
Mako&#8217;s Python code environment.</p>
<p><strong>Remark.</strong>
Executing Python code inside the DocOnce document is
closely related to <em>literate programming</em>. Tools supporting
creating a document while running a Python programming cover
<a class="reference external" href="http://mpastell.com/pweave/">Pweave</a>,
<a class="reference external" href="https://github.com/stdbrouw/python-literate">Python literate</a>,
<a class="reference external" href="http://pywebtool.sourceforge.net/">PyWebTool</a>,
<a class="reference external" href="http://pythonhosted.org/antiweb/index.html">Antiweb</a>,
<a class="reference external" href="http://en.literateprograms.org/Literate_Programming_(Python)">Literate Programming in Python</a>,
<a class="reference external" href="http://gael-varoquaux.info/computers/pyreport/">Pyreport</a>,
and also IPython notebooks.</p>
</div>
<div class="section" id="example-extending-tables-to-handle-figures">
<span id="manual-tables-wfigs"></span><h3>Example: Extending Tables to Handle Figures<a class="headerlink" href="#example-extending-tables-to-handle-figures" title="Permalink to this headline">¶</a></h3>
<p>DocOnce tables cannot contain figures, since figures must appear on
a single line with the special syntax <code class="docutils literal"><span class="pre">FIGURE:</span> <span class="pre">[file,</span> <span class="pre">...]</span></code>.
What if you want a table of thumbnail figures with hyperlinks?</p>
<div class="section" id="solution-for-latex-and-html">
<h4>Solution for LaTeX and HTML<a class="headerlink" href="#solution-for-latex-and-html" title="Permalink to this headline">¶</a></h4>
<p>We first restrict the attention to LaTeX and HTML. In those cases
we can create an ordinary table and insert a call to a Mako
function in cells in the table to return the proper LaTeX or
HTML code for displaying a figure.</p>
<p>The Mako call syntax in a cell is decided to be
<code class="docutils literal"><span class="pre">${tfig('080')}</span></code>, which insert the figure <code class="docutils literal"><span class="pre">mov/wave_frames/frame_0080.png</span></code>.
A 3x3 table of figures then look like</p>
<div class="highlight-doconce"><div class="highlight"><pre><span class="s">|-------------------------------------------------|</span>
<span class="s">|               |                |                |</span>
<span class="s">|-------c---------------c----------------c--------|</span>
<span class="s">|${tfig(&#39;080&#39;)} | ${tfig(&#39;085&#39;)} | ${tfig(&#39;090&#39;)} |</span>
<span class="s">|${tfig(&#39;095&#39;)} | ${tfig(&#39;100&#39;)} | ${tfig(&#39;105&#39;)} |</span>
<span class="s">|${tfig(&#39;110&#39;)} | ${tfig(&#39;115&#39;)} | ${tfig(&#39;120&#39;)} |</span>
<span class="s">|-------------------------------------------------|</span>
</pre></div>
</div>
<p>We do not want a heading, just a grid of figures, but a heading is
required in DocOnce figures, so the solution is to provide
empty column names in the heading. This solution
gives acceptable results in HTML and LaTeX.</p>
<p>The Mako function can be a plain Python function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">&lt;%</span>
<span class="k">def</span> <span class="nf">tfig</span><span class="p">(</span><span class="n">fileno</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="s">&#39;mov/wave_frames/frame_0&#39;</span> <span class="o">+</span> <span class="n">fileno</span> <span class="o">+</span> <span class="s">&#39;.png&#39;</span>  <span class="c"># path</span>
    <span class="k">if</span> <span class="n">FORMAT</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;latex&quot;</span><span class="p">,</span> <span class="s">&quot;pdflatex&quot;</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s">r&#39;\includegraphics[width=2cm]{</span><span class="si">%s</span><span class="s">}&#39;</span> <span class="o">%</span> <span class="n">p</span>
    <span class="k">elif</span> <span class="n">FORMAT</span> <span class="o">==</span> <span class="s">&quot;html&quot;</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s">&#39;&lt;a href=&quot;</span><span class="si">%s</span><span class="s">&quot;&gt;&lt;img src=&quot;</span><span class="si">%s</span><span class="s">&quot; width=&quot;300&quot;&gt;&lt;/a&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s">&#39;&quot;`</span><span class="si">%s</span><span class="s">`&quot;: &quot;</span><span class="si">%s</span><span class="s">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileno</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>  <span class="c"># plain link</span>
    <span class="k">return</span> <span class="n">text</span>
<span class="o">%&gt;</span>
</pre></div>
</div>
<p>Note that for other formats than LaTeX and HTML we just return a link to
the figure.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A corresponding solution
for Sphinx will not work because inline figures in Sphinx has
a syntax with pipe symbols (&#8216;|&#8217;) that interfer with the
column separator in tables in DocOnce. Returning the HTML
code in case of Sphinx will just display that HTML code
in the cells, not the rendered HTML code. A solution that
includes Sphinx is provided later.</p>
</div>
<p>The resulting table is displayed below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&nbsp;</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="mov/wave_frames/frame_0085.png">085</a></td>
<td><a class="reference external" href="mov/wave_frames/frame_0090.png">090</a></td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="mov/wave_frames/frame_0100.png">100</a></td>
<td><a class="reference external" href="mov/wave_frames/frame_0105.png">105</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="mov/wave_frames/frame_0115.png">115</a></td>
<td><a class="reference external" href="mov/wave_frames/frame_0120.png">120</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="generating-the-entire-table">
<h4>Generating the Entire Table<a class="headerlink" href="#generating-the-entire-table" title="Permalink to this headline">¶</a></h4>
<p>The specific structure of this table also suggest using Mako
to generate the entire table:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;%
def generate_table(start, end, step, no_of_columns):
    # Heading
    text = &#39;&#39;
    horizontal_rule = &#39;|----|\n&#39;
    text += horizontal_rule
    text += &#39;|  &#39;*no_of_columns + &#39;|\n&#39;
    text += horizontal_rule
    fig_counter = 0
    for counter in range(start, end+1, step):
        fig_counter += 1
        text += &#39;| &#39; + tfig(&#39;%03d&#39; % counter) + &#39; &#39;
        if fig_counter % no_of_columns == 0:
            text += &#39;|\n&#39;
    text += horizontal_rule
    return text
%&gt;

${generate_table(80, 120, 5, 3)}
</pre></div>
</div>
<p>The result is a table like the one above, except that the horizontal rules
and the heading are very short lines (but this is legal syntax -
it just does not look appealing in the DocOnce source).</p>
</div>
<div class="section" id="generating-the-entire-table-in-a-native-format-via-mako">
<h4>Generating the Entire Table in a Native Format via Mako<a class="headerlink" href="#generating-the-entire-table-in-a-native-format-via-mako" title="Permalink to this headline">¶</a></h4>
<p>To allow Sphinx and other formats, it is best to generate the entire
table. This can be done either by a Mako function or as a post
process after DocOnce has created the output file. We show the Mako
solution here.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title">Tip</p>
<p class="last">A pure Python function Mako is easiest to develop in a seperate
Python program file because Python has better error messages
than Mako. Also, Python has debugging facilities that make the
development of the code much more efficient than writing in Mako.
When the Python function works, it can be inserted in the DocOnce
file inside the Mako directives <code class="docutils literal"><span class="pre">&lt;%</span></code> and <code class="docutils literal"><span class="pre">%&gt;</span></code>.</p>
</div>
<p>The Mako function for generating the entire table in LaTeX, HTML,
and Sphinx format goes as follows.</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;%
def generate_native_table(start, end, step, no_of_columns):
    text = &#39;&#39;
    # Heading
    if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;):
        text += r&quot;&quot;&quot;\begin{quote}\begin{tabular}{%s}
\hline
 \\
\hline
&quot;&quot;&quot; % (&#39;c&#39;*no_of_columns)
    elif FORMAT in (&quot;sphinx&quot;, &quot;rst&quot;, &quot;html&quot;):
        text += &#39;&lt;p&gt;&lt;table border=&quot;1&quot;&gt;\n&lt;tr&gt;&#39;
    fig_counter = 0
    latex_columns = []
    for counter in range(start, end+1, step):
        fig_counter += 1
        if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;):
            latex_columns.append(r&#39;\includegraphics[width=2cm]&#39;\
                    &#39;{mov/wave_frames/frame_%04d.png}\n&#39; % counter)
        elif FORMAT in (&quot;sphinx&quot;, &quot;rst&quot;, &quot;html&quot;):
            text += &#39;&lt;td align=&quot;center&quot;&gt; &#39;\
            &#39;&lt;a href=&quot;mov/wave_frames/frame_%04d.png&quot;&gt;&#39;\
            &#39;&lt;img src=&quot;mov/wave_frames/frame_%04d.png&quot; width=&quot;300&quot;&gt;&#39;\
            &#39;&lt;/a&gt; &lt;/td&gt;\n&#39; % (counter, counter)

        if fig_counter % no_of_columns == 0:  # new row
            if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;):
                text += &#39;   &#39; + &#39; &amp; &#39;.join(latex_columns)
                if counter != end:
                    text += r&#39;\\&#39; + &#39;\n&#39;
                latex_columns = []
            elif FORMAT in (&quot;sphinx&quot;, &quot;rst&quot;, &quot;html&quot;):
                text += &#39;&lt;/tr&gt;\n&#39;
                if counter != end:
                    text += &#39;&lt;tr&gt;\n&#39;  # begin new row
    # Footer
    if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;):
        text += r&quot;&quot;&quot;\hline
\end{tabular}\end{quote}
&quot;&quot;&quot;
    elif FORMAT in (&quot;sphinx&quot;, &quot;rst&quot;, &quot;html&quot;):
        text += &#39;&lt;/table&gt;\n&#39;
    if FORMAT in (&quot;sphinx&quot;, &quot;rst&quot;):
        # Wrap raw HTML code
        lines = text.splitlines()
        text = &#39;\n.. raw:: html\n\n&#39;
        for line in lines:
            text += &#39;    &#39; + line + &#39;\n&#39;
        text += &#39;\n&#39;
    return text
%&gt;

## Example on call in DocOnce source
${generate_native_table(80, 120, 5, 3)}
</pre></div>
</div>
<p>One can easily add support for various other formats, such as <code class="docutils literal"><span class="pre">pandoc</span></code>,
<code class="docutils literal"><span class="pre">gwiki</span></code>, <code class="docutils literal"><span class="pre">mwiki</span></code>, etc.
The output in the current format is shown below.</p>
<p><table border="1">
<tr><td align="center"> <a href="mov/wave_frames/frame_0080.png"><img src="_static/mov/wave_frames/frame_0080.png" width="300"></a> </td>
<td align="center"> <a href="mov/wave_frames/frame_0085.png"><img src="_static/mov/wave_frames/frame_0085.png" width="300"></a> </td>
<td align="center"> <a href="mov/wave_frames/frame_0090.png"><img src="_static/mov/wave_frames/frame_0090.png" width="300"></a> </td>
</tr>
<tr>
<td align="center"> <a href="mov/wave_frames/frame_0095.png"><img src="_static/mov/wave_frames/frame_0095.png" width="300"></a> </td>
<td align="center"> <a href="mov/wave_frames/frame_0100.png"><img src="_static/mov/wave_frames/frame_0100.png" width="300"></a> </td>
<td align="center"> <a href="mov/wave_frames/frame_0105.png"><img src="_static/mov/wave_frames/frame_0105.png" width="300"></a> </td>
</tr>
<tr>
<td align="center"> <a href="mov/wave_frames/frame_0110.png"><img src="_static/mov/wave_frames/frame_0110.png" width="300"></a> </td>
<td align="center"> <a href="mov/wave_frames/frame_0115.png"><img src="_static/mov/wave_frames/frame_0115.png" width="300"></a> </td>
<td align="center"> <a href="mov/wave_frames/frame_0120.png"><img src="_static/mov/wave_frames/frame_0120.png" width="300"></a> </td>
</tr>
</table></div>
<div class="section" id="generating-the-entire-table-in-a-native-format-as-a-post-process">
<h4>Generating the Entire Table in a Native Format as a Post Process<a class="headerlink" href="#generating-the-entire-table-in-a-native-format-as-a-post-process" title="Permalink to this headline">¶</a></h4>
<p>Instead of using Mako as shown above, we can invent our own syntax line
for the table with figures and apply a script to the DocOnce output file
to replace the special line with proper native code.
We use the same <code class="docutils literal"><span class="pre">generate_native_table</span></code> function as above, but this
time in a Python script. In the DocOnce source we place a line</p>
<div class="highlight-doconce"><div class="highlight"><pre>@@@FIGTABLE 80 120 5 3
</pre></div>
</div>
<p>which is meant to generate a table with figures where the numbers
correspond to arguments in the <code class="docutils literal"><span class="pre">generative_native_table</span></code> function.</p>
<p>Suppose we have run</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format sphinx mydoc
</pre></div>
</div>
<p>In the resulting <code class="docutils literal"><span class="pre">mydoc.rst</span></code> file we have the magic line <code class="docutils literal"><span class="pre">&#64;&#64;&#64;FIGTABLE</span> <span class="pre">...</span></code>.
Such lines can now be processed in our Python script:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># read mydoc.rst into the string filestr</span>
<span class="n">pattern</span> <span class="o">=</span> <span class="s">r&#39;@@@FIGTABLE (.+)&#39;</span>
<span class="k">def</span> <span class="nf">replacement</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
    <span class="c"># m is a MatchObject</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="c"># Convert args to a tuple of words with right type</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="nb">eval</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">generate_native_table</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>

<span class="n">filestr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">filestr</span><span class="p">,</span> <span class="n">replacement</span><span class="p">)</span>
<span class="c"># write filestr back to manual.rst</span>
</pre></div>
</div>
<p>This code makes use of a function for creating the replacement string
for the <code class="docutils literal"><span class="pre">re.sub</span></code> command and demands a knowledge of regular expression
syntax and the workings or <code class="docutils literal"><span class="pre">re.sub</span></code>. A more plain Python version
goes like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># read mydoc.rst into the string filestr</span>
<span class="n">lines</span> <span class="o">=</span> <span class="n">filestr</span><span class="o">.</span><span class="n">splitsplines</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)):</span>
    <span class="k">if</span> <span class="n">lines</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;@@@FIGTABLE&#39;</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">10</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="c"># Convert args to a tuple of words with right type</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="nb">eval</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">generate_native_table</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="n">lines</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">text</span>
<span class="n">filestr</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>  <span class="c"># make one string from all separate lines</span>
<span class="c"># write filestr back to manual.rst</span>
</pre></div>
</div>
<div class="admonition-recommendation admonition">
<p class="first admonition-title">Recommendation</p>
<p class="last">This latter way of inserting specialized native text after DocOnce
has generated the output file is easier than using Mako and usually
also safer.</p>
</div>
<div class="admonition-lesson-learned admonition">
<p class="first admonition-title">Lesson Learned</p>
<p class="last">The above examples show different techniques for extending the
DocOnce capabilities. The ideas are not restricted to DocOnce: using
Mako as a preprocessing step or inserting &#8220;magic&#8221; lines that you
can later substitute by a script is possible in all types of
ASCII-based documents, e.g., LaTeX, Sphinx, and Markdown.</p>
</div>
</div>
</div>
<div class="section" id="example-defining-a-theorem-environment">
<span id="manual-theorem-envir"></span><h3>Example: Defining a Theorem Environment<a class="headerlink" href="#example-defining-a-theorem-environment" title="Permalink to this headline">¶</a></h3>
<p>DocOnce supports only basic formatting elements (headings, paragraphs,
lists, etc.), while LaTeX users are used to fancy environments for, e.g.,
theorems. A flexible strategy is to typeset theorems
using paragraph headings, which will look satisfactorily in all
formats, but add comment lines that can be replaced by LaTeX environments
via <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">replace</span></code>. Theorems can be numbered using a variable in Mako.
Here is an example on raw DocOnce code:</p>
<div class="highlight-doconce"><div class="highlight"><pre>&lt;%
theorem_counter = 4
%&gt;

<span class="c"># begin theorem</span>
<span class="nb">label{theorem:fundamental1}</span>
&lt;%
theorem_counter += 1
theorem_fundamental1 = theorem_counter
%&gt;

<span class="gu">__Theorem ${theorem_counter}.__</span>
Let $a=1$ and $b=2$. Then $c=3$.
<span class="c"># end theorem</span>

<span class="c"># begin proof</span>
<span class="gu">__Proof.__</span>
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$|$END$
<span class="c"># end proof</span>

As we see, the proof of Theorem ${theorem_counter} is a modest
achievement.
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">.p.tex</span></code> output file now reads</p>
<div class="highlight-doconce"><div class="highlight"><pre>% begin theorem
<span class="nb">label{theorem:fundamental1}</span>


\paragraph{Theorem 5.}
Let $a=1$ and $b=2$. Then $c=3$.
% end theorem

% begin proof
\paragraph{Proof.}
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
% end proof

As we see, the proof of Theorem 5 is a modest
achievement.
</pre></div>
</div>
<p>Note that with Mako variables we can easily create our own counters,
and this works in any format. In LaTeX we can use both the generated
numbers from Mako variables or we can use the labels.</p>
<p>The next step is to replace the <code class="docutils literal"><span class="pre">%</span> <span class="pre">begin</span> <span class="pre">...</span></code> and <code class="docutils literal"><span class="pre">%</span> <span class="pre">end</span> <span class="pre">...</span></code> lines with
the proper LaTeX expressions in the <code class="docutils literal"><span class="pre">.p.tex</span></code> file. Moreover, we
need to remove the paragraphs with <em>Theorem</em>.
The following Bash script does the job:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">file</span><span class="o">=</span>mydoc.p.tex
<span class="nv">thpack</span><span class="o">=</span><span class="s1">&#39;\\usepackage{theorem}\n\\newtheorem{theorem}{Theorem}[section]&#39;</span>
doconce subst <span class="s1">&#39;% insert custom LaTeX commands\.\.\.&#39;</span> <span class="nv">$thpack</span> <span class="nv">$file</span>
doconce subst <span class="s1">&#39;\\paragraph\{Theorem \d+\.\}&#39;</span> <span class="s1">&#39;&#39;</span> <span class="nv">$file</span>
doconce replace <span class="s1">&#39;% begin theorem&#39;</span> <span class="s1">&#39;\begin{theorem}&#39;</span> <span class="nv">$file</span>
doconce replace <span class="s1">&#39;% end theorem&#39;</span> <span class="s1">&#39;\end{theorem}&#39;</span> <span class="nv">$file</span>
</pre></div>
</div>
<p>More heavy editing is better done in a Python script that reads the
<code class="docutils literal"><span class="pre">mydoc.p.tex</span></code> file and performs string substitutions and regex
substitutions as needed.</p>
<p>The resulting <code class="docutils literal"><span class="pre">mydoc.tex</span></code> file now becomes</p>
<div class="highlight-doconce"><div class="highlight"><pre>\usepackage{theorem}
\newtheorem{theorem}{Theorem}[section]

...

<span class="nb">\begin{theorem}</span>
\label{theorem:fundamental1}



Let $a=1$ and $b=2$. Then $c=3$.
<span class="nb">\end{theorem}</span>

% begin proof
\paragraph{Proof.}
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
% end proof

As we see, the proof of Theorem 5 is a modest
achievement.
</pre></div>
</div>
<p>Even better, HTML output looks nice as well.</p>
<p>Note that DocOnce supports fancy environments for verbatim code via
the <code class="docutils literal"><span class="pre">ptex2tex</span></code> program with all its flexibility for choosing environments.
Also <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code> has quite some flexibility for typesetting
computer code.</p>
</div>
<div class="section" id="tools-for-writing-doconce-documents">
<h3>Tools for Writing DocOnce Documents<a class="headerlink" href="#tools-for-writing-doconce-documents" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Emacs (with the modest DocOnce syntax highlighting), Vim, Gedit, etc.</li>
<li><a class="reference external" href="http://www.xm1math.net/texmaker/">TeXMaker</a> and <a class="reference external" href="http://kile.sourceforge.net/">Kile</a> can in theory be adapted to handle DocOnce compilation and maybe even DocOnce constructs.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="debugging">
<h3>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h3>
<p>Given a problem, extract a small portion of text surrounding the
problematic area and debug that small piece of text. DocOnce does a
series of transformations of the text. The effect of each of these
transformation steps are dumped to a logfile, named
<code class="docutils literal"><span class="pre">_doconce_debugging.log</span></code>, if the to <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> after the filename
is <code class="docutils literal"><span class="pre">debug</span></code>. The logfile is inteded for the developers of DocOnce, but
may still give some idea of what is wrong.  The section &#8220;Basic Parsing
Ideas&#8221; explains how the DocOnce text is transformed into a specific
format, and you need to know these steps to make use of the logfile.</p>
</div>
</div>
<div class="section" id="from-doconce-to-other-formats">
<span id="doconce2formats"></span><h2>From DocOnce to Other Formats<a class="headerlink" href="#from-doconce-to-other-formats" title="Permalink to this headline">¶</a></h2>
<p id="index-145">Transformation of a DocOnce document <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code> to various other
formats is done with the script <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format formatname mydoc.do.txt
</pre></div>
</div>
<p>or just drop the extension:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format formatname mydoc
</pre></div>
</div>
<div class="section" id="writing-a-makefile">
<span id="do2any-make-sh"></span><h3>Writing a Makefile<a class="headerlink" href="#writing-a-makefile" title="Permalink to this headline">¶</a></h3>
<p>Producing HTML, Sphinx, and in particular LaTeX documents from
DocOnce sources requires a few commands. Often you want to
produce several different formats. The relevant commands should
then be placed in a script that acts as a &#8220;makefile&#8221;.</p>
<p>We here show how to make a Bash script. Alternatively, scripts
can be coded in Python or Perl, for instance. Below is
the skeleton of a typical Bash script, called <code class="docutils literal"><span class="pre">make.sh</span></code> and run as
<code class="docutils literal"><span class="pre">bash</span> <span class="pre">make.sh</span></code> in a Terminal application on Mac or any of the many
terminal or console applications on Linux. On Windows you normally
cannot run Bash scripts, so you should go for Python instead (maybe
as the language in Windows Script Host).</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="nb">set</span> -x  <span class="c"># write out all commands prior to execution</span>

<span class="k">function</span> system <span class="o">{</span>
<span class="c"># Run operating system command and if failure, report and abort</span>

  <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
  <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;make.sh: unsuccessful command </span><span class="nv">$@</span><span class="s2">&quot;</span>
    <span class="nb">echo</span> <span class="s2">&quot;abort!&quot;</span>
    <span class="nb">exit </span>1
  <span class="k">fi</span>
<span class="o">}</span>

<span class="c"># Do a hard clean (remove all files that can be regenerated)</span>
doconce clean
<span class="c"># Do a soft clean (keep compiled files)</span>
<span class="c">#doconce lightclean</span>

<span class="c"># Run spellcheck</span>
system doconce spellcheck -d .dict4spell.txt *.do.txt

<span class="nv">name</span><span class="o">=</span>mydoc <span class="c"># name of DocOnce master document</span>

<span class="c"># Compile to PDF</span>
system doconce pdflatex <span class="nv">$name</span> --latex_code_style<span class="o">=</span>pyg  <span class="c"># + more options</span>
system pdflatex -shell-escape <span class="nv">$name</span>
system bibtex <span class="nv">$name</span>
system makeindex <span class="nv">$name</span>
pdflatex -shell-escape <span class="nv">$name</span>
pdflatex -shell-escape <span class="nv">$name</span>

<span class="c"># Compile to HTML (two different styles)</span>
<span class="nv">styles</span><span class="o">=</span><span class="s2">&quot;bootstrap solarized3&quot;</span>
<span class="k">for</span> style in <span class="nv">$styles</span><span class="p">;</span> <span class="k">do</span>
system doconce format html <span class="nv">$name</span> --html_style<span class="o">=</span><span class="nv">$style</span> <span class="se">\</span>
       --html_output<span class="o">=</span><span class="si">${</span><span class="nv">name</span><span class="si">}</span>-<span class="si">${</span><span class="nv">style</span><span class="si">}</span>
system doconce split_html <span class="si">${</span><span class="nv">name</span><span class="si">}</span>-<span class="si">${</span><span class="nv">style</span><span class="si">}</span>  <span class="c"># split at !split commands</span>
<span class="k">done</span>

<span class="c"># Compile to Sphinx</span>
system doconce format sphinx <span class="nv">$name</span>
system doconce sphinx_dir <span class="nv">theme</span><span class="o">=</span>alabaster <span class="nv">$name</span>
python automake_sphinx.py
</pre></div>
</div>
<p>In addition, you are strongly encouraged to make a clean script.
Here is a quick Bash version, called <code class="docutils literal"><span class="pre">clean.sh</span></code>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/sh</span>
doconce clean
rm -f *.html
rm -rf Trash
rm -f automake_sphinx.py
</pre></div>
</div>
<p>If you host your files in a Git repository, you should also have a
<code class="docutils literal"><span class="pre">.gitignore</span></code> file in the root directory of the repository:</p>
<div class="highlight-text"><div class="highlight"><pre>*~
.*~
tmp*
temp*
.#*
\#*
# DocOnce files
.*_html_file_collection
*.p.tex
.*.exerinfo
.*.quiz
.*.quiz.html
automake_sphinx.py
Trash
# LaTeX files:
*.log
*.dvi
*.aux
*.blg
*.idx
*.nav
*.out
*.toc
*.snm
*.vrb
</pre></div>
</div>
<p id="index-146">If you host your files on GitHub and use a gh-pages branch to publish
your documents, make sure you have an empty file called <code class="docutils literal"><span class="pre">.nojeykyll</span></code>
in the root directory or the repository and that this file is present
in the gh-pages branch. Without <code class="docutils literal"><span class="pre">.nojekyll</span></code>, GitHub will not display
files starting with an underscore or dot, with the result that
HTML and Sphinx documents are not rendered correctly.</p>
</div>
<div class="section" id="generating-a-makefile">
<span id="do2any-make"></span><h3>Generating a Makefile<a class="headerlink" href="#generating-a-makefile" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">makefile</span></code> can be used to automatically generate
such a makefile, more precisely a Python script <code class="docutils literal"><span class="pre">make.py</span></code>, which
carries out the commands explained below. If our DocOnce source
is in <code class="docutils literal"><span class="pre">main_myproj.do.txt</span></code>, we run</p>
<div class="highlight-text"><div class="highlight"><pre>doconce makefile main_myproj html pdflatex sphinx
</pre></div>
</div>
<p>to produce the necessary output for generating HTML, pdfLaTeX, and
Sphinx. Usually, you need to edit <code class="docutils literal"><span class="pre">make.py</span></code> to really fit your
needs. Some examples lines are inserted as comments to show
various options that can be added to the basic commands.
A handy feature of the generated <code class="docutils literal"><span class="pre">make.py</span></code> script is that it
inserts checks for successful runs of the many <code class="docutils literal"><span class="pre">doconce</span></code> commands,
and if something goes wrong, the script aborts.</p>
</div>
<div class="section" id="preprocessing">
<span id="do2any-pre"></span><h3>Preprocessing<a class="headerlink" href="#preprocessing" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-147"></span><span class="target" id="index-148"></span><p id="index-149">The <code class="docutils literal"><span class="pre">preprocess</span></code> and <code class="docutils literal"><span class="pre">mako</span></code> programs are used to preprocess the
file. The DocOnce program detects whether <code class="docutils literal"><span class="pre">preprocess</span></code> and/or <code class="docutils literal"><span class="pre">mako</span></code>
statements are present and runs the corresponding programs, first
<code class="docutils literal"><span class="pre">preprocess</span></code> and then <code class="docutils literal"><span class="pre">mako</span></code>.</p>
<p>Variables to <code class="docutils literal"><span class="pre">preprocess</span></code> and/or <code class="docutils literal"><span class="pre">mako</span></code> can be added after the
filename with the syntax <code class="docutils literal"><span class="pre">-DMYVAR</span></code>, <code class="docutils literal"><span class="pre">-DMYVAR=val</span></code> or <code class="docutils literal"><span class="pre">MYVAR=val</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li>The form <code class="docutils literal"><span class="pre">-DMYVAR</span></code> defines the variable <code class="docutils literal"><span class="pre">MYVAR</span></code> for <code class="docutils literal"><span class="pre">preprocess</span></code> (like the
same syntax for the C preprocessor - <code class="docutils literal"><span class="pre">MYVAR</span></code> is defined, but has
not specific value). When running <code class="docutils literal"><span class="pre">mako</span></code>, <code class="docutils literal"><span class="pre">-DMYVAR</span></code> means that
<code class="docutils literal"><span class="pre">MYVAR</span></code> has the (Python) value <code class="docutils literal"><span class="pre">True</span></code>. You can test for
<code class="docutils literal"><span class="pre">#</span> <span class="pre">#ifdef</span> <span class="pre">MYVAR</span></code> in Preprocess and <code class="docutils literal"><span class="pre">%</span> <span class="pre">if</span> <span class="pre">MYVAR:</span></code> in Mako.</li>
<li>The expressions <code class="docutils literal"><span class="pre">-DMYVAR=val</span></code> and <code class="docutils literal"><span class="pre">MYVAR=val</span></code> are
equivalent. When running <code class="docutils literal"><span class="pre">preprocess</span></code>, <code class="docutils literal"><span class="pre">MYVAR</span></code> is defined and has
the value <code class="docutils literal"><span class="pre">val</span></code> (<code class="docutils literal"><span class="pre">#</span> <span class="pre">#ifdef</span> <span class="pre">MYVAR</span></code> and <code class="docutils literal"><span class="pre">#</span> <span class="pre">#if</span> <span class="pre">MYVAR</span> <span class="pre">==</span> <span class="pre">&quot;val&quot;</span></code> are both
true tests), while for <code class="docutils literal"><span class="pre">mako</span></code>, <code class="docutils literal"><span class="pre">MYVAR</span></code> exists as
variable and has the value <code class="docutils literal"><span class="pre">val</span></code> (<code class="docutils literal"><span class="pre">%</span> <span class="pre">if</span> <span class="pre">MYVAR</span> <span class="pre">==</span> <span class="pre">&quot;val&quot;</span></code> is true).</li>
</ul>
</div></blockquote>
<p>Note that <code class="docutils literal"><span class="pre">MYVAR=False</span></code> defines <code class="docutils literal"><span class="pre">MYVAR</span></code> in <code class="docutils literal"><span class="pre">preprocess</span></code> and
any test <code class="docutils literal"><span class="pre">#</span> <span class="pre">#ifdef</span> <span class="pre">MYVAR</span></code> is always true, regardless of the value one has
set <code class="docutils literal"><span class="pre">MYVAR</span></code> to, so a better test is
<code class="docutils literal"><span class="pre">#</span> <span class="pre">#if</span> <span class="pre">MYVAR</span> <span class="pre">==</span> <span class="pre">True</span></code>. In general, it is recommended to go with
<code class="docutils literal"><span class="pre">preprocess</span></code> directives if the tests are very simple, as in
<code class="docutils literal"><span class="pre">#</span> <span class="pre">#ifdef</span> <span class="pre">MYVAR</span></code> or <code class="docutils literal"><span class="pre">#</span> <span class="pre">#if</span> <span class="pre">FORMAT</span> <span class="pre">==</span> <span class="pre">&quot;latex&quot;</span></code>, otherwise use
only <code class="docutils literal"><span class="pre">mako</span></code> syntax like <code class="docutils literal"><span class="pre">%</span> <span class="pre">if</span> <span class="pre">MYVAR</span> <span class="pre">or</span> <span class="pre">YOURVAR:</span></code> to incorporate
<code class="docutils literal"><span class="pre">if</span></code> tests in the preprocessor phases.</p>
<p>Two examples on defining preprocessor variables are</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format sphinx mydoc -Dextra_sections -DVAR1=5
Terminal&gt; doconce format sphinx mydoc extra_sections=True VAR1=5
</pre></div>
</div>
<p>The variable <code class="docutils literal"><span class="pre">FORMAT</span></code> is always defined as the current format when
running <code class="docutils literal"><span class="pre">preprocess</span></code> or <code class="docutils literal"><span class="pre">mako</span></code>. That is, in the above examples, <code class="docutils literal"><span class="pre">FORMAT</span></code> is
defined as <code class="docutils literal"><span class="pre">sphinx</span></code>. Inside the DocOnce document one can then perform
format specific actions through tests like <code class="docutils literal"><span class="pre">#if</span> <span class="pre">FORMAT</span> <span class="pre">==</span> <span class="pre">&quot;sphinx&quot;</span></code>
(for <code class="docutils literal"><span class="pre">preprocess</span></code>) or <code class="docutils literal"><span class="pre">%</span> <span class="pre">if</span> <span class="pre">FORMAT</span> <span class="pre">==</span> <span class="pre">&quot;sphinx&quot;:</span></code> (for <code class="docutils literal"><span class="pre">mako</span></code>).</p>
<p>The result of running <code class="docutils literal"><span class="pre">preprocess</span></code> on a DocOnce file <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code>
is available in a file <code class="docutils literal"><span class="pre">tmp_preprocess__mydoc.do.txt</span></code>. Similarly,
the result of running <code class="docutils literal"><span class="pre">mako</span></code> is available in
<code class="docutils literal"><span class="pre">tmp_mako__mydoc.do.txt</span></code>. By examining these files one can see exactly
what the preprocessors have done.</p>
<div class="section" id="variable-substition-with-preprocessors">
<h4>Variable Substition with Preprocessors<a class="headerlink" href="#variable-substition-with-preprocessors" title="Permalink to this headline">¶</a></h4>
<p>A variable <code class="docutils literal"><span class="pre">VAR=value</span></code> given on the command line (or <code class="docutils literal"><span class="pre">-DVar=value</span></code>) can
be used in Preprocess and Mako tests. With Mako, the variable can
also be used inside text, as <code class="docutils literal"><span class="pre">${VAR}</span></code>, and Mako will substitute the
variable by its value. Preprocess can also substitute a variable by
its value, but this is (on DocOnce&#8217;s use of Preprocess) restricted
to filenames in <code class="docutils literal"><span class="pre">#include</span></code> statements. With the command-line option
<code class="docutils literal"><span class="pre">--preprocess_include_subst</span></code>, any <code class="docutils literal"><span class="pre">-DVAR=value</span></code> variable will lead
to a susbtitution of <code class="docutils literal"><span class="pre">VAR</span></code> by <code class="docutils literal"><span class="pre">value</span></code> in included filenames.
For example, <code class="docutils literal"><span class="pre">#</span> <span class="pre">#include</span> <span class="pre">&quot;MYDIR/myfile.do.txt&quot;</span></code> and <code class="docutils literal"><span class="pre">-DMYDIR=RN2</span></code>
will lead to inclusion of the file <code class="docutils literal"><span class="pre">RN2/myfile.do.txt</span></code>. Note that
for this Preprocess substitution, the variable in the filename
must be <code class="docutils literal"><span class="pre">MYDIR</span></code>, not <code class="docutils literal"><span class="pre">${MYDIR}</span></code> as with Mako.</p>
</div>
</div>
<div class="section" id="removal-of-inline-comments">
<span id="do2any-inlinecomments"></span><h3>Removal of Inline Comments<a class="headerlink" href="#removal-of-inline-comments" title="Permalink to this headline">¶</a></h3>
<p id="index-150">The command-line arguments <code class="docutils literal"><span class="pre">--no_preprocess</span></code> and <code class="docutils literal"><span class="pre">--no_mako</span></code> turn off
running <code class="docutils literal"><span class="pre">preprocess</span></code> and <code class="docutils literal"><span class="pre">mako</span></code>, respectively.</p>
<p>Inline comments in the text are removed from the output by</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format latex mydoc --skip_inline_comments
</pre></div>
</div>
<p>One can also remove all such comments from the original DocOnce
file by running:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce remove_inline_comments mydoc
</pre></div>
</div>
<p>This action is convenient when a DocOnce document reaches its final form
and comments by different authors should be removed.</p>
</div>
<div class="section" id="notes">
<span id="do2any-notes"></span><h3>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h3>
<p id="index-151">DocOnce does not have a tag for longer notes, because implementation
of a &#8220;notes feature&#8221; is so easy using the <code class="docutils literal"><span class="pre">preprocess</span></code> or <code class="docutils literal"><span class="pre">mako</span></code>
programs. Just introduce some variable, say <code class="docutils literal"><span class="pre">NOTES</span></code>, that you define
through <code class="docutils literal"><span class="pre">-DNOTES</span></code> (or not) when running <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">...</span></code>. Inside
the document you place your notes between <code class="docutils literal"><span class="pre">#</span> <span class="pre">#ifdef</span> <span class="pre">NOTES</span></code> and
<code class="docutils literal"><span class="pre">#</span> <span class="pre">#endif</span></code> preprocess tags. Alternatively you use <code class="docutils literal"><span class="pre">%</span> <span class="pre">if</span> <span class="pre">NOTES:</span></code>
and <code class="docutils literal"><span class="pre">%</span> <span class="pre">endif</span></code> that <code class="docutils literal"><span class="pre">mako</span></code> will recognize. In the same way you may
encapsulate unfinished material, extra material to be removed
for readers but still nice to archive as part of the document for
future revisions.</p>
</div>
<div class="section" id="demo-of-different-formats">
<h3>Demo of Different Formats<a class="headerlink" href="#demo-of-different-formats" title="Permalink to this headline">¶</a></h3>
<p id="index-152">A simple scientific report is available in <a class="reference external" href="http://hplgit.github.com/teamods/writing_reports/index_with_doconce_commands.html">a lot of different formats</a>.
How to create the different formats is explained in more depth
in the coming sections.</p>
</div>
<div class="section" id="tweaking-the-doconce-output">
<span id="do2any-tweaking"></span><h3>Tweaking the DocOnce Output<a class="headerlink" href="#tweaking-the-doconce-output" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-153"></span><p id="index-154">Occasionally, one would like to tweak the output in a certain format
from DocOnce. One example is figure filenames when transforming
DocOnce to reStructuredText. Since DocOnce does not know if the
<code class="docutils literal"><span class="pre">.rst</span></code> file is going to be filtered to LaTeX or HTML, it cannot know
if <code class="docutils literal"><span class="pre">.eps</span></code> or <code class="docutils literal"><span class="pre">.png</span></code> is the most appropriate image filename.
The solution is to use a text substitution command or code with, e.g., sed,
perl, python, or scitools subst, to automatically edit the output file
from DocOnce. It is then wise to run DocOnce and the editing commands
from a script to automate all steps in going from DocOnce to the final
format(s). The <code class="docutils literal"><span class="pre">make.sh</span></code> files in <code class="docutils literal"><span class="pre">docs/manual</span></code> and <code class="docutils literal"><span class="pre">docs/tutorial</span></code>
constitute comprehensive examples on how such scripts can be made.</p>
</div>
<div class="section" id="useful-options-for-doconce-format">
<h3>Useful Options for <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code><a class="headerlink" href="#useful-options-for-doconce-format" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> command used to translate a DocOnce document to
an output format performs some syntax check and to notify the user
about common problems. There are some useful options for turning on
additional checks:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">--labelcheck=on</span></code> (or <code class="docutils literal"><span class="pre">off</span></code>) to check that every <code class="docutils literal"><span class="pre">ref</span></code> reference
has a corresponding <code class="docutils literal"><span class="pre">label</span></code> definition within the document (this check
may lead to wrong diagnostics, e.g., when a label is defined in an
external document and referred via generalized references, so the
check must be used with care)</li>
<li><code class="docutils literal"><span class="pre">--urlcheck</span></code> checks that all URLs referred to in the document are valid.</li>
</ul>
</div></blockquote>
<p>Other useful options are</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">--os_prompt=PROMPT&gt;</span></code> sets the prompt, here <code class="docutils literal"><span class="pre">PROMPT&gt;</span></code>, as terminal
prompt in output from running OS commands with the <code class="docutils literal"><span class="pre">&#64;&#64;&#64;OSCMD</span></code> instruction.
The value <code class="docutils literal"><span class="pre">None</span></code> gives no prompt.</li>
<li><code class="docutils literal"><span class="pre">--code_prefix=X</span></code> prefixes all <code class="docutils literal"><span class="pre">&#64;&#64;&#64;CODE</span></code> imports with some path <code class="docutils literal"><span class="pre">X</span></code>
(if the source files are located in some other directory)</li>
<li><code class="docutils literal"><span class="pre">--figure_prefix=X</span></code> and <code class="docutils literal"><span class="pre">--movie_prefix=X</span></code> prefix figure/movie file
names with a path or URL</li>
<li><code class="docutils literal"><span class="pre">--sections_down</span></code> and <code class="docutils literal"><span class="pre">--sections_up</span></code> move all sections down or up
(e.g., sections become subsections or chapters).</li>
<li><code class="docutils literal"><span class="pre">--tables2csv</span></code> translates each table to a CSV file.</li>
<li><code class="docutils literal"><span class="pre">--short_title=X</span></code> sets a short title <code class="docutils literal"><span class="pre">X</span></code> for the document.</li>
</ul>
</div></blockquote>
<p>Many more options, depending on the output format, are listed in the
following sections.</p>
</div>
</div>
<div class="section" id="html">
<span id="do2any-html"></span><h2>HTML<a class="headerlink" href="#html" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-155"></span><div class="section" id="basic-html-output">
<span id="index-156"></span><h3>Basic HTML Output<a class="headerlink" href="#basic-html-output" title="Permalink to this headline">¶</a></h3>
<p>Making an HTML version of a DocOnce file <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code>
is performed by</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format html mydoc
</pre></div>
</div>
<p>The resulting file <code class="docutils literal"><span class="pre">mydoc.html</span></code> can be loaded into any web browser for viewing.</p>
</div>
<div class="section" id="typesetting-of-code">
<span id="index-157"></span><h3>Typesetting of Code<a class="headerlink" href="#typesetting-of-code" title="Permalink to this headline">¶</a></h3>
<p>If the Pygments package (including the <code class="docutils literal"><span class="pre">pygmentize</span></code> program)
is installed, code blocks are typeset with
aid of this package. The command-line argument <code class="docutils literal"><span class="pre">--no_pygments_html</span></code>
turns off the use of Pygments and makes code blocks appear with
plain (<code class="docutils literal"><span class="pre">pre</span></code>) HTML tags. The option <code class="docutils literal"><span class="pre">--pygments_html_linenos</span></code> turns
on line numbers in Pygments-formatted code blocks. A specific
Pygments style is set by <code class="docutils literal"><span class="pre">--pygments_html_style=style</span></code>, where <code class="docutils literal"><span class="pre">style</span></code>
can be <code class="docutils literal"><span class="pre">default</span></code>, <code class="docutils literal"><span class="pre">emacs</span></code>, <code class="docutils literal"><span class="pre">perldoc</span></code>, and other valid names for
Pygments styles.</p>
<span class="target" id="index-158"></span></div>
<div class="section" id="handling-of-movies">
<span id="index-159"></span><h3>Handling of Movies<a class="headerlink" href="#handling-of-movies" title="Permalink to this headline">¶</a></h3>
<p>MP4, WebM, and Ogg movies are typeset with the HTML5 <code class="docutils literal"><span class="pre">video</span></code> tag
and the HTML code tries to load as many versions among MP4, WebM,
and Ogg as exist (and the files are loaded in the mentioned order).
If just the specified file is to be loaded, use the
<code class="docutils literal"><span class="pre">--no_mp4_webm_ogg_alternatives</span></code> command-line option.
Other movie formats, e.g., <code class="docutils literal"><span class="pre">.flv</span></code>, <code class="docutils literal"><span class="pre">.mpeg</span></code> and <code class="docutils literal"><span class="pre">.avi</span></code>, are embedded via
the older <code class="docutils literal"><span class="pre">embed</span></code> tag.</p>
</div>
<div class="section" id="html-styles">
<span id="index-160"></span><h3>HTML Styles<a class="headerlink" href="#html-styles" title="Permalink to this headline">¶</a></h3>
<p>The HTML style can be defined either in the header of the HTML file,
using a named built-in style;
in an external CSS file; or in a template file.</p>
<p>An external CSS file <code class="docutils literal"><span class="pre">filename</span></code> used by setting the command-line
argument <code class="docutils literal"><span class="pre">--css=filename</span></code>. There available built-in styles are
specified as <code class="docutils literal"><span class="pre">--html_style=name</span></code>, where <code class="docutils literal"><span class="pre">name</span></code> can be</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">solarized</span></code>: the famous <a class="reference external" href="http://ethanschoonover.com/solarized">solarized</a>
style (yellowish),</li>
<li><code class="docutils literal"><span class="pre">blueish</span></code>: a simple style with blue headings (default),</li>
<li><code class="docutils literal"><span class="pre">blueish2</span></code>: a variant of <em>bluish</em>,</li>
<li><code class="docutils literal"><span class="pre">bloodish</span></code>: as <code class="docutils literal"><span class="pre">bluish</span></code>, but dark read as color,</li>
<li><code class="docutils literal"><span class="pre">bootstrap*</span></code> or <code class="docutils literal"><span class="pre">bootswatch*</span></code> in a lot of variants, see
<code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">--help</span></code> for a list of all styles.</li>
</ul>
</div></blockquote>
<p>There is a <a class="reference external" href="http://hplgit.github.io/teamods/writing_reports/index.html">comprehensive demonstration</a> of almost all available styles!</p>
<p>Using <code class="docutils literal"><span class="pre">--css=filename</span></code> where <code class="docutils literal"><span class="pre">filename</span></code> is a non-existing file makes
DocOnce write the built-in style to that file. Otherwise the HTML
links to the CSS stylesheet in <code class="docutils literal"><span class="pre">filename</span></code>. Several stylesheets can
be specified: <code class="docutils literal"><span class="pre">--ccs=file1.css,file2.css,file3.css</span></code>.</p>
</div>
<div class="section" id="html-templates">
<span id="index-161"></span><h3>HTML templates<a class="headerlink" href="#html-templates" title="Permalink to this headline">¶</a></h3>
<p>Templates are HTML files with ready-made headers, footers, and style
specifications where plain HTML text can be inserted in &#8220;slots&#8221; in the
template file. Typically, there is a slot <code class="docutils literal"><span class="pre">%(main)s</span></code> for the main body
of text, <code class="docutils literal"><span class="pre">%(title)s</span></code> for the title, and <code class="docutils literal"><span class="pre">%(date)s</span></code> for the date.
Templates are designed beforehand and <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> puts
the translated HTML text into the template to form the complete HTML
document.</p>
<p>DocOnce comes with a few ready-made HTML templates. The usage of templates is
described in a <a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/design/">separate document</a>. That document describes how you your DocOnce-generated
HTML file can have any specified layout.</p>
<p>The HTML file can be embedded in a template with your own tailored
design, see a <a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/tech_wrapper.htl">tutorial</a> on this topic. The template file must contain
valid HTML code and can have three &#8220;slots&#8221;: <code class="docutils literal"><span class="pre">%(title)s</span></code> for a title,
<code class="docutils literal"><span class="pre">%(date)s</span></code> for a date, and <code class="docutils literal"><span class="pre">%(main)s</span></code> for the main body of text. The
latter is the
DocOnce document translated to HTML. The title becomes the first
heading in the DocOnce document, or the title (but a title is not
recommended when using templates). The date is extracted from the
<code class="docutils literal"><span class="pre">DATE:</span></code> line. With the template feature one can easily embed
the text in the look and feel of a website. DocOnce comes with
two templates in <code class="docutils literal"><span class="pre">bundled/html_styles</span></code>. Just copy the directory
containing the template and the CSS and JavaScript files to your
document directory, edit the template as needed (also check that
paths to the <code class="docutils literal"><span class="pre">css</span></code> and <code class="docutils literal"><span class="pre">js</span></code> subdirectories are correct - according
to how you store the template files), and run</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format html mydoc --html_template=mytemplate.html
</pre></div>
</div>
<p>The template in <code class="docutils literal"><span class="pre">style_vagrant</span></code> also needs an extra option
<code class="docutils literal"><span class="pre">--html_style=bootstrap</span></code>.</p>
<span class="target" id="index-162"></span></div>
<div class="section" id="splitting-html-documents">
<span id="index-163"></span><h3>Splitting HTML documents<a class="headerlink" href="#splitting-html-documents" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">!split</span></code> instruction (on separate lines) signifies a pagebreak.
A command <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">split_html</span></code> is needed after <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> to
actually perform the split. The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">split_html</span></code> command has
several options for setting the type of splitting, type of navigation
buttons, etc. Just type <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">split_html</span></code> to see the options.
Here is an example with separate links for each page (pagination)
at the top and bottom of each page:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format html mydoc --html_style=bootswatch_journal
Terminal&gt; doconce split_html mydoc --nav_buttontop+bottom --pagination
</pre></div>
</div>
<div class="section" id="the-html-file-collection">
<span id="index-164"></span><h4>The HTML File Collection<a class="headerlink" href="#the-html-file-collection" title="Permalink to this headline">¶</a></h4>
<p>There are usually a range of files needed for an HTML document arising
from a DocOnce source. The needed files are listed in
<code class="docutils literal"><span class="pre">.basename_html_file_collection</span></code>, where <code class="docutils literal"><span class="pre">basename</span></code> is the filestem of
the DocOnce file (i.e., the DocOnce source is in <code class="docutils literal"><span class="pre">basename.do.txt</span></code>).</p>
</div>
<div class="section" id="filenames">
<h4>Filenames<a class="headerlink" href="#filenames" title="Permalink to this headline">¶</a></h4>
<p>An HTML version of a DocOnce document is often made in different styles,
calling for a need to rename the HTML output file. This is conveniently
done by the <code class="docutils literal"><span class="pre">--html_output=basename</span></code> option, where <code class="docutils literal"><span class="pre">basename</span></code> is the
filestem of the associated HTML files. The
<code class="docutils literal"><span class="pre">.basename_html_file_collection</span></code> file lists all the needed files
for the HTML document. Here is an example on making three versions of
the HTML document: <code class="docutils literal"><span class="pre">mydoc_bloodish.html</span></code>, <code class="docutils literal"><span class="pre">mydoc_solarized</span></code>, and
<code class="docutils literal"><span class="pre">mydoc_vagrant</span></code>.</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format html mydoc --html_style=bloodish \
          --html_output=mydoc_bloodish
Terminal&gt; doconce split_html mydoc_bloodish.html
Terminal&gt; doconce format html mydoc --html_style=solarized \
          --html_output=mydoc_solarized \
          --pygments_html_style=perldoc --html_admon=apricot
Terminal&gt; doconce format html mydoc --html_style=vagrant \
          --html_output=mydoc_vagrant --pygments_html_style=default \
          --html_template=templates/my_adapted_vagrant_template.html
Terminal&gt; doconce split_html mydoc_vagrant.html
</pre></div>
</div>
</div>
</div>
<div class="section" id="url-to-files-hosted-on-github">
<h3>URL to files hosted on GitHub<a class="headerlink" href="#url-to-files-hosted-on-github" title="Permalink to this headline">¶</a></h3>
<p>The generated HTML code will have URLs to files in the DocOnce repo at GitHub.
The type of URL is set with the <code class="docutils literal"><span class="pre">--html_raw_github_url=...</span></code> option:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">--html_raw_github_url=safe</span></code> or <code class="docutils literal"><span class="pre">--html_raw_github_url=cdn.rawgit</span></code>:
safe URL for high traffic production sites (default)</li>
<li><code class="docutils literal"><span class="pre">--html_raw_github_url=test</span></code> or <code class="docutils literal"><span class="pre">--html_raw_github_url=rawgit</span></code>:
recommended URL for low traffic development sites - use this when
developing HTML pages and the DocOnce GitHub links in the HTML files
are also developed and subject to changes</li>
<li><code class="docutils literal"><span class="pre">--html_raw_github_url=github</span></code> or <code class="docutils literal"><span class="pre">--html_raw_github_url=raw.github</span></code>:
URL directly to the raw GitHub file (<code class="docutils literal"><span class="pre">https://raw.github.com/hplgit/doconce/...</span></code>) that may fail to load properly in (e.g.) Internet explorer</li>
<li><code class="docutils literal"><span class="pre">--html_raw_github_url=githubusercontent</span></code> or <code class="docutils literal"><span class="pre">--html_raw_github_url=raw.githubusercontent</span></code>: as the one above, but using <code class="docutils literal"><span class="pre">https://raw.githubusercontent.com</span></code> instead</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="other-html-options">
<h3>Other HTML options<a class="headerlink" href="#other-html-options" title="Permalink to this headline">¶</a></h3>
<p>Options for Bootstrap styles:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal"><span class="pre">--html_code_style=on,off,inherit,transparent</span></code>: control the style of
inline verbatim code <code class="docutils literal"><span class="pre">code</span></code> tags. With <code class="docutils literal"><span class="pre">off</span></code>, <code class="docutils literal"><span class="pre">inherit</span></code>, or <code class="docutils literal"><span class="pre">transparent</span></code>
the verbatim text inherits foreground and background color from its
surroundings, while <code class="docutils literal"><span class="pre">on</span></code> (default) means that the typesetting is
css-specified. This option is most relevant for Bootstrap styles to
avoid the redish typesetting of inline verbatim text.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">--html_pre_style=on,off,inherit,transparent</span></code>: control the style of
code blocks in <code class="docutils literal"><span class="pre">pre</span></code> tags. With <code class="docutils literal"><span class="pre">off</span></code>, <code class="docutils literal"><span class="pre">inherit</span></code>, or <code class="docutils literal"><span class="pre">transparent</span></code>
the code blocks inherit foreground and background color from their
surroundings, while <code class="docutils literal"><span class="pre">on</span></code> (default) means that code block colors are
css-specified. This option is most relevant for Bootstrap styles to
avoid white background in code blocks inside colorful admons.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">--html_bootstrap_navbar=on,off</span></code>: turn the Bootstrap navigation
bar on or off.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">--html_bootstrap_jumbotron=on,off,h2</span></code>: turn the jumbotron intro on or off,
and govern the size of the document title. Default is <code class="docutils literal"><span class="pre">on</span></code>, while
<code class="docutils literal"><span class="pre">h2</span></code> means a jumbotron with <code class="docutils literal"><span class="pre">h2</span></code> (section) size of the title
(normally the jumbotron has huge heading fonts so some jumbotrons</p>
<blockquote>
<div><p>look better with <code class="docutils literal"><span class="pre">h2</span></code> typesetting of the document title).</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">--html_quiz_button_text=X</span></code>: set a text on the answer button for
Bootstrap-style quizzes. Without this option a small icon is used.</p>
</li>
</ul>
</div></blockquote>
<p>Other options:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">--html_share=http://...</span></code> makes sharing buttons at the end of the
document: email, Facebook, Google+, LinkedIn, Twitter, and print by
default. <code class="docutils literal"><span class="pre">--html_share=http://...,twitter,linkedin</span></code> will make just
to sharing buttons for Twitter and LinkedIn. Sites are separated
by comma and valid names are <code class="docutils literal"><span class="pre">email</span></code>, <code class="docutils literal"><span class="pre">facebook</span></code>, <code class="docutils literal"><span class="pre">google+</span></code>,
<code class="docutils literal"><span class="pre">linkedin</span></code>, <code class="docutils literal"><span class="pre">twitter</span></code>, and <code class="docutils literal"><span class="pre">print</span></code>. The URL <code class="docutils literal"><span class="pre">http://...</span></code> must be
the URL where the document is published.</li>
<li><code class="docutils literal"><span class="pre">--toc_depth=X</span></code>: controls the depth of the table of contents
in documents. Default value of <code class="docutils literal"><span class="pre">X</span></code> is 3, meaning chapters,
sections, and subsections. <code class="docutils literal"><span class="pre">X</span></code> as 0 gives the table of contents as a
nested list in Bootstrap styles.</li>
<li><code class="docutils literal"><span class="pre">--html_toc_indent=X</span></code>: indent sections/subsections <code class="docutils literal"><span class="pre">X</span></code> spaces in the table
of contents.</li>
<li><code class="docutils literal"><span class="pre">--html_body_font=</span></code>: specify font for text body. The value <code class="docutils literal"><span class="pre">?</span></code> lists
available fonts.</li>
<li><code class="docutils literal"><span class="pre">--html_heading_font=</span></code>: specify font for headings. The value <code class="docutils literal"><span class="pre">?</span></code> lists
available fonts.</li>
<li><code class="docutils literal"><span class="pre">--html_video_autoplay=True,False</span></code>: let videos play automatically
(<code class="docutils literal"><span class="pre">True</span></code>, default) or not (<code class="docutils literal"><span class="pre">False</span></code>) when the HTML page is loaded.</li>
<li><code class="docutils literal"><span class="pre">--html_admon=X</span></code>: specify typesetting of admonitions. Values of <code class="docutils literal"><span class="pre">X</span></code>
are <code class="docutils literal"><span class="pre">colors</span></code>, <code class="docutils literal"><span class="pre">gray</span></code>, <code class="docutils literal"><span class="pre">yellow</span></code>, <code class="docutils literal"><span class="pre">apricot</span></code>, <code class="docutils literal"><span class="pre">lyx</span></code>, <code class="docutils literal"><span class="pre">paragraph</span></code>.
For Bootstrap styles only to other values are legal:
<code class="docutils literal"><span class="pre">botstrap_panel</span></code> or <code class="docutils literal"><span class="pre">bootstrap_alert</span></code>. See demos for how these look
like.</li>
<li><code class="docutils literal"><span class="pre">--html_admon_bg_color=X</span></code>: set the background color in admonitions.</li>
<li><code class="docutils literal"><span class="pre">--html_admon_bd_color=X</span></code>: set the boundary color in admonitions.</li>
<li><code class="docutils literal"><span class="pre">--html_admon_shadow</span></code>: add a shadow effect in admonitions.</li>
<li><code class="docutils literal"><span class="pre">--html_box_shadow</span></code>: add a shadow effect in box environments (<code class="docutils literal"><span class="pre">!bbox</span></code>).</li>
<li><code class="docutils literal"><span class="pre">--html_exercise_icon=X</span></code>: specify an icon to more easily notify exercises.
<code class="docutils literal"><span class="pre">X</span></code> can be any filename <code class="docutils literal"><span class="pre">question_*.png</span></code> in the <code class="docutils literal"><span class="pre">bundled/html_images</span></code>
directory in the DocOnce repo. With <code class="docutils literal"><span class="pre">X</span></code> as <code class="docutils literal"><span class="pre">default</span></code>, a default icon
choice is made, based on the current style.</li>
<li><code class="docutils literal"><span class="pre">--html_exercise_icon_width=X</span></code>: set the width of the exercise icon
image to <code class="docutils literal"><span class="pre">X</span></code> pixels.</li>
<li><code class="docutils literal"><span class="pre">--exercise_numbering=absolute,</span> <span class="pre">chapter</span></code></li>
<li><code class="docutils literal"><span class="pre">--html_DOCTYPE</span></code>: insert <code class="docutils literal"><span class="pre">&lt;!DOCTYPE</span> <span class="pre">HTML&gt;</span></code> at the top of the HTML
output file. This is normally recommended, but malformed CSS files
will then not be loaded (so by default, the doctype is not specified).
This option is necessary for correct rendering of Bootstrap styles
in Internet Explorer.</li>
<li><code class="docutils literal"><span class="pre">--html_links_in_new_window</span></code>: open all links as new tabs.</li>
<li><code class="docutils literal"><span class="pre">--html_figure_hrule=X</span></code>: control the use of horizontal rules in
figures. <code class="docutils literal"><span class="pre">X</span></code> is <code class="docutils literal"><span class="pre">top</span></code> by default; other values are <code class="docutils literal"><span class="pre">none</span></code> (no rules),
<code class="docutils literal"><span class="pre">bottom</span></code> and <code class="docutils literal"><span class="pre">top+bottom</span></code>.</li>
<li><code class="docutils literal"><span class="pre">--allow_refs_to_external_docs</span></code> (do not abort if there are references whose labels are not found)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="blog-posts">
<span id="do2any-blog"></span><h3>Blog Posts<a class="headerlink" href="#blog-posts" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-165"></span><span class="target" id="index-166"></span><p id="index-167">DocOnce can be used for writing blog posts provided the blog site accepts
raw HTML code. Google&#8217;s Blogger service (<code class="docutils literal"><span class="pre">blogger.com</span></code> or
<code class="docutils literal"><span class="pre">blogname.blogspot.com</span></code>) is particularly well suited since it also
allows extensive LaTeX mathematics via MathJax.</p>
<ol class="arabic simple">
<li>Write the text of the blog post as a DocOnce document without any
title, author, and date.</li>
<li>Generate HTML as described above.</li>
<li>Copy the text and paste it into the
text area in the blog post (just delete the HTML code that initially
pops up in the text area). Make sure the input format is HTML.</li>
</ol>
<p>See a <a class="reference external" href="http://doconce.blogspot.no">simple blog example</a> and
a <a class="reference external" href="http://doconce-report-demo.blogspot.no/">scientific report</a>
for demonstrations of blog posts at <code class="docutils literal"><span class="pre">blogspot.no</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The comment field after the blog post does not recognize MathJax (LaTeX)
mathematics or code with indentation. However, using a MathJax
bookmarklet, e.g., at <a class="reference external" href="http://checkmyworking.com/misc/mathjax-bookmarklet/">http://checkmyworking.com/misc/mathjax-bookmarklet/</a>, one can get the mathematics properly rendered. The comment fields are
not suitable for computer code, though, as HTML tags are not allowed.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Figure files must be uploaded to some web site and the local filenames name must
be replaced by the relevant URL. This is usually done by using the
<code class="docutils literal"><span class="pre">--figure_prefix=http://project.github.io/...</span></code> option to give some URL
as prefix to all figure names (a similar <code class="docutils literal"><span class="pre">--movie_prefix=</span></code> option exists as
well).</p>
<p>Changing figure names in a blog post can also be done &#8220;manually&#8221; by
some editing code in the script that compiles the DocOnce document
to HTML format:</p>
<div class="last highlight-bash"><div class="highlight"><pre>cp mydoc.do.txt mydoc2.do.txt
<span class="nv">url</span><span class="o">=</span><span class="s2">&quot;https//raw.github.com/someuser/someuser.github.com&quot;</span>
<span class="nv">dir</span><span class="o">=</span><span class="s2">&quot;master/project/dir1/dir2&quot;</span>
<span class="k">for</span> figname in fig1 fig2 fig3<span class="p">;</span> <span class="k">do</span>
  doconce replace <span class="s2">&quot;[</span><span class="nv">$figname</span><span class="s2">,&quot;</span> <span class="s2">&quot;[</span><span class="nv">$site</span><span class="s2">/</span><span class="nv">$dir</span><span class="s2">/</span><span class="nv">$figname</span><span class="s2">.png,&quot;</span> <span class="se">\</span>
          mydoc2.do.txt
<span class="k">done</span>
doconce format html mydoc2
<span class="c"># Paste mydoc2.html into a new blog post page</span>
</pre></div>
</div>
</div>
<p>Blog posts at Google can also be published <a class="reference external" href="http://support.google.com/blogger/bin/answer.py?hl=en&amp;answer=41452">automatically through email</a>.
A Python program can send the contents of the HTML file
to the blog site&#8217;s email address using the packages  <code class="docutils literal"><span class="pre">smtplib</span></code> and <code class="docutils literal"><span class="pre">email</span></code>.</p>
<p>WordPress (<code class="docutils literal"><span class="pre">wordpress.com</span></code>) allows raw HTML code in blogs, but has
very limited LaTeX support, basically only formulas. The <code class="docutils literal"><span class="pre">--wordpress</span></code>
option to <code class="docutils literal"><span class="pre">doconce</span></code> modifies the HTML code such that all equations are
typeset in a way that is acceptable to WordPress.  Look at a <a class="reference external" href="http://doconce.wordpress.com">simple
doconce example</a> and a <a class="reference external" href="http://doconcereportdemo.wordpress.com/">scientific
report</a> to see blog posts
with mathematics and code on WordPress.</p>
<p>Speaking of WordPress, the related project <a class="reference external" href="http://pressbooks.com">http://pressbooks.com</a> can take raw HTML code (from DocOnce, for
instance, but use the <code class="docutils literal"><span class="pre">--wordpress</span></code> option)
and produce very nice-looking books.  There is support for LaTeX
mathematics as in WordPress blog posts, meaning that one cannot refer
to equations.</p>
</div>
</div>
<div class="section" id="pandoc-and-markdown">
<span id="do2any-pandoc"></span><h2>Pandoc and Markdown<a class="headerlink" href="#pandoc-and-markdown" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-168"></span><span class="target" id="index-169"></span><span class="target" id="index-170"></span><p id="index-171">Output in Pandoc&#8217;s extended Markdown format results from</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format pandoc mydoc
</pre></div>
</div>
<p>or (equivalent)</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format markdown mydoc
</pre></div>
</div>
<div class="admonition-test-on-format-pandoc-for-markdown admonition">
<p class="first admonition-title">Test on <code class="docutils literal"><span class="pre">FORMAT</span> <span class="pre">==</span> <span class="pre">'pandoc'</span></code> for Markdown</p>
<p class="last">Note that even though it works to write <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">markdown</span></code>,
the <code class="docutils literal"><span class="pre">FORMAT</span></code> variable that is defined in all DocOnce documents has
the value <code class="docutils literal"><span class="pre">pandoc</span></code> for all the Markdown formats. A test like
<code class="docutils literal"><span class="pre">FORMAT</span> <span class="pre">==</span> <span class="pre">'markdown'</span></code> will not work!</p>
</div>
<p>The name of the output file is <code class="docutils literal"><span class="pre">mydoc.md</span></code>. There are four supported
dialects of Markdown (see sections below for more information):</p>
<blockquote>
<div><ul class="simple">
<li>Pandoc-extended Markdown</li>
<li>GitHub-flavored Markdown</li>
<li>MultiMarkdown</li>
<li>Strict Markdown</li>
</ul>
</div></blockquote>
<p>From the Markdown format one can go to numerous other formats using
the <code class="docutils literal"><span class="pre">pandoc</span></code> program:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; pandoc -R -t mediawiki -o mydoc.mwk --toc mydoc.md
</pre></div>
</div>
<p>Pandoc supports <code class="docutils literal"><span class="pre">latex</span></code>, <code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">odt</span></code> (OpenOffice), <code class="docutils literal"><span class="pre">docx</span></code> (Microsoft
Word), <code class="docutils literal"><span class="pre">rtf</span></code>, <code class="docutils literal"><span class="pre">texinfo</span></code>, to mention some. The <code class="docutils literal"><span class="pre">-R</span></code> option makes
Pandoc pass raw HTML or LaTeX to the output format instead of ignoring it,
while the <code class="docutils literal"><span class="pre">--toc</span></code> option generates a table of contents.
See the <a class="reference external" href="http://johnmacfarlane.net/pandoc/README.html">Pandoc documentation</a>
for the many features of the <code class="docutils literal"><span class="pre">pandoc</span></code> program.</p>
<div class="section" id="markdown-to-html-conversion">
<h3>Markdown to HTML conversion<a class="headerlink" href="#markdown-to-html-conversion" title="Permalink to this headline">¶</a></h3>
<p>The HTML output from
<code class="docutils literal"><span class="pre">pandoc</span></code> needs adjustments to provide full support for MathJax LaTeX
mathematics, and for this purpose one should use <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">md2html</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format pandoc mydoc
Terminal&gt; doconce m2html mydoc
</pre></div>
</div>
<p>The result <code class="docutils literal"><span class="pre">mydoc.html</span></code> can be viewed in a browser.</p>
</div>
<div class="section" id="strict-markdown">
<span id="index-172"></span><h3>Strict Markdown<a class="headerlink" href="#strict-markdown" title="Permalink to this headline">¶</a></h3>
<p>The option <code class="docutils literal"><span class="pre">--strict_markdown_output</span></code> generates plain or strict
Markdown without the many extension that Pandoc accepts in Markdown
syntax.</p>
</div>
<div class="section" id="github-flavored-markdown">
<span id="index-173"></span><h3>GitHub-flavored Markdown<a class="headerlink" href="#github-flavored-markdown" title="Permalink to this headline">¶</a></h3>
<p>Adding the command-line option <code class="docutils literal"><span class="pre">github-md</span></code> turns on the
<a class="reference external" href="https://guides.github.com/features/mastering-markdown/">GutHub-flavored Markdown dialect</a>, which is used for the issue tracker on <a class="reference external" href="http://github.com">GitHub</a>. A special feature is the support of task lists:
unnumbered lists with <code class="docutils literal"><span class="pre">[x]</span></code> (task done) or <code class="docutils literal"><span class="pre">[</span> <span class="pre">]</span></code> (task not done).
(Tables get typeset directly as HTML and the syntax for code highlighting
is different from Pandoc extended Markdown.) Below is a typical
response in a GitHub issue tracker
where one first quotes the issue and then provides an answer:</p>
<div class="highlight-text"><div class="highlight"><pre>!bquote
===== Problems with a function =====

There is a problem with the `f(x)` function

!bc pycod
def f(x):
    return 1 + x
!ec
This function should be quadratic.
!equote

OK, this is fixed:

!bc pycod
def f(x, a=1, b=1, c=1):
    return a*x**2 + b*x + c
!ec

===== Updated task list =====

   * [x] Offer an `f(x)` function
   * [ ] Extension to cubic functions
   * [x] Allowing general coefficient in the quadratic function

=== Remaining functionality ===

|---------------------------------------------------------------|
| function | purpose                        | state |
|----l-----------l------------------------------l---------------|
|  `g(x)`  | Compute the Gaussian function. | Formula ready. |
|  `h(x)`  | Heaviside function.            | Formula ready. |
|  `I(x)`  | Indicator function.            | Nothing done yet. |
|---------------------------------------------------------------|
</pre></div>
</div>
<p>Say this text is stored in a file <code class="docutils literal"><span class="pre">mycomments.do.txt</span></code>. Running</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format pandoc mycomments --github_md
</pre></div>
</div>
<p>produces the Markdown file <code class="docutils literal"><span class="pre">mycomments.md</span></code>, which can be pasted into
the Write field of
the GitHub issue tracker. Turning on Preview shows the typesetting of
the quote, compute code, inline verbatim, headings, the task list, and
the table.</p>
</div>
<div class="section" id="multimarkdown">
<h3>MultiMarkdown<a class="headerlink" href="#multimarkdown" title="Permalink to this headline">¶</a></h3>
<p>The option <code class="docutils literal"><span class="pre">--multimarkdown_output</span></code> generates the MultiMarkdown
version of Markdown (as opposed to Pandoc-extended Markdown (default),
strict Markdown, or GitHub-flavored Markdown).</p>
</div>
<div class="section" id="strapdown-rendering-of-markdown-text">
<span id="index-174"></span><h3>Strapdown rendering of Markdown text<a class="headerlink" href="#strapdown-rendering-of-markdown-text" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://strapdownjs.com">Strapdown</a> is a tool that can render Markdown
text nicely in a web browser by just inserting an HTML header and
footer in the Markdown file and load the file into a browser.
The option <code class="docutils literal"><span class="pre">--strapdown</span></code> outputs the relevant header and footer.
The output file must be renamed such that it gets the extension <code class="docutils literal"><span class="pre">.html</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format pandoc mydoc --strict_markdown_output \
          --strapdown --bootstrap_bootwatch_theme=slate
Terminal&gt; mv mydoc.md mydoc.html
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">--bootstrap_bootwatch_theme=theme</span></code> option is used to choose
a <a class="reference external" href="http://bootswatch.com/">Bootswatch</a> theme whose names are
found on the <a class="reference external" href="http://strapdownjs.com">Strapdown page</a>.</p>
</div>
<div class="section" id="using-pandoc-to-go-from-latex-to-ms-word-or-html">
<h3>Using Pandoc to go from LaTeX to MS Word or HTML<a class="headerlink" href="#using-pandoc-to-go-from-latex-to-ms-word-or-html" title="Permalink to this headline">¶</a></h3>
<p>Pandoc is useful to go from LaTeX mathematics to, e.g., HTML or MS
Word.  There are two ways (experiment to find the best one for your
document): <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">pandoc</span></code> and then translating using <code class="docutils literal"><span class="pre">doconce</span>
<span class="pre">md2latex</span></code> (which runs <code class="docutils literal"><span class="pre">pandoc</span></code>), or <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">latex</span></code>, and then
going from LaTeX to the desired format using <code class="docutils literal"><span class="pre">pandoc</span></code>.
Here is an example on the latter strategy:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format latex mydoc
Terminal&gt; doconce ptex2tex mydoc
Terminal&gt; doconce replace &#39;\Verb!&#39; &#39;\verb!&#39; mydoc.tex
Terminal&gt; pandoc -f latex -t docx -o mydoc.docx mydoc.tex
</pre></div>
</div>
<p>When we go through <code class="docutils literal"><span class="pre">pandoc</span></code>, only single equations, <code class="docutils literal"><span class="pre">align</span></code>, or <code class="docutils literal"><span class="pre">align*</span></code>
environments are well understood for output to HTML.</p>
<p>Note that DocOnce applies the <code class="docutils literal"><span class="pre">Verb</span></code> macro from the <code class="docutils literal"><span class="pre">fancyvrb</span></code> package
while <code class="docutils literal"><span class="pre">pandoc</span></code> only supports the standard <code class="docutils literal"><span class="pre">verb</span></code> construction for
inline verbatim text.  Moreover, quite some additional <code class="docutils literal"><span class="pre">doconce</span>
<span class="pre">replace</span></code> and <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">subst</span></code> edits might be needed on the <code class="docutils literal"><span class="pre">.mkd</span></code> or
<code class="docutils literal"><span class="pre">.tex</span></code> files to successfully have mathematics that is well translated
to MS Word.  Also when going to reStructuredText using Pandoc, it can
be advantageous to go via LaTeX.</p>
</div>
</div>
<div class="section" id="latex">
<span id="do2any-latex"></span><h2>LaTeX<a class="headerlink" href="#latex" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-175"></span><div class="admonition note" id="index-176">
<p class="first admonition-title">Note</p>
<p class="last">XeLaTeX and pdfLaTeX are used very much in the same way as standard
LaTeX. The minor differences are described in separate sections
of the documentation of the DocOnce to LaTeX translation.</p>
</div>
<div class="section" id="overview-2">
<h3>Overview<a class="headerlink" href="#overview-2" title="Permalink to this headline">¶</a></h3>
<p>Making a LaTeX file <code class="docutils literal"><span class="pre">mydoc.tex</span></code> from <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code> can be done in two
ways:</p>
<ol class="arabic simple">
<li>direct translation to a <code class="docutils literal"><span class="pre">.tex</span></code> file</li>
<li>translation to a <code class="docutils literal"><span class="pre">.p.tex</span></code> file</li>
</ol>
<p>In the latter case, one must apply the <code class="docutils literal"><span class="pre">ptex2tex</span></code> program or the
simplified <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code> program to translate the <code class="docutils literal"><span class="pre">.p.tex</span></code> file
to a plain <code class="docutils literal"><span class="pre">.tex</span></code> file. This step involves the specification of how
blocks of verbatim code should be typeset in LaTeX. Before 2015,
DocOnce always translated to the <code class="docutils literal"><span class="pre">.p.tex</span></code> syntax and required the
use of <code class="docutils literal"><span class="pre">ptex2tex</span></code> or <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code>. Now, one can choose a direct
translation, which is simpler and actually more versatile than even
using the <code class="docutils literal"><span class="pre">ptex2tex</span></code> program.</p>
<p>Direct translation is specified by the <code class="docutils literal"><span class="pre">--latex_code_style=</span></code> command-line
option. A separate document, <a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/latexcode/demo.html">Demonstration of DocOnce support for LaTeX code block environments</a>, describes how this option is used and the demonstrates
many possibilities that are available.
The <code class="docutils literal"><span class="pre">--latex_code_style=</span></code> option makes the use of <code class="docutils literal"><span class="pre">ptex2tex</span></code> or
<code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code> redundant.</p>
</div>
<div class="section" id="the-old-ptex2tex-step">
<h3>The old <code class="docutils literal"><span class="pre">ptex2tex</span></code> step<a class="headerlink" href="#the-old-ptex2tex-step" title="Permalink to this headline">¶</a></h3>
<p>Here, we describe the old translation via a <code class="docutils literal"><span class="pre">.p.tex</span></code> file.
New users should jump over this information and use
the <code class="docutils literal"><span class="pre">--latex_code_style=</span></code> option to specify verbatim code environments.</p>
<p>First we
compile the DocOnce source to the <code class="docutils literal"><span class="pre">ptex2tex</span></code> format, and then we compile
the <code class="docutils literal"><span class="pre">ptex2tex</span></code> format to standard LaTeX.
The <a class="reference external" href="http://code.google.com/p/ptex2tex">ptex2tex</a> format can be
viewed as an extended LaTeX. For DocOnce users, the <code class="docutils literal"><span class="pre">ptex2tex</span></code> format
essentially means that the file consists of</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">if-else</span></code> statements for the <code class="docutils literal"><span class="pre">preprocess</span></code> processor such that
LaTeX constructions can be activated or deactivated, and</li>
<li>all code environments can be typeset according to a <code class="docutils literal"><span class="pre">.ptex2tex.cfg</span></code>
configuration file.</li>
</ol>
<p>Point 2 is only of interest if you aim to use a special computer code
formatting that requires you to use a configuration file and
the <code class="docutils literal"><span class="pre">ptex2tex</span></code> program.</p>
<p>The reason for generating <code class="docutils literal"><span class="pre">ptex2tex</span></code> and not standard LaTeX directly
from DocOnce was that the <code class="docutils literal"><span class="pre">ptex2tex</span></code> format shows a range of possible
LaTeX constructions for controlling the layout. It can be instructive
for LaTeX users to look at this code before choosing specific parts
for some desired layout. Experts may also want to edit this code
(which should be automated by a script such that the edits can be
repeated when the DocOnce source is modified, see Step 2b below).
(Direct control of the LaTeX layout in the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> program
would not spit out alternative LaTeX constructs as is now done through
the <code class="docutils literal"><span class="pre">ptex2tex</span></code> step.)</p>
<p>Going from <code class="docutils literal"><span class="pre">ptex2tex</span></code> format to standard LaTeX format is enabled by
either the <code class="docutils literal"><span class="pre">ptex2tex</span></code> program or DocOnce&#8217;s (simplified) version of it:
<code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code>.</p>
<div class="admonition-inline-verbatim-tries-to-use-texttt-and-not-verb-if-possible admonition">
<p class="first admonition-title">Inline verbatim tries to use <code class="docutils literal"><span class="pre">texttt</span></code> and not <code class="docutils literal"><span class="pre">Verb</span></code> if possible</p>
<p>Inline verbatim
code, typeset with backticks in DocOnce, is translated to</p>
<div class="highlight-text"><div class="highlight"><pre>\Verb!text!
</pre></div>
</div>
<p class="last">or similar constructions with other delimiters if the pipe is used in <code class="docutils literal"><span class="pre">text</span></code>.
Thereafter, if <code class="docutils literal"><span class="pre">text</span></code> does not contain illegal characters for the <code class="docutils literal"><span class="pre">\texttt</span></code>
command, the latter is used instead since then LaTeX can insert
linebreaks in the inline verbatim text and hence avoid overfull hboxes.</p>
</div>
</div>
<div class="section" id="latex-pdf-generate-latex-step-1">
<span id="do2any-latex-compile1"></span><h3>LaTeX-PDF: Generate LaTeX (Step 1)<a class="headerlink" href="#latex-pdf-generate-latex-step-1" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-177"></span><div class="section" id="the-translation-command">
<span id="index-178"></span><h4>The translation command<a class="headerlink" href="#the-translation-command" title="Permalink to this headline">¶</a></h4>
<p>Filter the doconce text directly to valid LaTeX using
the <code class="docutils literal"><span class="pre">--latex_code_style=</span></code> option:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format pdflatex mydoc --latex_code_style=vrb
</pre></div>
</div>
<p>Without <code class="docutils literal"><span class="pre">--latex_code_style=</span></code>, the output will be a <code class="docutils literal"><span class="pre">mydoc.p.tex</span></code> file
that has to be converted to a standard <code class="docutils literal"><span class="pre">mydoc.tex</span></code> LaTeX file via
the programs <code class="docutils literal"><span class="pre">ptex2tex</span></code> or <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code>.</p>
</div>
<div class="section" id="id36">
<h4>Newcommands<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h4>
<p>LaTeX-specific commands (&#8220;newcommands&#8221;) in math formulas and similar
can be placed in files <code class="docutils literal"><span class="pre">newcommands.tex</span></code>, <code class="docutils literal"><span class="pre">newcommands_keep.tex</span></code>, or
<code class="docutils literal"><span class="pre">newcommands_replace.tex</span></code> (see the section <a class="reference internal" href="#newcommands"><span class="std std-ref">Macros (Newcommands)</span></a>).
If these files are present, they are included in the LaTeX document
so that your commands are defined.</p>
</div>
<div class="section" id="output-for-paper-vs-screen">
<h4>Output for paper vs screen<a class="headerlink" href="#output-for-paper-vs-screen" title="Permalink to this headline">¶</a></h4>
<p>An option <code class="docutils literal"><span class="pre">--device=paper</span></code> makes some adjustments for documents
aimed at being printed. For example, links to web resources are
associated with a footnote listing the complete web address (URL).
(Very long URLs in footnotes can be shortened using services such
as <a class="reference external" href="http://goo.gl/">http://goo.gl/</a>, <a class="reference external" href="http://tinyurl.com/">http://tinyurl.com/</a>, and
<a class="reference external" href="https://bitly.com/">https://bitly.com/</a>.)
The default, <code class="docutils literal"><span class="pre">--device=screen</span></code>, creates a PDF file for reading
on a screen where links are just clickable.</p>
</div>
<div class="section" id="command-line-options">
<span id="index-179"></span><h4>Command-line options<a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h4>
<p>There are many additional options (run <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">--help</span></code> and
look for options starting with <code class="docutils literal"><span class="pre">--latex</span></code> to get a more verbose description):</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">--latex_code_style=lst,vrb,pyg</span></code></li>
<li><code class="docutils literal"><span class="pre">--latex_font=helvetica,palatino</span></code></li>
<li><code class="docutils literal"><span class="pre">--latex_papersize=a4,a6</span></code></li>
<li><code class="docutils literal"><span class="pre">--latex_bibstyle=plain</span></code> (name of BibTeX style)</li>
<li><code class="docutils literal"><span class="pre">--latex_title_layout=titlepage,</span> <span class="pre">std,</span> <span class="pre">beamer,</span> <span class="pre">doconce_heading,</span> <span class="pre">Springer_collection</span></code></li>
<li><code class="docutils literal"><span class="pre">--latex_style=std,</span> <span class="pre">Springer_sv,</span> <span class="pre">Springer_lncse,</span> <span class="pre">Springer_llncs,</span> <span class="pre">Springer_lnup,</span> <span class="pre">Springer_T2,</span> <span class="pre">Springer_T4,</span> <span class="pre">siamltex,</span> <span class="pre">siamltexmm,</span> <span class="pre">elsevier</span></code></li>
<li><code class="docutils literal"><span class="pre">--latex_packages=package1,package2,package3</span></code> (list of extra packages to be included <a class="footnote-reference" href="#varioref" id="id37">[4]</a>)</li>
<li><code class="docutils literal"><span class="pre">--draft</span></code> (turns on draft mode in documentclass, otherwise final mode)</li>
<li><code class="docutils literal"><span class="pre">--latex_copyright=everypage,titlepages</span></code> (copyright on every page or on titlepage and chapter pages)</li>
<li><code class="docutils literal"><span class="pre">--latex_list_of_exercises=loe,toc,none</span></code> (LaTeX list of exercises, integrated into the table of contents, or no list)</li>
<li><code class="docutils literal"><span class="pre">--latex_fancy_header</span></code> (chapter/section headings at top of pages, style depends on value of <code class="docutils literal"><span class="pre">--latex_section_headings</span></code>)</li>
<li><code class="docutils literal"><span class="pre">--latex_section_headings=std,blue,strongblue,gray,gray-wide</span></code> (standard LaTeX, blue headings, strong blue headings, white in gray box, white in gray box that fills the page width)</li>
<li><code class="docutils literal"><span class="pre">--latex_table_format=quote,</span> <span class="pre">center,</span> <span class="pre">footnotesize,</span> <span class="pre">tiny</span></code> (environment around tables)</li>
<li><code class="docutils literal"><span class="pre">--latex_colored_table_rows=blue,</span> <span class="pre">gray,</span> <span class="pre">no</span></code> (color of every two lines in tables)</li>
<li><code class="docutils literal"><span class="pre">--latex_todonotes</span></code> (inline comments typeset as &#8220;bubbles&#8221;)</li>
<li><code class="docutils literal"><span class="pre">--latex_double_spacing</span></code> (to ease hand-writing between the lines)</li>
<li><code class="docutils literal"><span class="pre">--latex_line_numbers</span></code> (to ease references to sentences)</li>
<li><code class="docutils literal"><span class="pre">--latex_labels_in_margin</span></code> (name of section, equation, citation labels in the margin)</li>
<li><code class="docutils literal"><span class="pre">--latex_preamble=filename</span></code> (user-specific preamble)</li>
<li><code class="docutils literal"><span class="pre">--latex_admon=mdfbox,</span> <span class="pre">graybox2,</span> <span class="pre">grayicon,</span> <span class="pre">yellowicon,</span> <span class="pre">paragraph,</span> <span class="pre">colors1,</span> <span class="pre">colors2</span></code></li>
<li><code class="docutils literal"><span class="pre">--latex_admon_color=0.34,0.02,0.8</span></code> (background color in admons)</li>
<li><code class="docutils literal"><span class="pre">--latex_admon_envir_map=2</span></code> (code environment names in admons)</li>
<li><code class="docutils literal"><span class="pre">--exercise_numbering=absolute,</span> <span class="pre">chapter</span></code></li>
<li><code class="docutils literal"><span class="pre">--latex_movie=media9,</span> <span class="pre">href,</span> <span class="pre">multimedia,</span> <span class="pre">movie15</span></code> (control typesetting of movies)</li>
<li><code class="docutils literal"><span class="pre">--latex_movie_controls=on</span></code></li>
<li><code class="docutils literal"><span class="pre">--latex_external_movie_viewer</span></code> (for <code class="docutils literal"><span class="pre">movie15</span></code> package)</li>
<li><code class="docutils literal"><span class="pre">--xelatex</span></code> (prepare for XeLaTeX)</li>
</ul>
</div></blockquote>
<p>The overall LaTeX style is much governed by <code class="docutils literal"><span class="pre">--latex_title_layout</span></code> and
<code class="docutils literal"><span class="pre">--latex_style</span></code>.  For the former, <code class="docutils literal"><span class="pre">titlepage</span></code> gives a separate title
page; <code class="docutils literal"><span class="pre">std</span></code> is just standard LaTeX handling of title, author, and
date; <code class="docutils literal"><span class="pre">doconce_heading</span></code> is a more modern heading,
<code class="docutils literal"><span class="pre">Springer_collection</span></code> is used with <code class="docutils literal"><span class="pre">--latex_style=Springer_lncse</span></code> for
an edited book; <code class="docutils literal"><span class="pre">beamer</span></code> is needed if the DocOnce document is to be
translated to LaTeX Beamer slides. For <code class="docutils literal"><span class="pre">--latex_style</span></code>, <code class="docutils literal"><span class="pre">std</span></code> gives
standard LaTeX behavior; <code class="docutils literal"><span class="pre">Springer_lncse</span></code> is for Springer&#8217;s LNCSE book
series style (to be used with
<code class="docutils literal"><span class="pre">--latex_title_layout=Springer_collection</span></code> if the book is an edited
book); <code class="docutils literal"><span class="pre">Springer_llncs</span></code> is for Springer&#8217;s Lecture Notes in Computer
Science series (normally an edited book that also requres
<code class="docutils literal"><span class="pre">--latex_title_layout=Springer_collection</span></code>); <code class="docutils literal"><span class="pre">Springer_lnup</span></code> for
Springer&#8217;s Lecture Notes for Undergraduate Physics books,
<code class="docutils literal"><span class="pre">Springer_T2</span></code> for Springer&#8217;s T2 book layout, <code class="docutils literal"><span class="pre">siamltex</span></code>, for the LaTeX
style of papers in standard SIAM journals (also used far beyond SIAM
journals and requires the stylefiles <code class="docutils literal"><span class="pre">siamltex.cls</span></code> and <code class="docutils literal"><span class="pre">siam10.clo</span></code>),
<code class="docutils literal"><span class="pre">siamltexmm</span></code> for the new multimedia SIAM journal style (requires
<code class="docutils literal"><span class="pre">siamltex.cls</span></code> and <code class="docutils literal"><span class="pre">siam10.clo</span></code>), <code class="docutils literal"><span class="pre">elsevier</span></code> for the style of papers
to be submitted to Elsevier journals (<code class="docutils literal"><span class="pre">--latex_elsevier_journal=</span></code> can
be used to set the journal name, and the style requires
<code class="docutils literal"><span class="pre">elsarticle.cls</span></code> and <code class="docutils literal"><span class="pre">elsarticle-num.bst</span></code>).</p>
<table class="docutils footnote" frame="void" id="varioref" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id37">[4]</a></td><td>Listing <code class="docutils literal"><span class="pre">varioref</span></code> in as package
automatically leads to references with page numbers, if the element referred to
is not on the same page. This is often very helpful, e.g., &#8220;see
Figure 5.3 on page 67&#8221;.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="syntax-highlighting">
<span id="index-180"></span><h4>Syntax highlighting<a class="headerlink" href="#syntax-highlighting" title="Permalink to this headline">¶</a></h4>
<p>The style of verbatim blocks of computer code is specified by
<code class="docutils literal"><span class="pre">--latex_code_style=X</span></code>, where <code class="docutils literal"><span class="pre">X</span></code> can be set in a very flexible way.
There are three main values, corresponding to three LaTeX tools
for verbatim type setting:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">vrb</span></code> for plain <code class="docutils literal"><span class="pre">Verbatim</span></code> style (<code class="docutils literal"><span class="pre">fancyvrb</span></code> LaTeX package)</li>
<li><code class="docutils literal"><span class="pre">pyg</span></code> for the Pygments style (<code class="docutils literal"><span class="pre">mintex</span></code> LaTeX package)</li>
<li><code class="docutils literal"><span class="pre">lst</span></code> for the Listings styles (<code class="docutils literal"><span class="pre">listingsutf8</span></code> LaTeX package)</li>
</ul>
</div></blockquote>
<p>A separate <a class="reference external" href="http://hplgit.github.io/doconce/doc/pub/latexcode/demo.html">demo</a> explains
the many possible settings of <code class="docutils literal"><span class="pre">X</span></code>. Popular choices are minimalistic
plain verbatim,</p>
<div class="highlight-text"><div class="highlight"><pre>--latex_code_style=vrb
</pre></div>
</div>
<p>maybe with an added light blue background color,</p>
<div class="highlight-text"><div class="highlight"><pre>--latex_code_style=vrb-blue1
</pre></div>
</div>
<p>or the default Pygments style,</p>
<div class="highlight-text"><div class="highlight"><pre>--latex_code_style=pyg
</pre></div>
</div>
<p>or the Listings-based style with yellow background color</p>
<div class="highlight-text"><div class="highlight"><pre>--latex_code_style=lst-yellow2
</pre></div>
</div>
<p>It is easy to specify different styles for different code environments, say
blue background with plain verbatim style for code but a special terminal
window for the <code class="docutils literal"><span class="pre">sys</span></code> environment:</p>
<div class="highlight-text"><div class="highlight"><pre>&quot;--latex_code_style=default:vrb-blue1@
sys:vrb[frame=lines,label=\\fbox{{\tiny Terminal}},
framesep=2.5mm,framerule=0.7pt,fontsize=\fontsize{9pt}{9pt}]&quot;
</pre></div>
</div>
<p>(but no linebreaks, as here, they are for formatting this document only).</p>
</div>
<div class="section" id="drafts">
<h4>Drafts<a class="headerlink" href="#drafts" title="Permalink to this headline">¶</a></h4>
<p>During development of a manuscript, may prefer line numbers, double line spacing, frequent use of inline comments, and label names printed in the margin.
This is enabled by the options <code class="docutils literal"><span class="pre">--latex_line_numbers</span> <span class="pre">--latex_double_spacing</span> <span class="pre">--latex_todonotes</span> <span class="pre">--latex_labels_in_margin</span></code>. One may also (automatically) edit the
<code class="docutils literal"><span class="pre">final</span></code> argument in the <code class="docutils literal"><span class="pre">documentclass</span></code> heading to <code class="docutils literal"><span class="pre">draft</span></code> as this will
mark overful lines (hboxes).</p>
</div>
<div class="section" id="potential-problems-with-ampersand">
<h4>Potential problems with ampersand<a class="headerlink" href="#potential-problems-with-ampersand" title="Permalink to this headline">¶</a></h4>
<p>Another useful option for LaTeX documents is <code class="docutils literal"><span class="pre">--no_ampersand_quote</span></code>, which
prevents ampersands from getting a backskash. This is necessary if one
inserts native latex code for tables
inside <code class="docutils literal"><span class="pre">%</span> <span class="pre">if</span> <span class="pre">FORMAT</span> <span class="pre">in</span> <span class="pre">('latex',</span> <span class="pre">'pdflatex'):</span></code> (or similar <code class="docutils literal"><span class="pre">preprocess</span></code> syntax)
tests.</p>
</div>
<div class="section" id="part-2-of-step-1-outdated">
<h4>Part 2 of Step 1 (outdated)<a class="headerlink" href="#part-2-of-step-1-outdated" title="Permalink to this headline">¶</a></h4>
<p>In case you <em>did not</em> specify the <code class="docutils literal"><span class="pre">--latex_code_style=</span></code> option,
you must run <code class="docutils literal"><span class="pre">ptex2tex</span></code> (if you have installed the
Python ptex2tex package) to make a standard LaTeX file,</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; ptex2tex mydoc
</pre></div>
</div>
<p>If you do not have <code class="docutils literal"><span class="pre">ptex2tex</span></code>, or do not bother to make the required
configuration file for <code class="docutils literal"><span class="pre">ptex2tex</span></code> (you may of course rely on the default
file), a (simplified) version of <code class="docutils literal"><span class="pre">ptex2tex</span></code>
that comes with DocOnce can be run:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce ptex2tex mydoc
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">ptex2tex</span></code> command can set two preprocessor variables:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">PREAMBLE</span></code> to turn the LaTeX preamble on or off (i.e., complete document
or document to be included elsewhere - and note that
the preamble is only included
if the document has a title, author, and date)</li>
<li><code class="docutils literal"><span class="pre">MINTED</span></code> for inclusion of the minted package for typesetting of
code with the Pygments tool (which requires <code class="docutils literal"><span class="pre">latex</span></code>
or <code class="docutils literal"><span class="pre">pdflatex</span></code> to be run with the <code class="docutils literal"><span class="pre">-shell-escape</span></code> option); not used
for <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code> only in the <code class="docutils literal"><span class="pre">ptex2tex</span></code> program</li>
</ul>
</div></blockquote>
<p>If you are not satisfied with the generated DocOnce preamble, you can provide
your own preamble by adding the command-line option <code class="docutils literal"><span class="pre">--latex_preamble=myfile</span></code>.
In case <code class="docutils literal"><span class="pre">myfile</span></code> contains a documentclass definition, DocOnce assumes
that the file contains the <em>complete</em> preamble you want (not that all
the packages listed in the default preamble are required and must be
present in <code class="docutils literal"><span class="pre">myfile</span></code>). Otherwise, <code class="docutils literal"><span class="pre">myfile</span></code> is assumed to contain
<em>additional</em> LaTeX code to be added to the DocOnce default preamble.</p>
<p>The <code class="docutils literal"><span class="pre">ptex2tex</span></code> tool makes it possible to easily switch between many
different fancy formattings of computer code in LaTeX documents. After
any <code class="docutils literal"><span class="pre">!bc</span></code> command in the DocOnce source you can insert verbatim block
styles as defined in your <code class="docutils literal"><span class="pre">.ptex2tex.cfg</span></code> file, e.g., <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">sys</span></code> for a
terminal session, where <code class="docutils literal"><span class="pre">sys</span></code> is set to a certain environment in
<code class="docutils literal"><span class="pre">.ptex2tex.cfg</span></code> (e.g., <code class="docutils literal"><span class="pre">CodeTerminal</span></code>).  There are about 40 styles to
choose from, and you can easily add new ones.</p>
<p>The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code> allows specifications
of code environments as well. Here is an example:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce ptex2tex mydoc \
          &quot;sys=\begin{quote}\begin{verbatim}@\end{verbatim}\end{quote}&quot; \
          fpro=minted fcod=minted shcod=Verbatim envir=ans:nt
</pre></div>
</div>
<p>Note that <code class="docutils literal"><span class="pre">&#64;</span></code> must be used to separate the begin and end LaTeX
commands, unless only the environment name is given (such as <code class="docutils literal"><span class="pre">minted</span></code>
above, which implies <code class="docutils literal"><span class="pre">\begin{minted}{fortran}</span></code> and <code class="docutils literal"><span class="pre">\end{minted}</span></code> as
begin and end for blocks inside <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">fpro</span></code> and <code class="docutils literal"><span class="pre">!ec</span></code>).  Specifying
<code class="docutils literal"><span class="pre">envir=ans:nt</span></code> means that all other environments are typeset with the
<code class="docutils literal"><span class="pre">anslistings.sty</span></code> package, e.g., <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">cppcod</span></code> will then result in
<code class="docutils literal"><span class="pre">\begin{c++}</span></code>. A predefined shortcut as in <code class="docutils literal"><span class="pre">shcod=Verbatim-0.85</span></code>
results in denser
vertical spacing (baselinestretch 0.85 in LaTeX terminology), and
<code class="docutils literal"><span class="pre">shcod=Verbatim-indent</span></code> implies indentation of the verbatim text.
Alternatively, one can provide all desired parameters
<code class="docutils literal"><span class="pre">\begin{Verbatim}</span></code> instruction using the syntax illustrated for
the <code class="docutils literal"><span class="pre">sys</span></code> environments above.</p>
<p>If no environments like <code class="docutils literal"><span class="pre">sys</span></code>, <code class="docutils literal"><span class="pre">fpro</span></code>, or the common
<code class="docutils literal"><span class="pre">envir</span></code> are defined on the command line, the plain <code class="docutils literal"><span class="pre">\begin{Verbatim}</span></code>
and <code class="docutils literal"><span class="pre">\end{Verbatim}</span></code> instructions are used.</p>
</div>
</div>
<div class="section" id="latex-pdf-edit-the-latex-file-step-2-optional">
<span id="do2any-latex-compile2"></span><h3>LaTeX-PDF: Edit the LaTeX File (Step 2, Optional)<a class="headerlink" href="#latex-pdf-edit-the-latex-file-step-2-optional" title="Permalink to this headline">¶</a></h3>
<p>You can <em>edit</em> the <code class="docutils literal"><span class="pre">mydoc.tex</span></code> file to your needs.
For example, you may want to substitute <code class="docutils literal"><span class="pre">section</span></code> by <code class="docutils literal"><span class="pre">section*</span></code> to
avoid numbering of sections, you may want to insert linebreaks
(and perhaps space) in the title, etc. This can be automatically
edited with the aid of the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">replace</span></code> and <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">subst</span></code>
commands. The former works with substituting text directly, while the
latter performs substitutions using regular expressions.
You will use <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">replace</span></code> to edit <code class="docutils literal"><span class="pre">section{</span></code> to <code class="docutils literal"><span class="pre">section*{</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce replace &#39;section{&#39; &#39;section*{&#39; mydoc.tex
</pre></div>
</div>
<p>For fixing the line break of a title, you may pick a word in the
title, say &#8220;Using&#8221;, and insert a break after than word. With
<code class="docutils literal"><span class="pre">doconce</span> <span class="pre">subst</span></code> this is easy employing regular expressions with
a group before &#8220;Using&#8221; and a group after:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce subst &#39;title\{(.+)Using (.+)\}&#39; \
          &#39;title{\g&lt;1&gt; \\\\ [1.5mm] Using \g&lt;2&gt;&#39; mydoc.tex
</pre></div>
</div>
<p>A lot of tailored fixes to the LaTeX document can be done by
an appropriate set of text replacements and regular expression
substitutions. You are anyway encourged to make a script for
generating PDF from the LaTeX file so the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">subst</span></code> or
<code class="docutils literal"><span class="pre">doconce</span> <span class="pre">replace</span></code> commands can be put inside the script.</p>
</div>
<div class="section" id="latex-pdf-generate-pdf-step-3">
<span id="do2any-latex-compile3"></span><h3>LaTeX-PDF: Generate PDF (Step 3)<a class="headerlink" href="#latex-pdf-generate-pdf-step-3" title="Permalink to this headline">¶</a></h3>
<p>Compile <code class="docutils literal"><span class="pre">mydoc.tex</span></code> and create the PDF file, using <code class="docutils literal"><span class="pre">pdflatex</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; pdflatex mydoc
Terminal&gt; pdflatex mydoc
Terminal&gt; makeindex mydoc   # if index
Terminal&gt; bibtex mydoc      # if bibliography
Terminal&gt; pdflatex mydoc
</pre></div>
</div>
<p>One can also compile <code class="docutils literal"><span class="pre">mydoc</span></code> the &#8220;old way&#8221; with <code class="docutils literal"><span class="pre">latex</span></code> and <code class="docutils literal"><span class="pre">dvipdf</span></code>.
Use <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">latex</span></code> in that case and proceed with <code class="docutils literal"><span class="pre">latex</span> <span class="pre">mydoc</span></code>.</p>
<p>If the minted style is used, <code class="docutils literal"><span class="pre">latex</span></code>, <code class="docutils literal"><span class="pre">pdflatex</span></code>, or <code class="docutils literal"><span class="pre">xelatex</span></code>
<em>must</em> be run with the
<code class="docutils literal"><span class="pre">-shell-escape</span></code> option:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; pdflatex -shell-escape mydoc
Terminal&gt; pdflatex -shell-escape mydoc
Terminal&gt; makeindex mydoc   # if index
Terminal&gt; bibtex mydoc      # if bibliography
Terminal&gt; pdflatex -shell-escape mydoc
</pre></div>
</div>
</div>
<div class="section" id="xelatex">
<span id="do2any-xelatex"></span><h3>XeLaTeX<a class="headerlink" href="#xelatex" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-181"></span><p id="index-182">XeLaTeX is an alternative to pdfLaTeX and is run in almost the
same way, except for the <code class="docutils literal"><span class="pre">--xelatex</span></code> flag to <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format pdflatex mydoc --xelatex \
          --latex_code_style=lst
Terminal&gt; xelatex mydoc
</pre></div>
</div>
</div>
<div class="section" id="from-pdf-to-e-book-formats">
<span id="do2any-epub"></span><h3>From PDF to e-book formats<a class="headerlink" href="#from-pdf-to-e-book-formats" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-183"></span><p id="index-184">PDF (as generated from LaTeX above) can be read on most devices today.
However, for Kindle and other devices specialized for e-books you
need to convert to their format. The <a class="reference external" href="http://calibre-ebook.com/">Calibre</a>
program can produce epub, mobi, and other e-book formats from PDF,
see a <a class="reference external" href="http://www.dedoimedo.com/computers/latex-lyx-e-books.html">description</a>.</p>
</div>
<div class="section" id="microsoft-word-or-libreoffice">
<span id="do2any-ms-ooffice"></span><h3>Microsoft Word or LibreOffice<a class="headerlink" href="#microsoft-word-or-libreoffice" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-185"></span><span class="target" id="index-186"></span><p id="index-187">Transforming DocOnce files to Word format is best done with the aid
of <code class="docutils literal"><span class="pre">pandoc</span></code>. A standard way is to first generate the Markdown format
(<code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">pandoc</span></code>) and then use <code class="docutils literal"><span class="pre">pandoc</span></code> to generate a <code class="docutils literal"><span class="pre">.docx</span></code>
file:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format pandoc mydoc
Terminal&gt; pandoc -t docx -o mydoc.docx mydoc.md
</pre></div>
</div>
<p>The transformation works well for simple text files, but LaTeX mathematics
does not work.</p>
</div>
</div>
<div class="section" id="jupyter-ipython-notebooks">
<span id="do2any-ipynb"></span><h2>Jupyter (IPython) Notebooks<a class="headerlink" href="#jupyter-ipython-notebooks" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-188"></span><span class="target" id="index-189"></span><span class="target" id="index-190"></span><p id="index-191">DocOnce can generate json files for the Jupyter Notebook:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format ipynb mydoc  # results in mydoc.ipynb
</pre></div>
</div>
<div class="section" id="hidden-code-blocks">
<h3>Hidden code blocks<a class="headerlink" href="#hidden-code-blocks" title="Permalink to this headline">¶</a></h3>
<p>It is no guarantee that the notebook can be executed. For example,
having the code</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span>
</pre></div>
</div>
<p>will not execute unless <code class="docutils literal"><span class="pre">sys</span></code> is imported. While a book may show such
code and skip (potentially tedious) initializing statements, they must
be present in the notebook. To this end, use the <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">*hid</span></code> environment
for hidden code. In the present example, we use <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">pyhid</span></code> to specify
Python code that needs to be executed, but that should normally be
hidden (other formats, with the exception of certain interactive Sphinx
documents, will hide such code).</p>
<div class="highlight-text"><div class="highlight"><pre>!bc pyhid
import sys
!ec
</pre></div>
</div>
<p>The notebook will feature the <code class="docutils literal"><span class="pre">import</span> <span class="pre">sys</span></code> statement in a cell prior to the
<code class="docutils literal"><span class="pre">print</span> <span class="pre">sys.version</span></code> cell, and the latter will work.</p>
<p>Similarly, if you import from your own modules, say <code class="docutils literal"><span class="pre">from</span> <span class="pre">mymod</span> <span class="pre">import</span> <span class="pre">hello</span></code>,
the <code class="docutils literal"><span class="pre">mymod.py</span></code> must be accessible for the notebook. Suppose this file
is in <code class="docutils literal"><span class="pre">src-test/mymod.py</span></code>. Then you need to add <code class="docutils literal"><span class="pre">src-test</span></code> to <code class="docutils literal"><span class="pre">sys.path</span></code>
for the import statement to work:</p>
<div class="highlight-text"><div class="highlight"><pre>!bc pyhid
sys.path.append(&#39;src-test&#39;)
!ec
</pre></div>
</div>
</div>
<div class="section" id="displaying-code-as-plain-text-instead-of-executable-cells">
<h3>Displaying code as plain text instead of executable cells<a class="headerlink" href="#displaying-code-as-plain-text-instead-of-executable-cells" title="Permalink to this headline">¶</a></h3>
<p>Some code blocks may just be there for explanation and are not
meant to be executed. These can be marked by <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">pycod-t</span></code> (or
<code class="docutils literal"><span class="pre">!bc</span> <span class="pre">Xcod-t</span></code> for any supported programming language <code class="docutils literal"><span class="pre">X</span></code>):</p>
<div class="highlight-text"><div class="highlight"><pre>!bc pycod-t
if isinstance(myvar, float):
    raise TypeError(&#39;myvar must be array, not %s&#39; % type(myvar))
!ec
</pre></div>
</div>
<p>The code segment above will then be typeset as verbatim text and not
an executable cell, and there is no need to worry about a missing
definition of <code class="docutils literal"><span class="pre">myvar</span></code> (which would cause problems in an executable cell).</p>
<p>Interactive sessions with the <code class="docutils literal"><span class="pre">pyshell</span></code> or <code class="docutils literal"><span class="pre">ipy</span></code> environment will
by default be broken up into many cells such that each output command
ends a cell. By executing the cells, the input <em>and</em> output from the
session is recovered. This is usually the behavior that is wanted, but
there is an option <code class="docutils literal"><span class="pre">--ipynb_split_pyshell=off</span></code> that can be used to
typeset the entire session with all input but no output in one cell
(<code class="docutils literal"><span class="pre">print</span></code> statements will lead to output, but plain dumping of
a variable will not lead to output like it does in a Python shell).</p>
<p>To have an interactive session typeset with input and output in plain
text, use the <code class="docutils literal"><span class="pre">-t</span></code> extension to the environment: <code class="docutils literal"><span class="pre">pyshell-t</span></code> and <code class="docutils literal"><span class="pre">ipy-t</span></code>.</p>
</div>
<div class="section" id="figures-2">
<h3>Figures<a class="headerlink" href="#figures-2" title="Permalink to this headline">¶</a></h3>
<p>As with HTML files, you need to ensure that the notebook has access to
figures and source code as requested.</p>
<p>Figures in notebooks can be typeset in various ways, specified by
the <code class="docutils literal"><span class="pre">--ipynb_figure=</span></code> option, with the following values:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">md</span></code>: plain Markdown syntax for a figure, with no possibility to adjust
the size (default)</li>
<li><code class="docutils literal"><span class="pre">imgtag</span></code>: <code class="docutils literal"><span class="pre">&lt;img</span> <span class="pre">...&gt;</span></code> tag in HTML taking the specified width into account</li>
<li><code class="docutils literal"><span class="pre">Image</span></code>: Python notebook cell with <code class="docutils literal"><span class="pre">Image</span></code> object</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="movies-2">
<h3>Movies<a class="headerlink" href="#movies-2" title="Permalink to this headline">¶</a></h3>
<p>Typesetting of movies is specified by <code class="docutils literal"><span class="pre">--ipynb_movie=</span></code>, and valid options
are</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal"><span class="pre">md</span></code>: raw HTML code with <code class="docutils literal"><span class="pre">iframe</span></code> tag - not relevant for the notebook</p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">HTML</span></code>: raw HTML code with <code class="docutils literal"><span class="pre">iframe</span></code> tag</dt>
<dd><p class="first last">embedded in the <code class="docutils literal"><span class="pre">HTML</span></code> object from the notebook (default)</p>
</dd>
</dl>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">HTML-YouTube</span></code>: as <code class="docutils literal"><span class="pre">HTML</span></code> but use an <code class="docutils literal"><span class="pre">IPython.display.YouTubeVideo</span></code>
object to display YouTube videos</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">ipynb</span></code>: use <code class="docutils literal"><span class="pre">IPython.display.YouTubeVideo</span></code> object for YouTube videos,
and use an <code class="docutils literal"><span class="pre">HTML</span></code> object with <code class="docutils literal"><span class="pre">video</span></code> tag for local movies</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="admonitions-2">
<h3>Admonitions<a class="headerlink" href="#admonitions-2" title="Permalink to this headline">¶</a></h3>
<p>Typesetting of admonition is rather primitive in notebooks.
We offer these different choices, set by the
option <code class="docutils literal"><span class="pre">--ipynb_admon=</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">quote</span></code>: typeset admon as Markdown quote (special font and gray vertical bar on
the left)</li>
<li><code class="docutils literal"><span class="pre">paragraph</span></code>: typeset admon as a plain paragraph with a heading if any (default)</li>
<li><code class="docutils literal"><span class="pre">hrule</span></code>: use a horozontal rule to surround the heading and the text</li>
</ul>
</div></blockquote>
<p>Note that quotes in <code class="docutils literal"><span class="pre">!bc</span> <span class="pre">quote</span></code> environments
are always typeset as Markdown quotes.</p>
</div>
<div class="section" id="references-to-an-external-textbook">
<h3>References to an External Textbook<a class="headerlink" href="#references-to-an-external-textbook" title="Permalink to this headline">¶</a></h3>
<p>Sometimes one wants to refer to equations and sections in an external
LaTeX book where a <code class="docutils literal"><span class="pre">book.aux</span></code> file is available. The references in the
notebook to the LaTeX book can then be hardcoded from the <code class="docutils literal"><span class="pre">book.aux</span></code> file
with this construction:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format ipynb mydoc \
          --replace_ref_by_latex_auxno=book.aux
</pre></div>
</div>
</div>
</div>
<div class="section" id="matlab-notebooks">
<span id="do2any-matlabnb"></span><h2>Matlab Notebooks<a class="headerlink" href="#matlab-notebooks" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-192"></span><span class="target" id="index-193"></span><span class="target" id="index-194"></span><p id="index-195">The Matlab <em>publish</em> format is aimed at notebooks, but the markup is
quite primitive, so only a small subset of DocOnce markup can translate
successfully to the Matlab publish format. However, if you write within
that subset, it is easy to create notebooks in DocOnce that can translate
both to Python and Matlab (use preprocessor directives or Mako functions
to include Matlab or Python code, depending on the output format).</p>
<p>The Matlab publish format is called <code class="docutils literal"><span class="pre">matlabnb</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format matlabnb mydoc
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">--replace_ref_by_latex_auxno=</span></code> option for referring to equations
and sections in a textbook, as explained at the end of the section on
Jupyter/IPython notebooks, also works with Matlab notebooks (and for
any other output format):</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format matlabnb mydoc \
          --replace_ref_by_latex_auxno=book.aux
</pre></div>
</div>
</div>
<div class="section" id="plain-ascii-text">
<span id="do2any-ascii"></span><h2>Plain ASCII Text<a class="headerlink" href="#plain-ascii-text" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-196"></span><span class="target" id="index-197"></span><span class="target" id="index-198"></span><p id="index-199">We can go from DocOnce &#8220;back to&#8221; plain untagged text suitable for viewing
in terminal windows, inclusion in email text, or for insertion in
computer source code:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format plain mydoc.do.txt  # results in mydoc.txt
</pre></div>
</div>
</div>
<div class="section" id="restructuredtext">
<span id="do2any-rst"></span><h2>reStructuredText<a class="headerlink" href="#restructuredtext" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-200"></span><p id="index-201">Going from DocOnce to reStructuredText gives a lot of possibilities to
go to other formats. First we filter the DocOnce text to a
reStructuredText file <code class="docutils literal"><span class="pre">mydoc.rst</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format rst mydoc.do.txt
</pre></div>
</div>
<p>We may now produce various other formats:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; rst2html.py  mydoc.rst &gt; mydoc.html # html
Terminal&gt; rst2latex.py mydoc.rst &gt; mydoc.tex  # latex
Terminal&gt; rst2xml.py   mydoc.rst &gt; mydoc.xml  # XML
Terminal&gt; rst2odt.py   mydoc.rst &gt; mydoc.odt  # OpenOffice
</pre></div>
</div>
<p>The OpenOffice file <code class="docutils literal"><span class="pre">mydoc.odt</span></code> can be loaded into OpenOffice and
saved in, among other things, the RTF format or the Microsoft Word format.
However, it is more convenient to use the program <code class="docutils literal"><span class="pre">unovonv</span></code>
to convert between the many formats OpenOffice supports <em>on the command line</em>.
Run</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; unoconv --show
</pre></div>
</div>
<p>to see all the formats that are supported.
For example, the following commands take
<code class="docutils literal"><span class="pre">mydoc.odt</span></code> to Microsoft Office Open XML format,
classic MS Word format, and PDF:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; unoconv -f ooxml mydoc.odt
Terminal&gt; unoconv -f doc mydoc.odt
Terminal&gt; unoconv -f pdf mydoc.odt
</pre></div>
</div>
<p><strong>Remark about Mathematical Typesetting.</strong>
At the time of this writing, there is no easy way to go from DocOnce
and LaTeX mathematics to reST and further to OpenOffice and the
&#8220;MS Word world&#8221;. Mathematics is only fully supported by <code class="docutils literal"><span class="pre">latex</span></code> as
output and to a wide extent also supported by the <code class="docutils literal"><span class="pre">sphinx</span></code> output format.
Some links for going from LaTeX to Word are listed below.</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://ubuntuforums.org/showthread.php?t=1033441">http://ubuntuforums.org/showthread.php?t=1033441</a></li>
<li><a class="reference external" href="http://tug.org/utilities/texconv/textopc.html">http://tug.org/utilities/texconv/textopc.html</a></li>
<li><a class="reference external" href="http://nileshbansal.blogspot.com/2007/12/latex-to-openofficeword.html">http://nileshbansal.blogspot.com/2007/12/latex-to-openofficeword.html</a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="sphinx">
<span id="do2any-sphinx"></span><h2>Sphinx<a class="headerlink" href="#sphinx" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-202"></span><div class="section" id="the-basic-steps">
<span id="index-203"></span><h3>The Basic Steps<a class="headerlink" href="#the-basic-steps" title="Permalink to this headline">¶</a></h3>
<p>Sphinx documents demand quite some steps in their creation. We have automated
most of the steps through the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinx_dir</span></code> command:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce sphinx_dir version=1.0 dirname=sphinxdir \
          theme=sometheme mydoc short_title=&quot;short title&quot; mydoc
</pre></div>
</div>
<p>The author, title, and copyright information needed by Sphinx is
taken from the DocOnce file <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code>.
By default, <code class="docutils literal"><span class="pre">version</span></code> is 1.0 and
<code class="docutils literal"><span class="pre">dirname</span></code> is <code class="docutils literal"><span class="pre">sphinx-rootdir</span></code>. The <code class="docutils literal"><span class="pre">theme</span></code>
keyword is used to set the theme for design of HTML output from
Sphinx (the default theme is <code class="docutils literal"><span class="pre">classic</span></code>).</p>
<p>There are more options for the <code class="docutils literal"><span class="pre">sphinx_dir</span></code> command: <code class="docutils literal"><span class="pre">--runestone</span></code>
for Runestone Interactive books, <code class="docutils literal"><span class="pre">toc_depth=</span></code> for setting the depth
of the table of contents, <code class="docutils literal"><span class="pre">intersphinx</span></code> for allowing the document to
link automatically to other Sphinx documents, <code class="docutils literal"><span class="pre">conf.py=</span></code> for specifying
a tailored <code class="docutils literal"><span class="pre">conf.py</span></code> file, <code class="docutils literal"><span class="pre">logo=</span></code> and <code class="docutils literal"><span class="pre">favicon=</span></code> for specifying logo
and favicon files.</p>
<p>One often just runs the simple command</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce sphinx_dir mydoc
</pre></div>
</div>
<p>which creates the Sphinx directory <code class="docutils literal"><span class="pre">sphinx-rootdir</span></code> with
relevant files.</p>
<p>The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinx_dir</span></code> command generates a script
<code class="docutils literal"><span class="pre">automake_sphinx.py</span></code> for compiling the Sphinx document into an HTML
document.  Run</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; python automake_sphinx.py
</pre></div>
</div>
<p>As the output also tells, you can see the Sphinx HTML version of the document
by running</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; google-chrome sphinx-rootdir/_build/html/index.html
</pre></div>
</div>
<p>or loading the <code class="docutils literal"><span class="pre">index.html</span></code> file manually into your favorite web browser.</p>
<p>If you cycle through editing the DocOnce file and watching the
HTML output, you should observe that <code class="docutils literal"><span class="pre">automake_sphinx.py</span></code> does not
recompile the DocOnce file if the Sphinx <code class="docutils literal"><span class="pre">.rst</span></code> version already exists.
In each edit-and-watch cycle do</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; rm mydoc.rst; python automake_sphinx.py
</pre></div>
</div>
<div class="admonition-tip admonition">
<p class="first admonition-title">Tip</p>
<p class="last">If you are new
to Sphinx and end up producing quite some Sphinx documents, you are encouraged
to read the Sphinx documentation and study the <code class="docutils literal"><span class="pre">automake_sphinx.py</span></code>
file. Maybe you want to do things differently.</p>
</div>
<p>The following paragraphs describes the many possibilities for steering
the Sphinx output.</p>
</div>
<div class="section" id="links">
<h3>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">automake_sphinx.py</span></code> script copies directories named <code class="docutils literal"><span class="pre">fig*</span></code>
over to the Sphinx directory so that figures are accessible
in the Sphinx compilation.  It also examines <code class="docutils literal"><span class="pre">MOVIE:</span></code> and <code class="docutils literal"><span class="pre">FIGURE:</span></code>
commands in the DocOnce file to find other image files and copies
these too. I strongly recommend to put files
to which there are local links (not <code class="docutils literal"><span class="pre">http:</span></code> or <code class="docutils literal"><span class="pre">file:</span></code> URLs) in
a directory named <code class="docutils literal"><span class="pre">_static</span></code>. The <code class="docutils literal"><span class="pre">automake_sphinx.py</span></code> copies
<code class="docutils literal"><span class="pre">_static*</span></code> to the Sphinx directory, which guarantees that the links
to the local files will work in the Sphinx document.</p>
<p>There is a utility <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinxfix_localURLs</span></code> for checking links to
local files and moving the files to <code class="docutils literal"><span class="pre">_static</span></code> and changing the links
accordingly. For example, a link to <code class="docutils literal"><span class="pre">dir1/dir2/myfile.txt</span></code> is changed
to <code class="docutils literal"><span class="pre">_static/myfile.txt</span></code> and <code class="docutils literal"><span class="pre">myfile.txt</span></code> is copied to <code class="docutils literal"><span class="pre">_static</span></code>.
However, I recommend instead that you manually copy
files to <code class="docutils literal"><span class="pre">_static</span></code> when you want to link to them, or let your
script which compiles the DocOnce document do it automatically.</p>
</div>
<div class="section" id="themes-2">
<span id="index-204"></span><h3>Themes<a class="headerlink" href="#themes-2" title="Permalink to this headline">¶</a></h3>
<p>DocOnce comes with a rich collection of HTML themes for Sphinx documents,
much larger than what is found in the standard Sphinx distribution.
Additional themes include
<code class="docutils literal"><span class="pre">agni</span></code>,
<code class="docutils literal"><span class="pre">alabaster</span></code>,
<code class="docutils literal"><span class="pre">basic</span></code>,
<code class="docutils literal"><span class="pre">basicstrap</span></code>,
<code class="docutils literal"><span class="pre">bootstrap</span></code>,
<code class="docutils literal"><span class="pre">cloud</span></code>,
<code class="docutils literal"><span class="pre">epub</span></code>,
<code class="docutils literal"><span class="pre">fenics</span></code>,
<code class="docutils literal"><span class="pre">fenics_minimal</span></code>,
<code class="docutils literal"><span class="pre">flask</span></code>,
<code class="docutils literal"><span class="pre">haiku</span></code>,
<code class="docutils literal"><span class="pre">jal</span></code>,
<code class="docutils literal"><span class="pre">pylons</span></code>,
<code class="docutils literal"><span class="pre">pyramid</span></code>,
<code class="docutils literal"><span class="pre">redcloud</span></code>,
<code class="docutils literal"><span class="pre">scipy_lectures</span></code>,
<code class="docutils literal"><span class="pre">scrolls</span></code>,
<code class="docutils literal"><span class="pre">slim-agogo</span></code>,
<code class="docutils literal"><span class="pre">sphinx_rtd_theme</span></code>,
and
<code class="docutils literal"><span class="pre">vlinux-theme</span></code>.
Some of the themes come with basic Sphinx, while others must be installed
separately, see the <code class="docutils literal"><span class="pre">bundled/README_sphinx_themes.do.txt</span></code> file in
the DocOnce source code tree for installation instructions.</p>
<p id="index-205">The
<code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinx_dir</span></code> insert lots of extra code in the <code class="docutils literal"><span class="pre">conf.py</span></code>
file to enable easy specification of information and,
in particular,customization of themes.
For example, modules are loaded for the additional themes that
come with DocOnce, code is inserted to allow customization of
the look and feel of themes, etc.</p>
<div class="section" id="using-a-your-own-configuration-file">
<h4>Using a Your Own Configuration File<a class="headerlink" href="#using-a-your-own-configuration-file" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">conf.py</span></code> file is a good starting point for fine-tuning your
favorite theme, and your own <code class="docutils literal"><span class="pre">myconf.py</span></code> file can later be supplied
and used when running <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinx_dir</span></code>: simply add the
command-line option <code class="docutils literal"><span class="pre">conf.py=myconf.py</span></code>. If you leave the <code class="docutils literal"><span class="pre">project</span></code>
and <code class="docutils literal"><span class="pre">copyright</span></code> variables as empty strings in your own <code class="docutils literal"><span class="pre">myconf.py</span></code>
file, DocOnce will automatically edit a copy (<code class="docutils literal"><span class="pre">conf.py</span></code>) of
<code class="docutils literal"><span class="pre">myconf.py</span></code> in the sphinx root directory so that <code class="docutils literal"><span class="pre">project</span></code> becomes the
title of the DocOnce source file, and <code class="docutils literal"><span class="pre">copyright</span></code> is based on the
author or copyright information in the source file. Other variables in
<code class="docutils literal"><span class="pre">myconf.py</span></code> depending on title, author, and copyright information will
also be edited. In this way, you can have your tailored <code class="docutils literal"><span class="pre">conf.py</span></code>
file, and be sure that it is always compatible with title, author, and
copyright information in the underlying DocOnce source.</p>
<p>If a short title is desired, use the <code class="docutils literal"><span class="pre">short_title=</span></code> option as part
of the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinx_dir</span></code> command. This will propagate the short
title to your tailored <code class="docutils literal"><span class="pre">conf.py</span></code> file regardless of what the short
title in that file is.</p>
<p>It is recommended to leave the variables <code class="docutils literal"><span class="pre">latex_documents</span></code>, <code class="docutils literal"><span class="pre">man_pages</span></code>,
and <code class="docutils literal"><span class="pre">texinfo_documents</span></code> as empty lists: <code class="docutils literal"><span class="pre">[]</span></code> in a tailored <code class="docutils literal"><span class="pre">conf.py</span></code> file.</p>
<div class="admonition-tip-error-messages-from-conf-py admonition">
<p class="first admonition-title">Tip: Error messages from <code class="docutils literal"><span class="pre">conf.py</span></code></p>
<p class="last">When you have edited a <code class="docutils literal"><span class="pre">conf.py</span></code> file and supplied it as part of
a <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinx_dir</span></code> command through the <code class="docutils literal"><span class="pre">conf.py=myconf.py</span></code> option, it is
a danger that <code class="docutils literal"><span class="pre">python</span> <span class="pre">automake_sphinx.py</span></code> will abort with an error
message because of a problem with your configuration file.
Note that the error message refers to a line in the <code class="docutils literal"><span class="pre">conf.py</span></code> in the Sphinx
root directory (<code class="docutils literal"><span class="pre">sphinx-rootdir</span></code> by default) and <em>not</em> the configuration
file <code class="docutils literal"><span class="pre">myconf.py</span></code> you created yourself (so make sure you
search in <code class="docutils literal"><span class="pre">sphinx-rootdir/conf.py</span></code> for the error). If the error comes
from some wrong manual editing, make sure you correct the error in
<code class="docutils literal"><span class="pre">myconf.py</span></code>.</p>
</div>
</div>
<div class="section" id="compiling-multiple-themes">
<h4>Compiling Multiple Themes<a class="headerlink" href="#compiling-multiple-themes" title="Permalink to this headline">¶</a></h4>
<p>A script
<code class="docutils literal"><span class="pre">make-themes.sh</span></code> can make HTML documents with one or more themes.
For example,
to realize the themes <code class="docutils literal"><span class="pre">fenics</span></code>, <code class="docutils literal"><span class="pre">pyramid</span></code>, and <code class="docutils literal"><span class="pre">pylon</span></code> one writes</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; ./make-themes.sh fenics pyramid pylon
</pre></div>
</div>
<p>The resulting directories with HTML documents are <code class="docutils literal"><span class="pre">_build/html_fenics</span></code>
and <code class="docutils literal"><span class="pre">_build/html_pyramid</span></code>, respectively. Without arguments,
<code class="docutils literal"><span class="pre">make-themes.sh</span></code> makes all available themes (!). With <code class="docutils literal"><span class="pre">make-themes.sh</span></code>
it is easy to check out various themes to find the one that is most
attractive for your document.</p>
<p>You may supply your own theme and avoid copying all the themes
that come with DocOnce into the Sphinx directory. Just specify
<code class="docutils literal"><span class="pre">theme_dir=path</span></code> on the command line, where <code class="docutils literal"><span class="pre">path</span></code> is the relative
path to the directory containing the Sphinx theme. You must also
specify a configure file by <code class="docutils literal"><span class="pre">conf.py=path</span></code>, where <code class="docutils literal"><span class="pre">path</span></code> is the
relative path to your <code class="docutils literal"><span class="pre">conf.py</span></code> file.</p>
</div>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>Say you like the <code class="docutils literal"><span class="pre">scipy_lectures</span></code> theme, but you want
a table of contents to appear <em>to the right</em>, much in the same style
as in the <code class="docutils literal"><span class="pre">default</span></code> or <code class="docutils literal"><span class="pre">classic</span></code> themes
(where the table of contents is to the left).
You can then run <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinx_dir</span></code>, invoke a text editor with the
<code class="docutils literal"><span class="pre">conf.py</span></code> file, find the line <code class="docutils literal"><span class="pre">html_theme</span> <span class="pre">==</span> <span class="pre">'scipy_lectures'</span></code>,
edit the following <code class="docutils literal"><span class="pre">nosidebar</span></code> to <code class="docutils literal"><span class="pre">false</span></code> and <code class="docutils literal"><span class="pre">rightsidebar</span></code> to <code class="docutils literal"><span class="pre">true</span></code>.
Alternatively, you may write a little script using <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">replace</span></code>
to replace a portion of text in <code class="docutils literal"><span class="pre">conf.py</span></code> by a new one:</p>
<div class="highlight-bash"><div class="highlight"><pre>doconce replace <span class="s2">&quot;elif html_theme == &#39;scipy_lectures&#39;:</span>
<span class="s2">    html_theme_options = {</span>
<span class="s2">        &#39;nosidebar&#39;: &#39;true&#39;,</span>
<span class="s2">        &#39;rightsidebar&#39;: &#39;false&#39;,</span>
<span class="s2">        &#39;sidebarbgcolor&#39;: &#39;#f2f2f2&#39;,</span>
<span class="s2">        &#39;sidebartextcolor&#39;: &#39;#20435c&#39;,</span>
<span class="s2">        &#39;sidebarlinkcolor&#39;: &#39;#20435c&#39;,</span>
<span class="s2">        &#39;footerbgcolor&#39;: &#39;#000000&#39;,</span>
<span class="s2">        &#39;relbarbgcolor&#39;: &#39;#000000&#39;,</span>
<span class="s2">    }&quot;</span> <span class="s2">&quot;elif html_theme == &#39;scipy_lectures&#39;:</span>
<span class="s2">    html_theme_options = {</span>
<span class="s2">        &#39;nosidebar&#39;: &#39;false&#39;,</span>
<span class="s2">        &#39;rightsidebar&#39;: &#39;true&#39;,</span>
<span class="s2">        &#39;sidebarbgcolor&#39;: &#39;#f2f2f2&#39;,</span>
<span class="s2">        &#39;sidebartextcolor&#39;: &#39;#20435c&#39;,</span>
<span class="s2">        &#39;sidebarlinkcolor&#39;: &#39;#20435c&#39;,</span>
<span class="s2">        &#39;footerbgcolor&#39;: &#39;#000000&#39;,</span>
<span class="s2">        &#39;relbarbgcolor&#39;: &#39;#000000&#39;,</span>
<span class="s2">    }&quot;</span> conf.py
</pre></div>
</div>
<p>Obviously, we could also have changed colors in the edit above.
The final alternative is to save the edited <code class="docutils literal"><span class="pre">conf.py</span></code> file somewhere
and reuse it the next time <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinx_dir</span></code> is run</p>
<div class="highlight-text"><div class="highlight"><pre>doconce sphinx_dir theme=scipy_lectures \
                   conf.py=../some/path/conf.py mydoc
</pre></div>
</div>
</div>
</div>
<div class="section" id="runestoneinteractive-books">
<h3>RunestoneInteractive books<a class="headerlink" href="#runestoneinteractive-books" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">sphinx</span></code> command accepts an option <code class="docutils literal"><span class="pre">--runestone</span></code>
for generating <a class="reference external" href="http://runestoneinteractive.org">RunestoneInteractive</a>
books (which build on Sphinx).
You must run the generated <code class="docutils literal"><span class="pre">automake_sphinx.py</span></code> also with a <code class="docutils literal"><span class="pre">--runestone</span></code>
option to generate these type of documents.</p>
</div>
<div class="section" id="the-manual-sphinx-procedure">
<span id="index-206"></span><h3>The manual Sphinx procedure<a class="headerlink" href="#the-manual-sphinx-procedure" title="Permalink to this headline">¶</a></h3>
<p>If it is not desirable to use the autogenerated scripts explained
above, here is the complete manual procedure of generating a
Sphinx document from a file <code class="docutils literal"><span class="pre">mydoc.do.txt</span></code>.</p>
<p><strong>Step 1.</strong>
Translate DocOnce into the Sphinx format:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format sphinx mydoc
</pre></div>
</div>
<p><strong>Step 2.</strong>
Create a Sphinx root directory
either manually or by using the interactive <code class="docutils literal"><span class="pre">sphinx-quickstart</span></code>
program. Here is a scripted version of the steps with the latter:</p>
<div class="highlight-text"><div class="highlight"><pre>mkdir sphinx-rootdir
sphinx-quickstart &lt;&lt;EOF
sphinx-rootdir
n
_
Name of My Sphinx Document
Author
version
version
.rst
index
n
y
n
n
n
n
y
n
n
y
y
y
EOF
</pre></div>
</div>
<p>The autogenerated <code class="docutils literal"><span class="pre">conf.py</span></code> file
may need some edits if you want to specific layout (Sphinx themes)
of HTML pages. The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinx_dir</span></code> generator makes an extended <code class="docutils literal"><span class="pre">conv.py</span></code>
file where, among other things, several useful Sphinx extensions
are included.</p>
<p><strong>Step 3.</strong>
Copy the <code class="docutils literal"><span class="pre">mydoc.rst</span></code> file to the Sphinx root directory:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; cp mydoc.rst sphinx-rootdir
</pre></div>
</div>
<p>If you have figures in your document, the relative paths to those will
be invalid when you work with <code class="docutils literal"><span class="pre">mydoc.rst</span></code> in the <code class="docutils literal"><span class="pre">sphinx-rootdir</span></code>
directory. Either edit <code class="docutils literal"><span class="pre">mydoc.rst</span></code> so that figure file paths are correct,
or simply copy your figure directories to <code class="docutils literal"><span class="pre">sphinx-rootdir</span></code>.
Links to local files in <code class="docutils literal"><span class="pre">mydoc.rst</span></code> must be modified to links to
files in the <code class="docutils literal"><span class="pre">_static</span></code> directory, see comment above.</p>
<p><strong>Step 4.</strong>
Edit the generated <code class="docutils literal"><span class="pre">index.rst</span></code> file so that <code class="docutils literal"><span class="pre">mydoc.rst</span></code>
is included, i.e., add <code class="docutils literal"><span class="pre">mydoc</span></code> to the <code class="docutils literal"><span class="pre">toctree</span></code> section so that it becomes</p>
<div class="highlight-text"><div class="highlight"><pre>.. toctree::
   :maxdepth: 2

   mydoc
</pre></div>
</div>
<p>(The spaces before <code class="docutils literal"><span class="pre">mydoc</span></code> are important!)</p>
<p><strong>Step 5.</strong>
Generate, for instance, an HTML version of the Sphinx source:</p>
<div class="highlight-text"><div class="highlight"><pre>make clean   # remove old versions
make html
</pre></div>
</div>
<p>Sphinx can generate a range of different formats:
standalone HTML, HTML in separate directories with <code class="docutils literal"><span class="pre">index.html</span></code> files,
a large single HTML file, JSON files, various help files (the qthelp, HTML,
and Devhelp projects), epub, LaTeX, PDF (via LaTeX), pure text, man pages,
and Texinfo files.</p>
<p><strong>Step 6.</strong>
View the result:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; firefox _build/html/index.html
</pre></div>
</div>
<p>Note that verbatim code blocks can be typeset in a variety of ways
depending the argument that follows <code class="docutils literal"><span class="pre">!bc</span></code>: <code class="docutils literal"><span class="pre">cod</span></code> gives Python
(<code class="docutils literal"><span class="pre">code-block::</span> <span class="pre">python</span></code> in Sphinx syntax) and <code class="docutils literal"><span class="pre">cppcod</span></code> gives C++, but
all such arguments can be customized both for Sphinx and LaTeX output.</p>
</div>
</div>
<div class="section" id="wiki-formats">
<span id="do2any-wiki"></span><h2>Wiki Formats<a class="headerlink" href="#wiki-formats" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-207"></span><span class="target" id="index-208"></span><span class="target" id="index-209"></span><span class="target" id="index-210"></span><span class="target" id="index-211"></span><span class="target" id="index-212"></span><p id="index-213">There are many different wiki formats, but DocOnce only supports three:
<a class="reference external" href="http://code.google.com/p/support/wiki/WikiSyntax">Googlecode wiki</a>,
<a class="reference external" href="http://www.mediawiki.org/wiki/Help:Formatting">MediaWiki</a>, and
<a class="reference external" href="http://www.wikicreole.org/wiki/Creole1.0">Creole Wiki</a>.
These formats are called
<code class="docutils literal"><span class="pre">gwiki</span></code>, <code class="docutils literal"><span class="pre">mwiki</span></code>, and <code class="docutils literal"><span class="pre">cwiki</span></code>, respectively.
Transformation from DocOnce to these formats is done by</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format gwiki mydoc.do.txt
Terminal&gt; doconce format mwiki mydoc.do.txt
Terminal&gt; doconce format cwiki mydoc.do.txt
</pre></div>
</div>
<p>The produced MediaWiki can be tested in the <a class="reference external" href="http://en.wikibooks.org/wiki/Sandbox">sandbox of
wikibooks.org</a>. The format
works well with Wikipedia, Wikibooks, and
<a class="reference external" href="http://doconcedemo.shoutwiki.com/wiki/DocOnce_demo_page">ShoutWiki</a>,
but not always well elsewhere
(see <a class="reference external" href="http://doconcedemo.jumpwiki.com/wiki/First_demo">this example</a>).</p>
<p>Large MediaWiki documents can be made with the
<a class="reference external" href="http://en.wikipedia.org/w/index.php?title=Special:Book&amp;bookcmd=book_creator">Book creator</a>.
From the MediaWiki format one can go to other formats with aid
of <a class="reference external" href="http://pediapress.com/code/">mwlib</a>. This means that one can
easily use DocOnce to write <a class="reference external" href="http://en.wikibooks.org">Wikibooks</a>
and publish these in PDF and MediaWiki format, while
at the same time, the book can also be published as a
standard LaTeX book, a Sphinx web document, or a collection of HTML files.</p>
<p>The Googlecode wiki document, <code class="docutils literal"><span class="pre">mydoc.gwiki</span></code>, is most conveniently stored
in a directory which is a clone of the wiki part of the Googlecode project.
This is far easier than copying and pasting the entire text into the
wiki editor in a web browser. Note that Google decided to close down its
Googlecode service in 2015.</p>
<p>When the DocOnce file contains figures, each figure filename must in
the <code class="docutils literal"><span class="pre">.gwiki</span></code> file be replaced by a URL where the figure is
available. There are instructions in the file for doing this. Usually,
one performs this substitution automatically (see next section).</p>
</div>
<div class="section" id="google-docs">
<span id="do2any-google-docs"></span><h2>Google Docs<a class="headerlink" href="#google-docs" title="Permalink to this headline">¶</a></h2>
<p id="index-214">Google Docs are normally made online in the interactive editor. However,
you may upload a DocOnce document to Google Docs. This requires transforming
the DocOnce document to one of the accepted formats for Google Docs:</p>
<blockquote>
<div><ul class="simple">
<li>OpenOffice: <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">rst</span></code> and then run
<code class="docutils literal"><span class="pre">rst2odt</span></code> (or <code class="docutils literal"><span class="pre">rst2odt.py</span></code>). Upload the <code class="docutils literal"><span class="pre">.odt</span></code> file, click
<em>Open...</em> in Google Drive and choose <em>Google Docs</em> as viewer.</li>
<li>MS Word: <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">pandoc</span></code> and then run <code class="docutils literal"><span class="pre">pandoc</span></code> to
produce a <code class="docutils literal"><span class="pre">.docx</span></code> file that can be uploaded to Google Drive
and opened in Google Docs.</li>
<li>RTF: <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">pandoc</span></code> and then run <code class="docutils literal"><span class="pre">pandoc</span></code> to produce
a <code class="docutils literal"><span class="pre">.rtf</span></code> file that can be uploaded to Google Drive and opened.
Another possibility is to run <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">latex</span></code> and
then <a class="reference external" href="http://sourceforge.net/projects/latex2rtf">latex2rtf</a>
(the support of mathematics has gotten worse).</li>
<li>Plain text: <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">plain</span></code>. Upload the <code class="docutils literal"><span class="pre">.txt</span></code> file
to Google Drive and open in Google Docs.</li>
<li>HTML: <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">html</span></code>. Upload the <code class="docutils literal"><span class="pre">.html</span></code> file and
open in Google Docs. Complicated HTML files can be misinterpreted
by Google Docs.</li>
</ul>
</div></blockquote>
<p>This is not yet much tested. It remains to see how code becomes in
Google Docs. Support for mathematics is probably impossible until
Google Docs can import LaTeX files, but LaTeX mathematics can be embedded
in Google Docs and the <a class="reference external" href="http://code.google.com/p/googledoc2latex">googledoc2latex</a> script can convert a Google document to LaTeX.</p>
</div>
<div class="section" id="options-for-the-doconce-commands">
<h2>Options for the <code class="docutils literal"><span class="pre">doconce</span></code> commands<a class="headerlink" href="#options-for-the-doconce-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="doconce-format-command-line-options">
<h3><code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> command-line options<a class="headerlink" href="#doconce-format-command-line-options" title="Permalink to this headline">¶</a></h3>
<span class="target" id="index-215"></span><p id="index-216">The transformation of a DocOnce source to various format is done with
the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> command, which has <em>a lot</em> of command-line options.
These are printed out by <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span> <span class="pre">--help</span></code>. The output is listed
here for convenience.</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; doconce format --help

doconce format X doconcefile

where X can be any of the formats
html, latex, pdflatex, rst, sphinx, plain, gwiki, mwiki, cwiki,
pandoc, epytext.


--help

Print all options to the doconce program.


--debug

Write a debugging file _doconce_debugging.log with lots
of intermediate results


--no_abort

Do not abort the execution if syntax errors are found.


--verbose=...

Write progress of intermediate steps if they take longer than X seconds.
0: X=15
1: X=5
2: 0.5


--preprocess_include_subst

Turns on variable substitutions in # #include paths when running Preprocess:
    preprocess -i -DMYDIR=rn1
will lead to the string &quot;MYDIR&quot; being replaced by the value &quot;rn1&quot;
in # #include &quot;...&quot; statements.


--syntax_check=...

Values: on/off. Turns on/off fix of illegal constructions and the syntax check
(may be time consuming for large books).


--skip_inline_comments

Remove all inline comments of the form [ID: comment].


--draft

Indicates draft (turns on draft elements in LaTeX, otherwise no effect).


--CC_license=...

Template wording for Creative Commons licenses.
Default: &quot;Released under CC %s 4.0 license.&quot;
Example: &quot;This worsk is released under the Creative Commons %s 4.0 license&quot;
CC license is specified as a part of the copyright syntax, e.g.,
AUTHOR: Kaare Dump {copyright|CC BY} at BSU &amp; Some Company Ltd.
AUTHOR: Kaare Dump at BSU &amp; Some Company Ltd. {copyright,2005-present|CC BY-NC}
The --CC_license= option has no effect if the license does not start with CC, e.g.,
AUTHOR: Kaare Dump at BSU {copyright|Released under the MIT license.}



--exercise_numbering=...

absolute: exercises numbered as 1, 2, ... (default)
chapter: exercises numbered as 1.1, 1.2, ... , 3.1, 3.2, ..., B.1, B.2, etc.
         with a chapter or appendix prefix.


--exercises_in_zip

Place each exercises as an individual DocOnce file in a zip archive.


--exercises_in_zip_filename=...

Filenames of individual exercises in zip archive.
logical: use the (first) logical filename specified by file=...
number:  use either absolute exercise number or chapter.localnumber.


--toc_depth=...

No of levels in the table of contents. Default: 2 (includes sections and subsections but not subsubsections).


--encoding=...

Specify encoding (e.g., latin1 or utf-8).


--no_ampersand_quote

Turn off special treatment of ampersand (&amp;). Needed, e.g., when native latex code for tables are inserted in the document.


--no_mako

Do not run the Mako preprocessor program.


--no_preprocess

Do not run the Preprocess preprocessor program.


--mako_strict_undefined

Make Mako report on undefined variables.


--no_header_footer

Do not include header and footer in (LaTeX and HTML) documents.


--no_emoji

Remove all emojis.


--allow_refs_to_external_docs

Do not abort translation if ref{...} to labels not defined in this document.


--runestone

Make a RunestoneInteractive version of a Sphinx document.


--max_bc_linelength=...

Strip lines in !bc environments that are longer than specified
(to prevent too long lines). Default: None (no length restriction).


--replace_ref_by_latex_auxno=...

Replace all ref{...} by hardcoded numbers from a latex .aux file.
Makes it possible for a notebook or html page to refer to a latex textbook.
Recommended syntax: see (ref{my:eq1}) in cite{MyBook}, or see
Section ref{my:sec2} in cite{MyBook}.


--keep_pygments_html_bg

Do not allow change of background in code blocks in HTML.


--minted_latex_style=...

Specify the minted style to be used for typesetting code in LaTeX.
See pygmetize -L styles for legal names.


--pygments_html_style=...

Specify the minted/pygments style to be used for typesetting code
in HTML.
Default: default (other values: monokai, manni, rrt, perldoc,
borland, colorful, murphy, trac, tango, fruity, autumn, emacs,
vim, pastie, friendly, native, see pygmentize -L styles).
none, no, off: turn off pygments to typeset computer code in HTML,
use plain &lt;pre&gt; tags.
highlight.js: use highlight.js syntax highlighting, not pygments.


--pygments_html_linenos

Turn on line numbers in pygmentized computer code in HTML.
(In LaTeX line numbers can be added via doconce subst or
doconce replace such that the verbatim environments get
the linenos=true parameter.)


--xhtml

Use BeautifulSoap to try to produce XHTML output. It inserts end tags (e.g. &lt;/p&gt;) and guesses where to do it.


--html_output=...

Alternative basename of files associated with the HTML format.


--html_style=...

Name of theme for HTML style:
plain, blueish, blueish2, bloodish, tactile-black, tactile-red, rossant
solarized, solarized2_light, solarized2_dark,
bootstrap, bootswatch,
bootstrap_X,  X=bloodish, blue, bluegray, brown, cbc, FlatUI, red,
bootswatch_X, X=cerulean, cosmo, flatly, journal, lumen, readable,
                simplex, spacelab, united, yeti
                (dark:) amelia, cyborg, darkly, slate, spruce,
                superhero (demos at bootswatch.com)


--html_template=...

Specify an HTML template with header/footer in which the doconce
document is embedded. (Often preferred to run with --no_title)


--no_title

Comment out TITLE, AUTHOR, DATE.
Often used with HTML templates.


--html_code_style=...

off, inherit, or transparent: enable normal inline verbatim font
where foreground and background color is inherited from the
surroundnings (e.g., to avoid the red Boostrap color).
Default: on (use the css-specified typesetting of &lt;pre&gt; tags).
NOTE: the naming &quot;html_code_style&quot; is not optimal: it has nothing
to do with code block style, but the &lt;code&gt; tag for inline verbatim text
in the context of bootstrap css styles.



--html_pre_style=...

off, inherit, or transparent: let code blocks inside &lt;pre&gt; tags have
foreground and background color inherited from the surroundnings.
Default: on (use the css-specified typesetting of &lt;pre&gt; tags).
This option is most relevant for Bootstrap styles to
avoid white background in code blocks inside colorful admons.



--html_toc_indent=...

No of spaces for indentation of subsections in the table of
contents in HTML output. Default: 3 (0 gives toc as nested list
in Bootstrap-based styles).


--html_body_font=...

Specify HTML font for text body. =? lists available fonts.


--html_heading_font=...

Specify HTML font for headings. =? lists available fonts.


--html_video_autoplay=...

True for autoplay when HTML is loaded, otherwise False (default).


--html_admon=...

Type of admonition and color:
colors, gray, yellow, apricot, lyx, paragraph.
For html_style=bootstrap*,bootswatch*,
the two legal values are boostrap_panel, bootstrap_alert.


--html_admon_shadow

Add a shadow effect to HTML admon boxes (gray, yellow, apricot).


--html_admon_bg_color=...

Background color of admon in HTML.


--html_admon_bd_color=...

Boundary color of admon in HTML.


--css=...

Specify a .css style file for HTML output.
If the file does not exist, the default or specified style
(--html_style=) is written to it.


--html_box_shadow

Add a shadow effect in HTML box environments.


--html_share=...

Specify URL and there will be Facebook, Twitter, etc. buttons
at the end of the HTML document.

--html_share=http://mysite.com/specials shares on email, Facebook, Google+,
LinkedIn, Twitter, and enables a print button too.

--html_share=http://mysite.com/specials,twitter,facebook shares on
Twitter and Facebook only. Sites are separated by comma. The following
names are allowed: email, facebook, google+, linkedin, twitter, print.


--html_exercise_icon=...

Specify a question icon (as a filename in the bundled/html_images
directory in the doconce repo) for being inserted to the right in exercises.
default: turn on predefined question icons according to the chosen style.
none: no icons (this is the default value).


--html_exercise_icon_width=...

Width of the icon image in pixels (must be used with --html_exercise_icon).


--html_raw_github_url=...

URLs to files hosted on the doconce github account.
Internet Explorer (and perhaps other browsers) will not show raw.github.com
files. Instead on should use rawgit.com. For development of HTML sites
in Safari and Chrome and can use rawgit.com.

Values of --html_raw_github_url=:
safe or cdn.rawgit: use this for ready-made sites with potentially some traffic.
The URL becomes https://cdn.rawgit.com/hplgit/doconce/...

test or rawgit: use this for test purposes and development with low traffic.
The URL becomes https://rawgit.com/hplgit/doconce/...

github or raw.github: the URL becomes https://raw.github.com and may fail to
load properly.

githubusercontent or raw.githubusercontent: The URL becomes
https://raw.githubusercontent.com and may fail to load properly.



--html_DOCTYPE

Insert &lt;!DOCTYPE HTML&gt; in the top of the HTML file.
This is required for Internet Explorer and Mozilla.
However, some of the CSS files used by DocOnce may not load properly if
they are not well formed. That is why no doctype is default in the
generated HTML files.


--html_links_in_new_window

Open HTML links in a new window/tab.


--html_quiz_button_text=...

Text on buttons for collapsing/expanding answers and explanations
in quizzes (with bootstrap styles).
Default: Empty (just pencil glyphion).


--html_bootstrap_navbar=...

Turns the Bootstrap navigation bar on/off. Default: on.


--html_bootstrap_jumbotron=...

Turns the Bootstrap jumbotron intro on/off and governs the
size of the document title. Default: on. Other values: h2, off
(h2 gives h2 heading instead of h1, off gives no jumbotron).


--html_figure_hrule=...

Set horizontal rule(s) above and/or below a figure.
none, off: no rules
top: rule at top (default)
bottom: rule at bottom
top+bottom: rule at top and bottom


--html_copyright=...

Controls where to put copyright statements.
everypage: in the footer of every page
titlepages or titlepage: in the footer of the titlepage only.


--device=...

Set device to paper, screen, or other (paper impacts LaTeX output).


--number_all_equations

Switch latex environments such that all equations get a number.


--denumber_all_equations

Switch latex environments such no equations get a number (useful for removing equation labels in slides). Error messages are issued about references to numbered equations in the text.


--latex_style=...

LaTeX style package used for the document.
std: standard LaTeX article or book style,
Springer_lncse: Springer&#39;s Lecture Notes in Computational Science and
   Engineering (LNCSE) style,
Springer_llncs: Springer&#39;s Lecture Notes in Computer Science style,
Springer_T2: Springer&#39;s T2 book style,
Springer_collection: Springer&#39;s style for chapters in LNCSE proceedings,
Korma_Script: Korma Script style,
siamltex: SIAM&#39;s standard LaTeX style for papers,
siamltexmm: SIAM&#39;s extended (blue) multimedia style for papers.


--latex_font=...

LaTeX font choice: helvetica, palatino, std (Computer Modern, default).


--latex_code_style=...

Typesetting of code blocks.
pyg: use pygments (minted), style is set with --minted_latex_style=
lst: use lstlistings
vrb: use Verbatim (default)

Specifications across languages:
pyg-blue1
lst, lst-yellowgray[style=redblue]
vrb[frame=lines,framesep=2.5mm,framerule=0.7pt]

Detailed specification for each language:
default:vrb-red1[frame=lines]@pycod:lst[style=redblue]@pypro:lst-blue1[style=default]@sys:vrb[frame=lines,label=\fbox{{\tiny Terminal}},framesep=2.5mm,framerule=0.7pt]

Here, Verbatim[frame=lines] is used for all code environments, except
pycod, pypro and sys, which have their own specifications.
pycod: lst package with redblue style (and white background)
pypro: lst package with default style and blue1 background
style, sys: Verbatim with the specified arguments and white background.

(Note: @ is delimiter for the language specifications, syntax is
envir:package-background[style parameters]@)



--latex_code_leftmargin=...

Sets the left margin in code blocks. Default: 7 (mm).


--latex_code_bg=...

Background color code blocks. Default: white.


--latex_code_bg_vpad

Vertical padding of background. Has only effect for vrb/pyg-bgcolor styles (not lst!).


--latex_code_lststyles=...

Filename with LaTeX definitions of lst styles.


--latex_copyright=...

Controls where to put copyright statements.
everypage: in the footer of every page
titlepages: in the footer of the titlepage and chapter pages (for books) only.


--latex_bibstyle=...

LaTeX bibliography style. Default: plain.


--section_numbering=...

Turn section numbering on/off. Default: off for all formats except latex and pdflatex (on for those).


--latex_table_format=...

Default: quote. Other values: left, center, footnotesize, tiny.


--latex_title_layout=...

Layout of the title, authors, and date:
std: traditional LaTeX layout,
titlepage: separate page,
doconce_heading (default): authors with &quot;footnotes&quot; for institutions,
beamer: layout for beamer slides.


--latex_link_color=...

Color used in hyperlinks. Default is dark blue if --device=screen,
or black if --device=paper (invisible in print out) or special blue
color if --latex_section_headings=blue or strongblue.
Values are specified either as comma-separated rgb tuples or as
color names, e.g., --latex_link_color=0.1,0.9,0.85 or
--latex_link_color=red or --latex_link_color=gray!70


--latex_title_reference=...

latex code placed in a footnote for the title,
typically used for acknowledging publisher/source of original
version of the document.


--latex_encoding=...

Encoding for \usepackage[encoding]{inputenc}.
Values: utf8 (default) or latin1.


--latex_packages=...

Comma-separated list of latex packages to be included in \usepackage commands..


--latex_papersize=...

Geometry of page size: a6, a4, std (default).


--latex_list_of_exercises=...

LaTeX typesetting of list of exercises:
loe: special, separate list of exercises,
toc: exercises included as part of the table of contents,
none (default): no list of exercises.


--latex_movie=...

Specify package for handling movie/video content.
Default: href (hyperlink to movie file).
Other options: media9, movie15, multimedia (Beamer&#39;s \movie command).


--latex_movie_controls=...

Specify control panel for movies. Default: on. Other options: off.


--latex_external_movie_viewer

Allow external movie viewer for movie15 package.


--latex_fancy_header

Typesetting of headers on each page:
If article: section name to the left and page number to the right
on even page numbers, the other way around on odd page numners.
If book: section name to the left and page numner to the right
on even page numbers, chapter name to the right and page number to
the left on odd page numbers.


--latex_section_headings=...

Typesetting of title/section/subsection headings:
std (default): standard LaTeX,
blue: gray blue color,
strongblue: stronger blue color,
gray: white text on gray background, fit to heading width,
gray-wide: white text on gray background, wide as the textwidth.


--latex_colored_table_rows=...

Colors on every two line in tables: no (default), gray, blue.


--latex_line_numbers

Include line numbers for the running text (only active if there
are inline comments.


--latex_todonotes

Use the todonotes package to typeset inline comments.
Gives colored bubbles in the margin for small inline comments and
in the text for larger comments.


--latex_double_spacing

Sets the LaTeX linespacing to 1.5 (only active if there are
inline comments).


--latex_labels_in_margin

Print equation, section and other LaTeX labels in the margin.


--latex_index_in_margin

Place entries in the index also in the margin.


--latex_preamble=...

User-provided LaTeX preamble file, either complete or additions
to the doconce-generated preamble.


--latex_no_program_footnotelink

If --device=paper, this option removes footnotes with links to
computer programs.


--latex_admon=...

Type of admonition in LaTeX:
colors1:
(inspired by the NumPy User Guide) applies different colors
for the different admons with an embedded icon,

colors2:
like `colors1` but the text is wrapped around the icon,

mdfbox:
rounded boxes with a optional title and no icon (default),

graybox2:
box with square corners, gray background, and narrower
than mdfbox, if code it reduces to something like mdfbox
(mdframed based); the summary admon is in case of A4 format
only half of the text width with text wrapped around
(effective for proposals and articles),

grayicon:
box with gray icons and a default light gray background,

yellowicon:
box yellow icons and a default light yellow background,

paragraph:  plain paragraph with boldface heading.

Note: the colors in mdfbox and other boxes can customized.



--latex_admon_color=...

The color to be used as background in admonitions.
A single value applies to all admons:
Either rgb tuple or saturated color a la yellow!5:
  --latex_admon_color=0.1,0.1,0.4
  &#39;--latex_admon_color=yellow!5&#39;
Note the quotes, needed for bash, in the latter example.

Multiple values can be assigned, one for each admon (all admons must
be specified):
  &#39;--latex_admon_color=warning:darkgreen!40!white;notice:darkgray!20!white;summary:tucorange!20!white;question:red!50!white;block:darkgreen!40!white&#39;

If --latex_admon=mdfbox, the specification above with color1!X!color2
will automatically trigger 2*X as the background color of the frametitle.

There are predefined multiple values, e.g.,
  --latex_admon_color=colors1
gives red warnings, blue notice, orange questions, green summaries and
yellow blocks, automatically adjusted with darker frametitles for

If --latex_admon=mdfbox, the background of the title and
the color of the border of box can also be customized by
direct editing. For example, a dark blue border and light
blue title background is obtained by editing the .tex file as

doconce replace &#39;linecolor=black,&#39; &#39;linecolor=darkblue,&#39; mydoc.tex
doconce subst &#39;frametitlebackgroundcolor=.*?,&#39; &#39;frametitlebackgroundcolor=blue!5,&#39; mydoc.tex

Actually, this particular (and common) edit is automatically done by the option
  --latex_admon_color=bluestyle
  --latex_admon_color=yellowstyle
(the latter has color yellow!5 instead and yellow!20 for the border)



--latex_admon_title_no_period

By default, a period is added to title admons that do not have a period, question mark, or similar. This option prevents adding a period such that the title acts like a heading.


--latex_admon_envir_map=...

Mapping of code envirs to new envir names inside admons, e.g.,
to get a different code typesetting inside admons. This is useful
if admons have a special color and the color background of code
blocks does not fit will with the color background inside admons.
Then it is natural to use a different verbatim code style inside
admons.
If specifying a number, say 2, as in --latex_admon_envir_map=2,
an envir like pycod gets the number appended: pycod2. One can
then in --latex_code_style= or in doconce ptex2tex or ptex2tex
specify the typesetting of pycod2 environments.
Otherwise the specification must be a mapping for each envir
that should be changed inside the admons:
--latex_admon_envir_map=pycod-pycod_yellow,fpro-fpro2
(from-to,from-to,... syntax).


--latex_subex_header_postfix=...

Default: ).
Gives headers a), b), etc. Can be set to period, colon, etc.


--xelatex

Use xelatex instead of latex/pdflatex.


--latex_double_hyphen

Replace single dash - by double dash -- in LaTeX output.
Somewhat intelligent, but may give unwanted edits. Use with great care!


--latex_elsevier_journal=...

Sets the journal name for the --latex_style=elsevier style.
Default: none (no journal name).


--ipynb_version=...

ipynb version 3 (default) or 4.


--ipynb_split_pyshell=...

Split interactive sessions into multiple cells after each output.
Applies to pyshell and ipy code environments.
on, True, yes: split (default).
off, False, no: do not split.
Note that pyshell-t and ipy-t environments just displays the session,
while default pyshell and ipy removes all output (all output from print
statements will come after the entire session).



--ipynb_cite=...

Typesetting of bibliography.
plain: simple native typesetting (same as pandoc) (default)
latex: ipynb support for latex-style bibliographies (not mature).


--ipynb_admon=...

Typesetting of admonitions (hint, remarks, box, notice, summary,
warning, question, block - quotes are typeset as quotes).
quote: as Markdown quote (default) with gray line on the left.
paragraph: just the content with the title as paragraph heading.
hrule: title with horizontal rule above and below, then text and
horozontal rule.


--ipynb_figure=...

How to typeset figures in ipynb:
md (plain Markdown syntax),
imgtag (&lt;img src=&quot;...&quot; width=...&gt; tag, default)
Image (python cell with Image object).


--ipynb_movie=...

How to typeset movies in ipynb:
md (plain Markdown syntax, default)
HTML: python cell with notebook `HTML` object containing the raw HTML code
that is used in the DocOnce HTML format
ipynb: python cell with notebook `HTML` object with simple/standard
ipynb HTML code for showing a YouTube or local video with a &lt;video&gt;
tag.


--verbose

Write out all OS commands run by doconce.


--examples_as_exercises

Treat examples of the form &quot;==== Example: ...&quot;
as in exercise environments.


--solutions_at_end

Place solutions to exercises at the end of the document.


--without_solutions

Leave out solution environments from exercises.


--without_answers

Leave out answer environments from exercises.


--without_hints

Leave out hints from exercises.


--wordpress

Make HTML output for wordpress.com pages.


--tables2csv

Write each table to a CSV file table_X.csv,
where X is the table number (autonumbered in according to
appearance in the DocOnce source file).


--sections_up

Upgrade all sections: sections to chapters, subsections
to sections, etc.


--sections_down

Downgrade all sections: chapters to sections, sections
to subsections, etc.


--os_prompt=...

Terminal prompt in output from running OS commands (the
@@@OSCMD instruction). None or empty: no prompt, just the command;
nocmd: no command, just the output. Default is &quot;Terminal&gt;&quot;.


--code_skip_until=...

@@@CODE import: skip lines in files up to (and incuding) specified line.


--code_prefix=...

Prefix all @@@CODE imports with some path.


--figure_prefix=...

Prefix all figure filenames with, e.g., an URL.


--movie_prefix=...

Prefix all movie filenames with, e.g., an URL.


--no_mp4_webm_ogg_alternatives

Use just the specified (.mp4, .webm, .ogg) movie file;
do not allow alternatives in HTML5 video tag.
Used if the just the specified movie format should be played.


--handout

Makes slides output suited for printing.


--urlcheck

Check that all URLs referred to in the document are valid.


--labelcheck=...

Check that all ref{X} has a corresponding label{X}. Fake examples will fail this check and so will generalized references.
Turn on when useful. Values: off (default), on.


--short_title=...

Short version of the document&#39;s title.


--markdown

Allow Markdown (and some Extended Markdown) syntax as input.


--md2do_output=...

Dump to file the DocOnce code arising from converting from
Markdown. Default value is None (no dump).
Any filename can be specified: --md2do_output=myfile.do.txt


--github_md

Turn on github-flavored-markdown dialect of the pandoc translator


--strapdown

Wrap Markdown output in HTML header/footer such that the
output file (renamed as .html) can automatically be rendered as
an HTML via strapdownjs.com technology. Combine with --github_md
for richer output. Styles are set with --bootswatch_theme=cyborg
(for instance).


--bootswatch_theme=...

Bootswatch theme for use with --strapdown option.


--strict_markdown_output

Ensure strict/basic Markdown as output.


--multimarkdown_output

Allow MultiMarkdown as output.


--quiz_question_prefix=...

Prefix/title before question in quizzes. Default: &quot;Question:&quot;.
Can also be set in square brackets for each individual question.
(&quot;Q: [] What is 1+1?&quot;
results in no prefix/title before the &quot;What is 1+1?&quot;.


--quiz_choice_prefix=...

Prefix/title before choices in quizzes.
Default for HTML: &quot;Choice&quot;, resulting in numbered choices
&quot;Choice 1:&quot;, &quot;Choice 2:&quot;, etc.
A value with colon, period, or question mark (e.g., &quot;Answer:&quot;)
leaves out the numbering.
Default for latex/pdflatex: letter or letter+checkbox.
Other values: number, number+checkbox, number+circle, letter+circle,
letter.
The checkbox or circle is always omitted if answers or solutions are
included (i.e., if none of the --without_answers and
--without_solutions is set).
The choice prefix can also be set in square brackets for each
individual choice.
(&quot;Cr: [] Two&quot;
results in no prefix/title before the the answer &quot;Two&quot;.



--quiz_horizontal_rule=...

on (default): &lt;hr&gt; before and after quiz in HTML. off: no &lt;hr&gt;.


--quiz_explanations=...

on/off
(some output formats do not support explanations with figures,
math and/or code, this option turns all explanations off.


--rst_uio

Univ. of Oslo version of rst files for their Vortex system.


--rst_mathjax

Use raw HTML with MathJax for LaTeX mathematics in rst files.


--sphinx_keep_splits

Respect user&#39;s !split commands. Default: Override user&#39;s !split
and insert new !split before all topmost sections. This is what
makes sense in a Sphinx Table of Contents if one wants to split
the document into multiple parts.


--sphinx_figure_captions=...

Font style in figure captions: emphasize (default) or normal. If you use boldface or emphasize in the caption, the font style will be normal for that caption.


--oneline_paragraphs

Combine paragraphs to one line (does not work well).
</pre></div>
</div>
</div>
</div>
<div class="section" id="installation-of-doconce-and-its-dependencies">
<span id="install-doconce"></span><h2>Installation of DocOnce and its Dependencies<a class="headerlink" href="#installation-of-doconce-and-its-dependencies" title="Permalink to this headline">¶</a></h2>
<p id="index-217">Below, we explain the manual installation of all software that may be
needed when working with DocOnce documents.
The impatient way to install everything that is needed is to use
Anaconda Python and the <code class="docutils literal"><span class="pre">conda</span></code> program:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; conda install --channel johannr doconce
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">conda</span></code> package is available for Mac and Linux only.</p>
<p>If you do not want to use Anaconda and are
on a Debian-based Linux
computer (running, e.g., Ubuntu), you can instead run the Bash script
<a class="reference external" href="https://raw.githubusercontent.com/hplgit/doconce/master/doc/src/manual/install_doconce.sh">install_doconce.sh</a> or the equivalent Python script
<a class="reference external" href="https://raw.githubusercontent.com/hplgit/doconce/master/doc/src/manual/install_doconce.py">install_doconce.py</a>.
These scripts gives a comprehensive installation. Some users will prefer to
install just what is needed for them, and this is explained below.</p>
<div class="admonition-version-control-systems-are-needed admonition">
<p class="first admonition-title">Version control systems are needed</p>
<p class="last">The coming installation instructions require that the version control systems
Subversion, Mercurial, and Git are installed on your computer.</p>
</div>
<div class="admonition-what-about-mac-and-windows admonition">
<p class="first admonition-title">What about Mac and Windows</p>
<p class="last">DocOnce is primarily tested on GNU/Debian Linux systems, but also to
a minor extent on Mac OS X. Experience with Windows is limited.
Since most packages are Python-based and can be installed via <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span></code>
no problems should arise on Mac and Windows. However, some of the
image processing tools and spell checking apply Unix-specific software.</p>
</div>
<p>You can omit reading the next sections if you rely on <code class="docutils literal"><span class="pre">conda</span></code> or
<code class="docutils literal"><span class="pre">apt-get</span> <span class="pre">install</span></code> commands in the Bash script for installing DocOnce.</p>
<div class="section" id="doconce">
<h3>DocOnce<a class="headerlink" href="#doconce" title="Permalink to this headline">¶</a></h3>
<p>DocOnce itself is pure Python code hosted at <a class="reference external" href="https://github.com/hplgit/doconce">https://github.com/hplgit/doconce</a>.
Installation can be done via</p>
<div class="highlight-text"><div class="highlight"><pre>sudo pip install -e git+https://github.com/hplgit/doconce#egg=doconce
# or if doconce is already installed
sudo pip install -e git+https://github.com/hplgit/doconce#egg=doconce --upgrade
</pre></div>
</div>
<p>However, the recommended approach is to have a copy of the source on
the local computer and run <code class="docutils literal"><span class="pre">setup.py</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>git clone git@github.com:hplgit/doconce.git
cd doconce
sudo python setup.py install
cd ..
</pre></div>
</div>
<p>Since DocOnce is frequently updated, it becomes necessary to ensure
that you work with the most recent version:</p>
<div class="highlight-text"><div class="highlight"><pre>cd doconce
git pull origin master
sudo python setup.py install
</pre></div>
</div>
</div>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>Producing HTML documents, plain text, pandoc-extended Markdown,
and wikis can be done without installing any other
software. However, if you want other formats as output
(LaTeX, Sphinx, reStructuredText) and assisting utilities such
as preprocesors, spellcheck, file differences, bibliographies,
and so on, a lot of extra software must be installed.</p>
<div class="section" id="python-v2-7">
<h4>Python v2.7<a class="headerlink" href="#python-v2-7" title="Permalink to this headline">¶</a></h4>
<p>First you need Python version 2.7 and the <code class="docutils literal"><span class="pre">pip</span></code> installation program.
Unless you already have these, we recommend to install a comprehensive
Python bundle like <a class="reference external" href="https://store.continuum.io/cshop/anaconda/">Anaconda</a>.</p>
<p>You do not need more software if you avoid using preprocessors, there
is no bibliography, and you stick to the output formats LaTeX and HTML
(you need of course LaTeX installed to process <code class="docutils literal"><span class="pre">.tex</span></code> files).</p>
</div>
<div class="section" id="preprocessors">
<h4>Preprocessors<a class="headerlink" href="#preprocessors" title="Permalink to this headline">¶</a></h4>
<p>If you make use of the <a class="reference external" href="https://github.com/hplgit/preprocess">Preprocess</a>
preprocessor, this program must be installed:</p>
<div class="highlight-text"><div class="highlight"><pre>pip install -e \
   git+https://github.com/hplgit/preprocess#egg=preprocess --upgrade
</pre></div>
</div>
<p>A much more advanced alternative to Preprocess is
<a class="reference external" href="http://www.makotemplates.org">Mako</a>. Its installation is done by</p>
<div class="highlight-text"><div class="highlight"><pre>pip install Mako
</pre></div>
</div>
<p>It is recommended to install both Preprocess and Mako.</p>
<p>Note that neither Preprocess nor Mako is run if you do not have
preprocessor directives in your DocOnce source. That is, you only need
this extra software if you make active use of preprocessors.</p>
</div>
<div class="section" id="bibliography">
<h4>Bibliography<a class="headerlink" href="#bibliography" title="Permalink to this headline">¶</a></h4>
<p>The Python package <a class="reference external" href="https://bitbucket.org/logg/publish">Publish</a> is needed if you use a bibliography
in your document (<code class="docutils literal"><span class="pre">cite</span></code> commands and a <code class="docutils literal"><span class="pre">BIBFILE:</span></code> specification).
The installation is done by</p>
<div class="highlight-text"><div class="highlight"><pre>pip install -e hg+https://bitbucket.org/logg/publish#egg=publish
</pre></div>
</div>
</div>
<div class="section" id="image-file-handling">
<h4>Image file handling<a class="headerlink" href="#image-file-handling" title="Permalink to this headline">¶</a></h4>
<p>Different output formats require different formats of image files.
For example, PDF or PNG is used for <code class="docutils literal"><span class="pre">pdflatex</span></code>,
PostScript for
<code class="docutils literal"><span class="pre">latex</span></code>, while HTML needs JPEG, GIF, or PNG formats.  DocOnce
calls up programs from the ImageMagick suite for converting image
files to a proper format if needed. The <a class="reference external" href="http://www.imagemagick.org/script/index.php">ImageMagick suite</a> can be installed on all
major platforms.  On Debian Linux (including Ubuntu) systems one can
simply write</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install imagemagick
</pre></div>
</div>
<p>The convenience program <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">combine_images</span></code>, for combining several
images into one, will use <code class="docutils literal"><span class="pre">montage</span></code> and <code class="docutils literal"><span class="pre">convert</span></code> from ImageMagick and
the <code class="docutils literal"><span class="pre">pdftk</span></code>, <code class="docutils literal"><span class="pre">pdfnup</span></code>, and <code class="docutils literal"><span class="pre">pdfcrop</span></code> programs from the <code class="docutils literal"><span class="pre">texlive-extra-utils</span></code>
Debian package. The latter gets installed by</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install texlive-extra-utils
</pre></div>
</div>
<p>Automatic image conversion from EPS to PDF calls up <code class="docutils literal"><span class="pre">epstopdf</span></code>, which
can be installed by</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install texlive-font-utils
</pre></div>
</div>
</div>
<div class="section" id="spellcheck">
<h4>Spellcheck<a class="headerlink" href="#spellcheck" title="Permalink to this headline">¶</a></h4>
<p>The utility <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">spellcheck</span></code> applies the <code class="docutils literal"><span class="pre">ispell</span></code> program for
spellcheck. On Debian (including Ubuntu) it is installed by</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install ispell
</pre></div>
</div>
</div>
<div class="section" id="ptex2tex-for-latex-output">
<h4>Ptex2tex for LaTeX Output<a class="headerlink" href="#ptex2tex-for-latex-output" title="Permalink to this headline">¶</a></h4>
<p>Originally, DocOnce relied on the <a class="reference external" href="http://code.google.com/p/ptex2tex">ptex2tex</a> program for very flexible choice of typesetting of
verbatim code blocks. A simplified version, <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code>, is bundled
with DocOnce. However, even greater flexibility is now offered by the
<code class="docutils literal"><span class="pre">--latex_code_style=</span></code> option to <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> so unless you already are
a <code class="docutils literal"><span class="pre">ptex2tex</span></code> user, it is recommended to forget about <code class="docutils literal"><span class="pre">ptex2tex</span></code> and
just use the <code class="docutils literal"><span class="pre">--latex_code_style=</span></code> option.</p>
<p>The stand-alone <code class="docutils literal"><span class="pre">ptex2tex</span></code> program is installed by</p>
<div class="highlight-text"><div class="highlight"><pre>svn checkout http://ptex2tex.googlecode.com/svn/trunk/ ptex2tex
cd ptex2tex
sudo python setup.py install
</pre></div>
</div>
<p>It may happen that you need additional style files, you can run
a script, <code class="docutils literal"><span class="pre">cp2texmf.sh</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>cd latex
sh cp2texmf.sh  # copy stylefiles to ~/texmf directory
cd ../..
</pre></div>
</div>
<p>This script copies some special stylefiles that
that <code class="docutils literal"><span class="pre">ptex2tex</span></code> potentially makes use of. Some more standard stylefiles
are also needed. These are installed by</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install texlive
</pre></div>
</div>
<p>on Debian Linux (including Ubuntu) systems. TeXShop on Mac comes with
the necessary stylefiles (if not, they can be found by googling and installed
manually in the <code class="docutils literal"><span class="pre">~/texmf/tex/latex/misc</span></code> directory).</p>
<p>Note that the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code> command, which needs no installation
beyond DocOnce itself, can be used as a simpler alternative to the <code class="docutils literal"><span class="pre">ptex2tex</span></code>
program.</p>
</div>
<div class="section" id="pygments-and-the-minted-code-style">
<h4>Pygments and the Minted Code Style<a class="headerlink" href="#pygments-and-the-minted-code-style" title="Permalink to this headline">¶</a></h4>
<p>The <em>minted</em> LaTeX style is
popular for typesetting code.
This style requires the package <a class="reference external" href="http://pygments.org">Pygments</a>
to be installed. On Debian Linux, the simplest approach is to
install <code class="docutils literal"><span class="pre">sphinx</span></code>:</p>
<div class="highlight-text"><div class="highlight"><pre>pip install sphinx
</pre></div>
</div>
<p>All use of the minted style requires the <code class="docutils literal"><span class="pre">-shell-escape</span></code> command-line
argument when running LaTeX, i.e., <code class="docutils literal"><span class="pre">pdflatex</span> <span class="pre">-shell-escape</span></code>.</p>
<p>Inline comments apply the <code class="docutils literal"><span class="pre">todonotes</span></code> LaTeX package if the option
<code class="docutils literal"><span class="pre">--latex_todonotes</span></code> is given.  The <code class="docutils literal"><span class="pre">todonotes</span></code> package requires
several other packages: <code class="docutils literal"><span class="pre">xcolor</span></code>, <code class="docutils literal"><span class="pre">ifthen</span></code>, <code class="docutils literal"><span class="pre">xkeyval</span></code>, <code class="docutils literal"><span class="pre">tikz</span></code>, <code class="docutils literal"><span class="pre">calc</span></code>,
<code class="docutils literal"><span class="pre">graphicx</span></code>, and <code class="docutils literal"><span class="pre">setspace</span></code>. The relevant Debian packages for
installing all this are listed below.</p>
</div>
<div class="section" id="latex-packages">
<h4>LaTeX packages<a class="headerlink" href="#latex-packages" title="Permalink to this headline">¶</a></h4>
<p>Many LaTeX packages are potentially needed, depending on various
constructions in the text and command-line options used when compling DocOnce to
LaTeX. The
standard packages always required are <code class="docutils literal"><span class="pre">relsize</span></code>, <code class="docutils literal"><span class="pre">makeidx</span></code>,
<code class="docutils literal"><span class="pre">setspace</span></code>, <code class="docutils literal"><span class="pre">color</span></code>, <code class="docutils literal"><span class="pre">amsmath</span></code>, <code class="docutils literal"><span class="pre">amsfonts</span></code>, <code class="docutils literal"><span class="pre">xcolor</span></code>, <code class="docutils literal"><span class="pre">bm</span></code>,
<code class="docutils literal"><span class="pre">microtype</span></code>, <code class="docutils literal"><span class="pre">inputenc</span></code>, and <code class="docutils literal"><span class="pre">hyperref</span></code>.
Optional packages that might be included in the <code class="docutils literal"><span class="pre">.tex</span></code> output are <code class="docutils literal"><span class="pre">minted</span></code>,
<code class="docutils literal"><span class="pre">listings</span></code>, <code class="docutils literal"><span class="pre">fancyvrb</span></code>, <code class="docutils literal"><span class="pre">xunicode</span></code>, <code class="docutils literal"><span class="pre">inputenc</span></code>, <code class="docutils literal"><span class="pre">helvet</span></code>, <code class="docutils literal"><span class="pre">mathpazo</span></code>, <code class="docutils literal"><span class="pre">wrapfig</span></code>,
<code class="docutils literal"><span class="pre">calc</span></code>, <code class="docutils literal"><span class="pre">ifthen</span></code>, <code class="docutils literal"><span class="pre">xkeyval</span></code>, <code class="docutils literal"><span class="pre">tikz</span></code>, <code class="docutils literal"><span class="pre">graphicx</span></code>, <code class="docutils literal"><span class="pre">setspace</span></code>, <code class="docutils literal"><span class="pre">shadow</span></code>,
<code class="docutils literal"><span class="pre">disable</span></code>, <code class="docutils literal"><span class="pre">todonotes</span></code>, <code class="docutils literal"><span class="pre">lineno</span></code>, <code class="docutils literal"><span class="pre">xr</span></code>, <code class="docutils literal"><span class="pre">framed</span></code>, <code class="docutils literal"><span class="pre">mdframe</span></code>,
<code class="docutils literal"><span class="pre">movie15</span></code>, <code class="docutils literal"><span class="pre">a4paper</span></code>, and <code class="docutils literal"><span class="pre">a6paper</span></code>.</p>
<p>Relevant Debian packages that gives you all of these LaTeX packages are</p>
<div class="highlight-text"><div class="highlight"><pre>texlive
texlive-extra-utils
texlive-latex-extra
texlive-font-utils
</pre></div>
</div>
<p>Alternatively, one may pull in <code class="docutils literal"><span class="pre">texlive-full</span></code> to get all available
style files.</p>
<p>If you want to use the <em>anslistings</em> code environment with <code class="docutils literal"><span class="pre">ptex2tex</span></code>
(<code class="docutils literal"><span class="pre">.ptex2tex.cfg</span></code> styles <code class="docutils literal"><span class="pre">Python_ANS</span></code>, <code class="docutils literal"><span class="pre">Python_ANSt</span></code>, <code class="docutils literal"><span class="pre">Cpp_ANS</span></code>, etc.) or
<code class="docutils literal"><span class="pre">doconce</span> <span class="pre">ptex2tex</span></code> (<code class="docutils literal"><span class="pre">envir=ans</span></code> or <code class="docutils literal"><span class="pre">envir=ans:nt</span></code>), you need the
<code class="docutils literal"><span class="pre">anslistings.sty</span></code> file. It can be obtained from
the <a class="reference external" href="https://code.google.com/p/ptex2tex/source/browse/trunk/latex/styles/with_license/anslistings.sty">ptex2tex source</a>. The same code style is in
&#8220;modern DocOnce&#8221; just implemented by the command-line option</p>
<div class="highlight-text"><div class="highlight"><pre>&quot;--latex_code_style=default:lst[style=yellow2_fb]&quot;
</pre></div>
</div>
</div>
<div class="section" id="sphinx-or-restructuredtext-output">
<h4>Sphinx or reStructuredText Output<a class="headerlink" href="#sphinx-or-restructuredtext-output" title="Permalink to this headline">¶</a></h4>
<p>Output to <code class="docutils literal"><span class="pre">sphinx</span></code> or <code class="docutils literal"><span class="pre">rst</span></code> requires the
<a class="reference external" href="http://sphinx.pocoo.org">Sphinx software</a>,
installed by</p>
<div class="highlight-text"><div class="highlight"><pre>pip install sphinx --upgrade
</pre></div>
</div>
<p>DocOnce comes with many Sphinx themes that are not part of the
standard Sphinx source distribution:</p>
<blockquote>
<div><ul class="simple">
<li>cloud and redcloud: <a class="reference external" href="https://bitbucket.org/ecollins/cloud_sptheme">https://bitbucket.org/ecollins/cloud_sptheme</a></li>
<li>bootstrap: <a class="reference external" href="https://github.com/ryan-roemer/sphinx-bootstrap-theme">https://github.com/ryan-roemer/sphinx-bootstrap-theme</a></li>
<li>solarized: <a class="reference external" href="https://bitbucket.org/miiton/sphinxjp.themes.solarized">https://bitbucket.org/miiton/sphinxjp.themes.solarized</a></li>
<li>impressjs: <a class="reference external" href="https://github.com/shkumagai/sphinxjp.themes.impressjs">https://github.com/shkumagai/sphinxjp.themes.impressjs</a></li>
<li>sagecellserver: <a class="reference external" href="https://github.com/kriskda/sphinx-sagecell">https://github.com/kriskda/sphinx-sagecell</a></li>
</ul>
</div></blockquote>
<p>Appropriate installation commands for these themes are</p>
<div class="highlight-text"><div class="highlight"><pre>pip install -e hg+https://bitbucket.org/ecollins/cloud_sptheme#egg=cloud_sptheme
pip install -e git+https://github.com/ryan-roemer/sphinx-bootstrap-theme#egg=sphinx-bootstrap-theme
pip install -e hg+https://bitbucket.org/miiton/sphinxjp.themes.solarized#egg=sphinxjp.themes.solarized
pip install -e git+https://github.com/shkumagai/sphinxjp.themes.impressjs#egg=sphinxjp.themes.impressjs
pip install -e git+https://github.com/kriskda/sphinx-sagecell#egg=sphinx-sagecell
</pre></div>
</div>
<p>It can also be handy to have special typesetting of IPython sessions:</p>
<div class="highlight-text"><div class="highlight"><pre>pip install -e git+https://bitbucket.org/hplbit/pygments-ipython-console#egg=pygments-ipython-console
</pre></div>
</div>
<p>To make OpenOffice or LibreOffice documents from <code class="docutils literal"><span class="pre">rst</span></code> output, you
will need more software, typically the following on a Debian system:</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install unovonv libreoffice libreoffice-dmaths
</pre></div>
</div>
</div>
<div class="section" id="markdown-and-pandoc-output">
<h4>Markdown and Pandoc Output<a class="headerlink" href="#markdown-and-pandoc-output" title="Permalink to this headline">¶</a></h4>
<p>The DocOnce format <code class="docutils literal"><span class="pre">pandoc</span></code> outputs the document in various Markdown
versions: the Pandoc
extended Markdown format (which via the <code class="docutils literal"><span class="pre">pandoc</span></code> program can be
translated to a range of other formats), strict Markdown, and
GitHub-flavored Markdown. Installation of <a class="reference external" href="http://johnmacfarlane.net/pandoc/">Pandoc</a>, written in Haskell, is most
easily done by</p>
<div class="highlight-text"><div class="highlight"><pre>sudo apt-get install pandoc
</pre></div>
</div>
<p>on Debian (Ubuntu) systems.</p>
</div>
<div class="section" id="epydoc-output">
<h4>Epydoc Output<a class="headerlink" href="#epydoc-output" title="Permalink to this headline">¶</a></h4>
<p>When the output format is <code class="docutils literal"><span class="pre">epydoc</span></code> one needs that program too, installed
by</p>
<div class="highlight-text"><div class="highlight"><pre>svn co https://epydoc.svn.sourceforge.net/svnroot/epydoc/trunk/epydoc epydoc
cd epydoc
sudo make install
cd ..
</pre></div>
</div>
<p><strong>Remark.</strong>
Several of the packages above installed from source code
are also available in Debian-based system through the
<code class="docutils literal"><span class="pre">apt-get</span> <span class="pre">install</span></code> command. However, we recommend installation directly
from the version control system repository as there might be important
updates and bug fixes. For <code class="docutils literal"><span class="pre">svn</span></code> directories, go to the directory,
run <code class="docutils literal"><span class="pre">svn</span> <span class="pre">update</span></code>, and then <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code>. For
Mercurial (<code class="docutils literal"><span class="pre">hg</span></code>) directories, go to the directory, run
<code class="docutils literal"><span class="pre">hg</span> <span class="pre">pull;</span> <span class="pre">hg</span> <span class="pre">update</span></code>, and then <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code>.</p>
</div>
<div class="section" id="analyzing-file-differences">
<h4>Analyzing file differences<a class="headerlink" href="#analyzing-file-differences" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">diff</span> <span class="pre">file1</span> <span class="pre">file</span> <span class="pre">prog</span></code> command for illustrating differences between
two files <code class="docutils literal"><span class="pre">file1</span></code> and <code class="docutils literal"><span class="pre">file2</span></code> using the program <code class="docutils literal"><span class="pre">prog</span></code> requires <code class="docutils literal"><span class="pre">prog</span></code>
to be installed. By default, <code class="docutils literal"><span class="pre">prog</span></code> is <code class="docutils literal"><span class="pre">difflib</span></code> which comes with Python
and is always present if you have DocOnce installed. Another choice, <code class="docutils literal"><span class="pre">diff</span></code>,
should be available on all Unix/Linux systems. Other choices, their
URL, and their <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span></code> command on Debian (Ubuntu) systems
appear in the table below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="49%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Program</th>
<th class="head">URL</th>
<th class="head">Debian/Ubuntu install</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">pdiff</span></code></td>
<td><a class="reference external" href="http://www.gnu.org/software/a2ps/">a2ps</a> <a class="reference external" href="http://www.gnu.org/software/wdiff/">wdiff</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">a2ps</span> <span class="pre">wdiff</span> <span class="pre">texlive-latex-extra</span> <span class="pre">texlive-latex-recommended</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">latexdiff</span></code></td>
<td><a class="reference external" href="http://www.ctan.org/pkg/latexdiff">latexdiff</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">latexdiff</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">kdiff3</span></code></td>
<td><a class="reference external" href="http://kdiff3.sourceforge.net/">kdiff3</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">kdiff3</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">diffuse</span></code></td>
<td><a class="reference external" href="http://diffuse.sourceforge.net/">diffuse</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">diffuse</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">xxdiff</span></code></td>
<td><a class="reference external" href="http://xxdiff.sourceforge.net/local/">xxdiff</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">xxdiff</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">meld</span></code></td>
<td><a class="reference external" href="http://meldmerge.org/">meld</a></td>
<td><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">meld</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">tkdiff.tcl</span></code></td>
<td><a class="reference external" href="https://sourceforge.net/projects/tkdiff/">tkdiff</a></td>
<td>not in Debian</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="basic-parsing-ideas">
<h2>Basic Parsing Ideas<a class="headerlink" href="#basic-parsing-ideas" title="Permalink to this headline">¶</a></h2>
<p>The (parts of) files with computer code to be directly included in
the document are first copied into verbatim blocks.</p>
<p>All verbatim and TeX blocks are removed and stored elsewhere
to ensure that no formatting rules are not applied to these blocks.</p>
<p>The text is examined line by line for typesetting of lists, as well as
handling of blank lines and comment lines.  List parsing needs some
awareness of the context.  Each line is interpreted by a regular
expression</p>
<div class="highlight-doconce"><div class="highlight"><pre>(?P&lt;indent&gt; *(?P&lt;listtype&gt;[*o-] )? *)(?P&lt;keyword&gt;[^:]+?:)?(?P&lt;text&gt;.*)\s?
</pre></div>
</div>
<p>That is, a possible indent (which we measure), an optional list
item identifier, optional space, optional words ended by colon,
and optional text. All lines are of this form. However, some
ordinary (non-list) lines may contain a colon, and then the keyword
and text group must be added to get the line contents. Otherwise,
the text group will be the line.</p>
<p>When lists are typeset, the text is examined for sections, paragraphs,
title, author, date, plus all the inline tags for emphasized, boldface,
and verbatim text. Plain subsitutions based on regular expressions
are used for this purpose.</p>
<p>The final step is to insert the code and TeX blocks again (these should
be untouched and are therefore left out of the previous parsing).</p>
<p>It is important to keep the DocOnce format and parsing simple.  When a
new format is needed and this format is not obtained by a simple edit
of the definition of existing formats, it might be better to convert
the document to reST and then to XML, parse the XML and
write out in the new format.  When the DocOnce format is not
sufficient to getting the layout you want, it is suggested to filter
the document to another, more complex format, say reST or
LaTeX, and work further on the document in this format.</p>
<div class="section" id="typesetting-of-function-arguments-return-values-and-variables">
<h3>Typesetting of Function Arguments, Return Values, and Variables<a class="headerlink" href="#typesetting-of-function-arguments-return-values-and-variables" title="Permalink to this headline">¶</a></h3>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p>This text is somewhat outdated.
Now DocOnce supports NumPy-style docstrings. DocOnce can also do
automatic references to Python documentation, say the <a class="reference external" href="http://docs.python.org/2.7/library/math.html#module-math" title="(in Python v2.7)"><code class="xref py py-mod docutils literal"><span class="pre">math</span></code></a>
module, but the link only works in case of Sphinx output.
Typical syntax is</p>
<div class="highlight-doconce"><div class="highlight"><pre>With :mod:`numpy` and the :func:`scipy.io.loadmat` function in
the :mod:`scipy.io` module, we can ...
</pre></div>
</div>
<p>In case of ambiguous names, say a local <code class="docutils literal"><span class="pre">math</span></code> module, one can
use <code class="docutils literal"><span class="pre">python</span></code>, <code class="docutils literal"><span class="pre">numpy</span></code>, <code class="docutils literal"><span class="pre">scipy</span></code>, and <code class="docutils literal"><span class="pre">mpl</span></code> (matplotlib) as prefix
(as defined in <code class="docutils literal"><span class="pre">conf.py</span></code>, generated by the <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">sphinx_dir</span></code>):</p>
<div class="highlight-doconce"><div class="highlight"><pre>With :func:`python:math.sin` instead of :func:`math.sin` ...
</pre></div>
</div>
<p>(More info in the Sphinx API doc by the author - under development.)</p>
<p class="last">A Mako function can provide greater flexibility such that
other formats than Sphinx can take advantage of such references
(full URL can be built into the function, depending on the format).</p>
</div>
<blockquote>
<div><p>As part of comments (or doc strings) in computer code one often wishes
to explain what a function takes of arguments and what the return
values are. Similarly, it is desired to document class, instance, and
module variables.  Such arguments/variables can be typeset as
description lists of the form listed below and <em>placed at the end of
the doc string</em>. Note that <code class="docutils literal"><span class="pre">argument</span></code>, <code class="docutils literal"><span class="pre">keyword</span> <span class="pre">argument</span></code>, <code class="docutils literal"><span class="pre">return</span></code>,
<code class="docutils literal"><span class="pre">instance</span> <span class="pre">variable</span></code>, <code class="docutils literal"><span class="pre">class</span> <span class="pre">variable</span></code>, and <code class="docutils literal"><span class="pre">module</span> <span class="pre">variable</span></code> are the
only legal keywords (descriptions) for the description list in this
context.  If the output format is Epytext (Epydoc) or Sphinx, such lists of
arguments and variables are nicely formatted.</p>
<div class="highlight-text"><div class="highlight"><pre>- argument x: x value (float),
  which must be a positive number.
- keyword argument tolerance: tolerance (float) for stopping
  the iterations.
- return: the root of the equation (float), if found, otherwise None.
- instance variable eta: surface elevation (array).
- class variable items: the total number of MyClass objects (int).
- module variable debug: True: debug mode is on; False: no debugging
  (bool variable).
</pre></div>
</div>
<p>The result depends on the output format: all formats except Epytext
and Sphinx just typeset the list as a list with keywords.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">var x:</th><td class="field-body">x value (float),
which must be a positive number.</td>
</tr>
<tr class="field-even field"><th class="field-name">var tolerance:</th><td class="field-body">tolerance (float) for stopping
the iterations.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<div class="admonition-note admonition">
<p class="first admonition-title">Note</p>
<p class="last">The references below are just for illustrating and testing citation
syntax and not references for explaining parts of the text.</p>
</div>
<table class="docutils citation" frame="void" id="ref1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id11">[Ref1]</a></td><td><strong>D. E. Knuth</strong>. Theory and Practice,
<em>EATCS Bulletin</em>,
27,
pp. 14-21,
1985.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ref2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Ref2]</td><td><em>(<a class="fn-backref" href="#id18">1</a>, <a class="fn-backref" href="#id19">2</a>)</em> <strong>H. P. Langtangen</strong>. A Document for Testing DocOnce,
<a class="reference external" href="http://hplgit.github.io/doconce/test/demo_testdoc.html">http://hplgit.github.io/doconce/test/demo_testdoc.html</a>.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ref3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Ref3]</td><td><em>(<a class="fn-backref" href="#id25">1</a>, <a class="fn-backref" href="#id30">2</a>)</em> <strong>H. P. Langtangen and G. Pedersen</strong>. Propagation of Large Destructive Waves,
<em>International Journal of Applied Mechanics and Engineering</em>,
7(1),
pp. 187-204,
2002.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ref4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Ref4]</td><td><em>(<a class="fn-backref" href="#id26">1</a>, <a class="fn-backref" href="#id32">2</a>, <a class="fn-backref" href="#id33">3</a>)</em> <strong>H. P. Langtangen, K.-A. Mardal and R. Winther</strong>. Numerical Methods for Incompressible Viscous Flow,
<em>Advances in Water Resources</em>,
25,
pp. 1125-1146,
2002.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ref5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id27">[Ref5]</a></td><td><strong>H. P. Langtangen</strong>. Numerical Solution of First Passage Problems in Random Vibrations,
<em>SIAM Journal of Scientific and Statistical Computing</em>,
15,
pp. 997-996,
1994.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ref6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Ref6]</td><td><em>(<a class="fn-backref" href="#id28">1</a>, <a class="fn-backref" href="#id31">2</a>)</em> <strong>K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen</strong>. Software Tools for Multigrid Methods,
Advanced Topics in Computational Partial Differential Equations &#8211; Numerical Methods and Diffpack Programming,
edited by <strong>H. P. Langtangen and A. Tveito</strong>,
Springer,
2003.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ref7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id29">[Ref7]</a></td><td><strong>H. P. Langtangen</strong>. The FEMDEQS Program System,
<em>Department of Mathematics, University of Oslo</em>,
1989.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <center>
            <p class="logo"><a href="http://cbc.simula.no/" title="Go to Center for Biomedical Computing">
              <img class="logo" src="_static/cbc_logo.png" alt="Logo"/>
            </a></p>
            </center>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">DocOnce Description</a><ul>
<li><a class="reference internal" href="#what-is-doconce">What Is DocOnce?</a><ul>
<li><a class="reference internal" href="#demos">Demos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#markup-based-on-special-lines">Markup Based on Special Lines</a><ul>
<li><a class="reference internal" href="#heading-with-title-and-author-s">Heading with title and author(s)</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
<li><a class="reference internal" href="#table-of-contents">Table of contents</a></li>
<li><a class="reference internal" href="#section-headings">Section headings</a></li>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#appendix">Appendix</a></li>
<li><a class="reference internal" href="#figures-1">Figures</a><ul>
<li><a class="reference internal" href="#basic-syntax">Basic syntax</a></li>
<li><a class="reference internal" href="#figure-placement">Figure Placement</a></li>
<li><a class="reference internal" href="#figure-references">Figure References</a></li>
<li><a class="reference internal" href="#inline-figures">Inline Figures</a></li>
<li><a class="reference internal" href="#handling-variable-figure-paths">Handling Variable Figure Paths</a></li>
<li><a class="reference internal" href="#figures-with-subfigures">Figures with Subfigures</a></li>
<li><a class="reference internal" href="#sidecaption-in-latex-and-html">Sidecaption in LaTeX and HTML</a></li>
<li><a class="reference internal" href="#plot-files-in-latex">Plot Files in LaTeX</a></li>
<li><a class="reference internal" href="#interactive-bokeh-plots-for-html">Interactive Bokeh Plots for HTML</a></li>
<li><a class="reference internal" href="#converting-matplotlib-plots-to-bokeh">Converting Matplotlib Plots to Bokeh</a></li>
</ul>
</li>
<li><a class="reference internal" href="#movies-1">Movies</a><ul>
<li><a class="reference internal" href="#the-basic-command">The Basic Command</a></li>
<li><a class="reference internal" href="#mp4-webm-and-ogg-movies-in-html">MP4, WebM, and Ogg Movies in HTML</a></li>
<li><a class="reference internal" href="#movie-handling-in-various-formats">Movie Handling in Various Formats</a></li>
<li><a class="reference internal" href="#youtube-and-vimeo-movies">YouTube and Vimeo Movies</a></li>
<li><a class="reference internal" href="#animation-based-on-filename-generators">Animation Based on Filename Generators</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copying-computer-code-from-source-files">Copying Computer Code from Source Files</a></li>
<li><a class="reference internal" href="#inserting-the-output-from-operating-system-commands">Inserting the Output from Operating System Commands</a></li>
<li><a class="reference internal" href="#comments">Comments</a></li>
<li><a class="reference internal" href="#tables">Tables</a><ul>
<li><a class="reference internal" href="#index-25">Basic Syntax</a></li>
<li><a class="reference internal" href="#tables-to-from-csv-data-files">Tables to/from CSV Data Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lists">Lists</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inline-tagging">Inline Tagging</a><ul>
<li><a class="reference internal" href="#emphasized-words">Emphasized Words</a></li>
<li><a class="reference internal" href="#inline-verbatim-text">Inline Verbatim Text</a></li>
<li><a class="reference internal" href="#links-to-web-addresses">Links to Web Addresses</a></li>
<li><a class="reference internal" href="#links-to-mail-addresses">Links to Mail Addresses</a></li>
<li><a class="reference internal" href="#links-to-local-files">Links to Local Files</a></li>
<li><a class="reference internal" href="#quotes">Quotes</a></li>
<li><a class="reference internal" href="#non-breaking-space">Non-Breaking Space</a></li>
<li><a class="reference internal" href="#horizontal-rule">Horizontal rule</a></li>
<li><a class="reference internal" href="#em-dash">Em-dash</a></li>
<li><a class="reference internal" href="#ampersand">Ampersand</a></li>
<li><a class="reference internal" href="#footnotes">Footnotes</a></li>
<li><a class="reference internal" href="#inline-comments">Inline Comments</a></li>
<li><a class="reference internal" href="#inline-comments-for-editing">Inline Comments for Editing</a></li>
<li><a class="reference internal" href="#forced-line-breaks">Forced Line Breaks</a></li>
<li><a class="reference internal" href="#inline-mathematics">Inline Mathematics</a></li>
<li><a class="reference internal" href="#cross-referencing">Cross-Referencing</a></li>
<li><a class="reference internal" href="#generalized-cross-referencing">Generalized Cross-Referencing</a><ul>
<li><a class="reference internal" href="#generalized-references">Generalized References</a></li>
<li><a class="reference internal" href="#generalized-references-to-chapters">Generalized References to Chapters</a></li>
<li><a class="reference internal" href="#generalized-references-to-latex-documents">Generalized References to LaTeX Documents</a></li>
<li><a class="reference internal" href="#tool-for-generating-generalizedd-references">Tool for Generating Generalizedd References</a></li>
<li><a class="reference internal" href="#a-worked-example">A Worked Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#index">Index</a></li>
<li><a class="reference internal" href="#emojis">Emojis</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exercises-problems-projects-and-examples">Exercises, Problems, Projects, and Examples</a><ul>
<li><a class="reference internal" href="#examples-on-exercise-syntax">Examples on Exercise Syntax</a></li>
<li><a class="reference internal" href="#typesetting-of-exercises">Typesetting of Exercises</a><ul>
<li><a class="reference internal" href="#remark-on-typesettng-of-examples">Remark on Typesettng of Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-of-exercises-problems-and-projects">List of Exercises, Problems, and Projects</a></li>
<li><a class="reference internal" href="#numbering-of-extra-equations-in-solutions">Numbering of Extra Equations in Solutions</a><ul>
<li><a class="reference internal" href="#book">Book</a></li>
<li><a class="reference internal" href="#use-the-tag-command">Use the tag command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#extracting-all-exercises-in-a-separate-document">Extracting All Exercises in a Separate Document</a></li>
<li><a class="reference internal" href="#extracting-all-exercises-as-stand-alone-documents">Extracting All Exercises as Stand-Alone Documents</a></li>
<li><a class="reference internal" href="#example-on-an-exercise">Example on an Exercise</a></li>
<li><a class="reference internal" href="#exercise-1-compute-integrals">Exercise 1: Compute integrals</a><ul>
<li><a class="reference internal" href="#remarks">Remarks</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#other-environments">Other Environments</a><ul>
<li><a class="reference internal" href="#blocks-of-verbatim-computer-code">Blocks of Verbatim Computer Code</a><ul>
<li><a class="reference internal" href="#typesetting-styles">Typesetting Styles</a></li>
<li><a class="reference internal" href="#executable-and-non-executable-code">Executable and Non-Executable Code</a></li>
<li><a class="reference internal" href="#customizing-code-environments-types-for-sphinx">Customizing Code Environments Types for Sphinx</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#copying-code-from-source-files">Copying Code from Source Files</a></li>
<li><a class="reference internal" href="#the-fromto-and-from-to-directives">The <code class="docutils literal"><span class="pre">fromto</span></code> and <code class="docutils literal"><span class="pre">from-to</span></code> directives</a></li>
</ul>
</li>
<li><a class="reference internal" href="#latex-blocks-of-mathematical-text">LaTeX Blocks of Mathematical Text</a><ul>
<li><a class="reference internal" href="#support-of-latex-math-in-various-output-formats">Support of LaTeX Math in Various Output Formats</a></li>
<li><a class="reference internal" href="#epub">ePub</a></li>
<li><a class="reference internal" href="#apple-ibook-format">Apple iBook Format</a></li>
<li><a class="reference internal" href="#dealing-with-mathematics-in-formats-without-latex-math-support">Dealing with Mathematics in Formats without LaTeX Math Support</a></li>
<li><a class="reference internal" href="#mathematics-for-powerpoint-openoffice">Mathematics for PowerPoint/OpenOffice</a></li>
</ul>
</li>
<li><a class="reference internal" href="#macros-newcommands">Macros (Newcommands)</a></li>
<li><a class="reference internal" href="#writing-guidelines-especially-for-latex-users">Writing Guidelines (Especially for LaTeX Users!)</a></li>
<li><a class="reference internal" href="#typesetting-of-algorithms">Typesetting of Algorithms</a></li>
<li><a class="reference internal" href="#admonitions-1">Admonitions</a><ul>
<li><a class="reference internal" href="#examples-on-admonition-types">Examples on Admonition Types</a></li>
<li><a class="reference internal" href="#layout-of-admonitions-in-html">Layout of Admonitions in HTML</a></li>
<li><a class="reference internal" href="#layout-of-admonitions-in-latex">Layout of Admonitions in LaTeX</a></li>
<li><a class="reference internal" href="#latex-code-environments-inside-admonitions">LaTeX code Environments Inside Admonitions</a></li>
<li><a class="reference internal" href="#the-box-environment">The Box Environment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#user-defined-environments">User-Defined Environments</a></li>
<li><a class="reference internal" href="#example-1-addition">Example 1: Addition</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bibliography-references">Bibliography (References)</a><ul>
<li><a class="reference internal" href="#importing-your-data-to-the-publish-database">Importing your data to the Publish database</a></li>
<li><a class="reference internal" href="#requirements-to-input-data">Requirements to input data</a></li>
<li><a class="reference internal" href="#adding-new-references-to-the-database">Adding new references to the database</a></li>
<li><a class="reference internal" href="#exporting-the-database">Exporting the database</a></li>
<li><a class="reference internal" href="#referring-to-publications">Referring to publications</a></li>
<li><a class="reference internal" href="#specifying-the-publish-database">Specifying the Publish database</a></li>
<li><a class="reference internal" href="#latex-bibliography-style">LaTeX Bibliography Style</a></li>
</ul>
</li>
<li><a class="reference internal" href="#preprocessing-and-postprocessing">Preprocessing and Postprocessing</a><ul>
<li><a class="reference internal" href="#the-preprocess-and-mako-preprocessors">The Preprocess and Mako Preprocessors</a></li>
<li><a class="reference internal" href="#splitting-documents-into-smaller-pieces">Splitting Documents into Smaller Pieces</a></li>
</ul>
</li>
<li><a class="reference internal" href="#writing-slides">Writing Slides</a><ul>
<li><a class="reference internal" href="#overview-1">Overview</a><ul>
<li><a class="reference internal" href="#slide-types">Slide Types</a></li>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
</ul>
</li>
<li><a class="reference internal" href="#slide-elements">Slide Elements</a><ul>
<li><a class="reference internal" href="#title-page">Title page</a></li>
<li><a class="reference internal" href="#parts-page">Parts Page</a></li>
<li><a class="reference internal" href="#standard-bullet-list-page">Standard bullet list page</a></li>
<li><a class="reference internal" href="#equations-movies-figures">Equations, movies, figures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#html5-slides">HTML5 Slides</a><ul>
<li><a class="reference internal" href="#potential-problems">Potential Problems</a></li>
</ul>
</li>
<li><a class="reference internal" href="#latex-beamer-slides">LaTeX Beamer Slides</a><ul>
<li><a class="reference internal" href="#themes-1">Themes</a></li>
<li><a class="reference internal" href="#pop-of-list-items-and-blocks">Pop of list items and blocks</a></li>
<li><a class="reference internal" href="#compilation">Compilation</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#misc">Misc</a><ul>
<li><a class="reference internal" href="#missing-features">Missing Features</a></li>
<li><a class="reference internal" href="#git-gitignore-file">Git <code class="docutils literal"><span class="pre">.gitignore</span></code> File</a></li>
<li><a class="reference internal" href="#emacs-doconce-formatter">Emacs DocOnce Formatter</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mako-programming">Mako Programming</a><ul>
<li><a class="reference internal" href="#the-basics-of-mako">The Basics of Mako</a></li>
<li><a class="reference internal" href="#debugging-python-code-in-mako">Debugging Python code in Mako</a></li>
<li><a class="reference internal" href="#example-nomenclature-functionality">Example: Nomenclature functionality</a></li>
<li><a class="reference internal" href="#example-executing-python-and-using-sympy-objects-in-latex">Example: Executing Python and using SymPy Objects in LaTeX</a></li>
<li><a class="reference internal" href="#example-extending-tables-to-handle-figures">Example: Extending Tables to Handle Figures</a><ul>
<li><a class="reference internal" href="#solution-for-latex-and-html">Solution for LaTeX and HTML</a></li>
<li><a class="reference internal" href="#generating-the-entire-table">Generating the Entire Table</a></li>
<li><a class="reference internal" href="#generating-the-entire-table-in-a-native-format-via-mako">Generating the Entire Table in a Native Format via Mako</a></li>
<li><a class="reference internal" href="#generating-the-entire-table-in-a-native-format-as-a-post-process">Generating the Entire Table in a Native Format as a Post Process</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-defining-a-theorem-environment">Example: Defining a Theorem Environment</a></li>
<li><a class="reference internal" href="#tools-for-writing-doconce-documents">Tools for Writing DocOnce Documents</a></li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#from-doconce-to-other-formats">From DocOnce to Other Formats</a><ul>
<li><a class="reference internal" href="#writing-a-makefile">Writing a Makefile</a></li>
<li><a class="reference internal" href="#generating-a-makefile">Generating a Makefile</a></li>
<li><a class="reference internal" href="#preprocessing">Preprocessing</a><ul>
<li><a class="reference internal" href="#variable-substition-with-preprocessors">Variable Substition with Preprocessors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#removal-of-inline-comments">Removal of Inline Comments</a></li>
<li><a class="reference internal" href="#notes">Notes</a></li>
<li><a class="reference internal" href="#demo-of-different-formats">Demo of Different Formats</a></li>
<li><a class="reference internal" href="#tweaking-the-doconce-output">Tweaking the DocOnce Output</a></li>
<li><a class="reference internal" href="#useful-options-for-doconce-format">Useful Options for <code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#html">HTML</a><ul>
<li><a class="reference internal" href="#basic-html-output">Basic HTML Output</a></li>
<li><a class="reference internal" href="#typesetting-of-code">Typesetting of Code</a></li>
<li><a class="reference internal" href="#handling-of-movies">Handling of Movies</a></li>
<li><a class="reference internal" href="#html-styles">HTML Styles</a></li>
<li><a class="reference internal" href="#html-templates">HTML templates</a></li>
<li><a class="reference internal" href="#splitting-html-documents">Splitting HTML documents</a><ul>
<li><a class="reference internal" href="#the-html-file-collection">The HTML File Collection</a></li>
<li><a class="reference internal" href="#filenames">Filenames</a></li>
</ul>
</li>
<li><a class="reference internal" href="#url-to-files-hosted-on-github">URL to files hosted on GitHub</a></li>
<li><a class="reference internal" href="#other-html-options">Other HTML options</a></li>
<li><a class="reference internal" href="#blog-posts">Blog Posts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pandoc-and-markdown">Pandoc and Markdown</a><ul>
<li><a class="reference internal" href="#markdown-to-html-conversion">Markdown to HTML conversion</a></li>
<li><a class="reference internal" href="#strict-markdown">Strict Markdown</a></li>
<li><a class="reference internal" href="#github-flavored-markdown">GitHub-flavored Markdown</a></li>
<li><a class="reference internal" href="#multimarkdown">MultiMarkdown</a></li>
<li><a class="reference internal" href="#strapdown-rendering-of-markdown-text">Strapdown rendering of Markdown text</a></li>
<li><a class="reference internal" href="#using-pandoc-to-go-from-latex-to-ms-word-or-html">Using Pandoc to go from LaTeX to MS Word or HTML</a></li>
</ul>
</li>
<li><a class="reference internal" href="#latex">LaTeX</a><ul>
<li><a class="reference internal" href="#overview-2">Overview</a></li>
<li><a class="reference internal" href="#the-old-ptex2tex-step">The old <code class="docutils literal"><span class="pre">ptex2tex</span></code> step</a></li>
<li><a class="reference internal" href="#latex-pdf-generate-latex-step-1">LaTeX-PDF: Generate LaTeX (Step 1)</a><ul>
<li><a class="reference internal" href="#the-translation-command">The translation command</a></li>
<li><a class="reference internal" href="#id36">Newcommands</a></li>
<li><a class="reference internal" href="#output-for-paper-vs-screen">Output for paper vs screen</a></li>
<li><a class="reference internal" href="#command-line-options">Command-line options</a></li>
<li><a class="reference internal" href="#syntax-highlighting">Syntax highlighting</a></li>
<li><a class="reference internal" href="#drafts">Drafts</a></li>
<li><a class="reference internal" href="#potential-problems-with-ampersand">Potential problems with ampersand</a></li>
<li><a class="reference internal" href="#part-2-of-step-1-outdated">Part 2 of Step 1 (outdated)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#latex-pdf-edit-the-latex-file-step-2-optional">LaTeX-PDF: Edit the LaTeX File (Step 2, Optional)</a></li>
<li><a class="reference internal" href="#latex-pdf-generate-pdf-step-3">LaTeX-PDF: Generate PDF (Step 3)</a></li>
<li><a class="reference internal" href="#xelatex">XeLaTeX</a></li>
<li><a class="reference internal" href="#from-pdf-to-e-book-formats">From PDF to e-book formats</a></li>
<li><a class="reference internal" href="#microsoft-word-or-libreoffice">Microsoft Word or LibreOffice</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jupyter-ipython-notebooks">Jupyter (IPython) Notebooks</a><ul>
<li><a class="reference internal" href="#hidden-code-blocks">Hidden code blocks</a></li>
<li><a class="reference internal" href="#displaying-code-as-plain-text-instead-of-executable-cells">Displaying code as plain text instead of executable cells</a></li>
<li><a class="reference internal" href="#figures-2">Figures</a></li>
<li><a class="reference internal" href="#movies-2">Movies</a></li>
<li><a class="reference internal" href="#admonitions-2">Admonitions</a></li>
<li><a class="reference internal" href="#references-to-an-external-textbook">References to an External Textbook</a></li>
</ul>
</li>
<li><a class="reference internal" href="#matlab-notebooks">Matlab Notebooks</a></li>
<li><a class="reference internal" href="#plain-ascii-text">Plain ASCII Text</a></li>
<li><a class="reference internal" href="#restructuredtext">reStructuredText</a></li>
<li><a class="reference internal" href="#sphinx">Sphinx</a><ul>
<li><a class="reference internal" href="#the-basic-steps">The Basic Steps</a></li>
<li><a class="reference internal" href="#links">Links</a></li>
<li><a class="reference internal" href="#themes-2">Themes</a><ul>
<li><a class="reference internal" href="#using-a-your-own-configuration-file">Using a Your Own Configuration File</a></li>
<li><a class="reference internal" href="#compiling-multiple-themes">Compiling Multiple Themes</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#runestoneinteractive-books">RunestoneInteractive books</a></li>
<li><a class="reference internal" href="#the-manual-sphinx-procedure">The manual Sphinx procedure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wiki-formats">Wiki Formats</a></li>
<li><a class="reference internal" href="#google-docs">Google Docs</a></li>
<li><a class="reference internal" href="#options-for-the-doconce-commands">Options for the <code class="docutils literal"><span class="pre">doconce</span></code> commands</a><ul>
<li><a class="reference internal" href="#doconce-format-command-line-options"><code class="docutils literal"><span class="pre">doconce</span> <span class="pre">format</span></code> command-line options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation-of-doconce-and-its-dependencies">Installation of DocOnce and its Dependencies</a><ul>
<li><a class="reference internal" href="#doconce">DocOnce</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a><ul>
<li><a class="reference internal" href="#python-v2-7">Python v2.7</a></li>
<li><a class="reference internal" href="#preprocessors">Preprocessors</a></li>
<li><a class="reference internal" href="#bibliography">Bibliography</a></li>
<li><a class="reference internal" href="#image-file-handling">Image file handling</a></li>
<li><a class="reference internal" href="#spellcheck">Spellcheck</a></li>
<li><a class="reference internal" href="#ptex2tex-for-latex-output">Ptex2tex for LaTeX Output</a></li>
<li><a class="reference internal" href="#pygments-and-the-minted-code-style">Pygments and the Minted Code Style</a></li>
<li><a class="reference internal" href="#latex-packages">LaTeX packages</a></li>
<li><a class="reference internal" href="#sphinx-or-restructuredtext-output">Sphinx or reStructuredText Output</a></li>
<li><a class="reference internal" href="#markdown-and-pandoc-output">Markdown and Pandoc Output</a></li>
<li><a class="reference internal" href="#epydoc-output">Epydoc Output</a></li>
<li><a class="reference internal" href="#analyzing-file-differences">Analyzing file differences</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#basic-parsing-ideas">Basic Parsing Ideas</a><ul>
<li><a class="reference internal" href="#typesetting-of-function-arguments-return-values-and-variables">Typesetting of Function Arguments, Return Values, and Variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">DocOnce Description</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/manual.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="DocOnce Description"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DocOnce Description</a> &raquo;</li> 
      </ul>
    </div>
<div class="wrapper">
  <div class="footer">
    <a href="http://cbc.simula.no"><img src="_static/cbc_banner.png" width="100%"><a>
    <br />
    <br />
      &copy;2015, Hans Petter Langtangen.
  </div>
</div>

  </body>
</html>