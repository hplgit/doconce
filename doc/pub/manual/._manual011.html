<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="DocOnce Description">
<meta name="keywords" content="doconce,demos,author email,author institution,table of contents,headlines,section headings,headings,running programs,output from programs,comment lines,tables,lists,itemized lists,lists unordered,lists bullets,enumerated lists,ordered lists,lists ordered,lists enumerated,description lists,keyword lists,lists descriptions,lists keywords,inline tagging,emphasized words,boldface words,inline verbatim text,verbatim text, inline,links,hyperlinks,quotation syntax,quotation,non-breaking space,non-breaking space,nbsp,horizontal rule,m-dash,em-dash,ampersand,footnotes,inline comments,comments, inline,track changes,inline comments for editing,linebreak,citations,inline mathematics,formulas (math),mathematical formulas,cross referencing,labels,references,citations,citations, generalized,generalized citations,cross-document referencing,index,some index entry,main entry subentry,emojis,smileys,exercise environment,problem environment,project environment,example environment,verbatim text, code blocks,code blocks,syntax highlighting,computer code blocks,mathematical equations,equations,LaTeX blocks with math,MS Word,Word (Microsoft),LaTeX newcommands,newcommands (LaTeX),macros (LaTeX),algorithms,admonitions,warning admon,notice admon,summary admon,question admon,block admon,admonition layout,HTML admonitions,LaTeX admonitions,box environment,frame (box) environment,equation with frame,bibliography,reference list,Publish (for bibliography),BibTeX,bibliography, database,citations,LaTeX bibliographic styles,preprocessing,splitting documents,multi-page documents,slides,HTML5 slides,LaTeX slides,Markdown slides,slide syntax,Emacs doconce support,doconce syntax highlighting,syntax highlighting for doconce,doconce editing (Emacs),preprocessing,inline comments,notes (visible/invisible),demos,HTML output,output format HTML,HTML syntax highlighting,HTML movies,movies in HTML,HTML layouts,HTML templates,splitting documents,multi-page documents,HTML file collection,blog posts,Wordpress blog,Google blogger,output format Markdown,output format Pandoc,Markdown output,Pandoc output,output format strict Markdown,output format GitHub-flavored Markdown,output format strapdown Markdown,LaTeX output,output format LaTeX,LaTeX style options,LaTeX syntax highlighting,output format pdfLaTeX,pdfLaTeX output,output format XeLaTeX,XeLaTeX output,ePub output,output format ePub,output format MS Word,output format LibreOffice,output format OpenOffice,output format notebook,IPython notebook,notebook,output format ASCII,output format plain untagged text,ASCII output,plain untagged text output,output format reStructuredText,reStructuredText output,output format Sphinx,Sphinx output,Sphinx styles,Sphinx directory,output format MediaWiki,output format Creole wiki,output format Google wiki,MediaWiki output,Google wiki output,Creole wiki output,wiki output,Google docs output,tweaking output,automatic editing,command-line options doconce format,installation">

<title>DocOnce Description</title>

<!-- Bootstrap style: bootswatch_readable -->
<link href="http://netdna.bootstrapcdn.com/bootswatch/3.1.1/readable/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->

<style type="text/css">

/*
in.collapse+a.btn.showdetails:before { content:'Hide details'; }
.collapse+a.btn.showdetails:before { content:'Show details'; }
*/
</style>




</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' What Is DocOnce? ', 1, 'what:is:doconce', 'what:is:doconce'),
              (' Demos ', 2, None, '___sec1'),
              (' Markup Based on Special Lines ', 1, None, '___sec2'),
              (' Heading with title and author(s) ', 2, None, '___sec3'),
              (' Table of contents ', 2, None, '___sec4'),
              (' Section headings ', 2, None, '___sec5'),
              (' Figures ', 2, None, '___sec6'),
              (' Sidecaption in LaTeX and HTML ', 3, None, '___sec7'),
              (' Plot Files in LaTeX ', 3, None, '___sec8'),
              (' Movies ', 2, None, '___sec9'),
              (' The Basic Command ', 3, None, '___sec10'),
              (' MP4, WebM, and Ogg Movies in HTML ', 3, None, '___sec11'),
              (' Movie Handling in Various Formats ', 3, None, '___sec12'),
              (' YouTube and Vimeo Movies ', 3, None, '___sec13'),
              (' Animation Based on Filename Generators ',
               3,
               None,
               '___sec14'),
              (' Copying Computer Code from Source Files ',
               2,
               None,
               '___sec15'),
              (' Inserting the Output from Operating System Commands ',
               2,
               None,
               '___sec16'),
              (' Comments ', 2, None, '___sec17'),
              (' Tables ', 2, None, '___sec18'),
              (' Basic Syntax ', 3, None, '___sec19'),
              (' Tables to/from CSV Data Files ', 3, None, '___sec20'),
              (' Lists ', 2, None, '___sec21'),
              (' Inline Tagging ', 1, 'inline:tagging', 'inline:tagging'),
              (' Emphasized Words ', 2, None, '___sec23'),
              (' Inline Verbatim Text ', 2, None, '___sec24'),
              (' Links to Web Addresses ', 2, None, '___sec25'),
              (' Links to Mail Addresses ', 2, None, '___sec26'),
              (' Links to Local Files ', 2, None, '___sec27'),
              (' Quotes ', 2, None, '___sec28'),
              (' Non-Breaking Space ', 2, None, '___sec29'),
              (' Horizontal rule ', 2, None, '___sec30'),
              (' Em-dash ', 2, None, '___sec31'),
              (' Ampersand ', 2, None, '___sec32'),
              (' Footnotes ', 2, None, '___sec33'),
              (' Inline Comments ', 2, None, '___sec34'),
              (' Inline Comments for Editing ', 2, None, '___sec35'),
              (' Forced Line Breaks ', 2, None, '___sec36'),
              (' Inline Mathematics ', 2, None, '___sec37'),
              (' Cross-Referencing ', 2, None, '___sec38'),
              (' Generalized Cross-Referencing ',
               2,
               'manual:genrefs',
               'manual:genrefs'),
              (' Generalized References ', 3, None, '___sec40'),
              (' Generalized References to Chapters ', 3, None, '___sec41'),
              (' Tool for Generating Generalizedd References ',
               3,
               None,
               '___sec42'),
              (' A Worked Example ', 3, None, '___sec43'),
              (' Index ', 2, None, '___sec44'),
              (' Emojis ', 2, None, '___sec45'),
              (' Environments ', 1, None, '___sec46'),
              (' Exercises, Problems, Projects, and Examples ',
               2,
               None,
               '___sec47'),
              (' Typesetting of Exercises ', 3, None, '___sec48'),
              (' Remark on Typesettng of Examples ', 3, None, '___sec49'),
              (' List of Exercises, Problems, and Projects ',
               3,
               None,
               '___sec50'),
              (' Extracting Exercises in a Separate Document ',
               3,
               None,
               '___sec51'),
              (' Example on an Exercise ', 2, None, '___sec52'),
              (' Exercise 1: Compute integrals ',
               2,
               'doconce:manual:exercise:ex',
               'doconce:manual:exercise:ex'),
              (' Remarks ', 3, None, '___sec54'),
              (' Blocks of Verbatim Computer Code ',
               2,
               'sec:verbatim:blocks',
               'sec:verbatim:blocks'),
              (' Typesetting Styles ', 3, None, '___sec56'),
              (' Copying Code from Source Files ', 3, None, '___sec57'),
              (' The `fromto` and `from-to` directives ',
               3,
               None,
               '___sec58'),
              (' LaTeX Blocks of Mathematical Text ',
               2,
               'mathtext',
               'mathtext'),
              (' Support of LaTeX Math in Various Output Formats ',
               3,
               None,
               '___sec60'),
              (' Dealing with Mathematics in Formats without LaTeX Math Support ',
               3,
               None,
               '___sec61'),
              (' Mathematics for PowerPoint/OpenOffice ',
               3,
               None,
               '___sec62'),
              (' Macros (Newcommands) ', 2, 'newcommands', 'newcommands'),
              (' Guidelines for LaTeX Writers ', 2, None, '___sec64'),
              (' Typesetting of Algorithms ', 2, None, '___sec65'),
              (' Admonitions ', 2, None, '___sec66'),
              (' Examples on Admonition Types ', 3, None, '___sec67'),
              (' Layout of admonitions in HTML ', 3, None, '___sec68'),
              (' Layout of admonitions in LaTeX ', 3, None, '___sec69'),
              (' LaTeX code environments inside admonitions ',
               3,
               None,
               '___sec70'),
              (' The Box Environment ', 3, None, '___sec71'),
              (' User-Defined Environments ', 2, None, '___sec72'),
              (' Example 1: Addition ', 2, 'ex:math:1p1', 'ex:math:1p1'),
              (' Bibliography (References) ', 1, None, '___sec74'),
              (' Importing your data to the Publish database ',
               2,
               None,
               '___sec75'),
              (' Requirements to input data ', 2, None, '___sec76'),
              (' Adding new references to the database ',
               2,
               None,
               '___sec77'),
              (' Exporting the database ', 2, None, '___sec78'),
              (' Referring to publications ', 2, None, '___sec79'),
              (' Specifying the Publish database ', 2, None, '___sec80'),
              (' LaTeX Bibliography Style ', 2, None, '___sec81'),
              (' Preprocessing and Postprocessing ', 1, None, '___sec82'),
              (' The Preprocess and Mako Preprocessors ',
               2,
               None,
               '___sec83'),
              (' Splitting Documents into Smaller Pieces ',
               2,
               None,
               '___sec84'),
              (' Writing Slides ', 1, None, '___sec85'),
              (' Overview ', 2, None, '___sec86'),
              (' Slide Types ', 3, None, '___sec87'),
              (' Syntax ', 3, None, '___sec88'),
              (' Slide Elements ', 2, None, '___sec89'),
              (' Title page ', 3, None, '___sec90'),
              (' Parts Page ', 3, None, '___sec91'),
              (' Standard bullet list page ', 3, None, '___sec92'),
              (' Equations, movies, figures ', 3, None, '___sec93'),
              (' HTML5 Slides ', 2, None, '___sec94'),
              (' Potential Problems ', 3, None, '___sec95'),
              (' LaTeX Beamer Slides ', 2, None, '___sec96'),
              (' Themes ', 3, None, '___sec97'),
              (' Pop of list items and blocks ', 3, None, '___sec98'),
              (' Compilation ', 3, None, '___sec99'),
              (' Misc ', 1, None, '___sec100'),
              (' Missing Features ', 2, None, '___sec101'),
              (' Emacs DocOnce Formatter ',
               2,
               'emacs:doconce',
               'emacs:doconce'),
              (' Mako Programming ', 1, 'manual:mako', 'manual:mako'),
              (' The Basics of Mako ', 2, None, '___sec104'),
              (' Debugging Python code in Mako ',
               2,
               'mako:py:debugging',
               'mako:py:debugging'),
              (' Example: Executing Python and using SymPy Objects in LaTeX ',
               2,
               None,
               '___sec106'),
              (' Example: Extending Tables to Handle Figures ',
               2,
               'manual:tables:wfigs',
               'manual:tables:wfigs'),
              (' Solution for LaTeX and HTML ', 3, None, '___sec108'),
              (' Generating the Entire Table ', 3, None, '___sec109'),
              (' Generating the Entire Table in a Native Format via Mako ',
               3,
               None,
               '___sec110'),
              (' Generating the Entire Table in a Native Format as a Post Process ',
               3,
               None,
               '___sec111'),
              (' Example: Defining a Theorem Environment ',
               2,
               'manual:theorem:envir',
               'manual:theorem:envir'),
              (' Tools for Writing DocOnce Documents ', 2, None, '___sec113'),
              (' Debugging ', 2, None, '___sec114'),
              (' From DocOnce to Other Formats ',
               1,
               'doconce2formats',
               'doconce2formats'),
              (' Generating a makefile ', 2, 'do2any:make', 'do2any:make'),
              (' Preprocessing ', 2, 'do2any:pre', 'do2any:pre'),
              (' Removal of inline comments ',
               2,
               'do2any:inlinecomments',
               'do2any:inlinecomments'),
              (' Notes ', 2, 'do2any:notes', 'do2any:notes'),
              (' Demo of different formats ', 2, None, '___sec120'),
              (' Useful Options for `doconce format` ', 2, None, '___sec121'),
              (' HTML ', 2, 'do2any:html', 'do2any:html'),
              (' Basics ', 3, None, '___sec123'),
              (' Typesetting of Code ', 3, None, '___sec124'),
              (' Handling of Movies ', 3, None, '___sec125'),
              (' HTML Styles ', 3, None, '___sec126'),
              (' HTML templates ', 3, None, '___sec127'),
              (' Splitting HTML documents ', 3, None, '___sec128'),
              (' The HTML File Collection ', 3, None, '___sec129'),
              (' Filenames ', 3, None, '___sec130'),
              (' URL to files hosted on GitHub ', 3, None, '___sec131'),
              (' Other HTML options ', 3, None, '___sec132'),
              (' Blog Posts ', 2, 'do2any:blog', 'do2any:blog'),
              (' Pandoc and Markdown ', 2, 'do2any:pandoc', 'do2any:pandoc'),
              (' Markdown to HTML conversion ', 3, None, '___sec135'),
              (' Strict Markdown ', 3, None, '___sec136'),
              (' GitHub-flavored Markdown ', 3, None, '___sec137'),
              (' MultiMarkdown ', 3, None, '___sec138'),
              (' Strapdown rendering of Markdown text ',
               3,
               None,
               '___sec139'),
              (' Using Pandoc to go from LaTeX to MS Word or HTML ',
               3,
               None,
               '___sec140'),
              (' LaTeX ', 2, 'do2any:latex', 'do2any:latex'),
              (' PDFLaTeX ', 2, 'do2any:pdflatex', 'do2any:pdflatex'),
              (' XeLaTeX ', 2, 'do2any:xelatex', 'do2any:xelatex'),
              (' From PDF to e-book formats ',
               2,
               'do2any:epub',
               'do2any:epub'),
              (' Microsoft Word or LibreOffice ',
               2,
               'do2any:MS:ooffice',
               'do2any:MS:ooffice'),
              (' Jupyter (IPython) Notebooks ',
               2,
               'do2any:ipynb',
               'do2any:ipynb'),
              (' Hidden code blocks ', 3, None, '___sec147'),
              (' Displaying code as plain text instead of executable cells ',
               3,
               None,
               '___sec148'),
              (' Figures ', 3, None, '___sec149'),
              (' Movies ', 3, None, '___sec150'),
              (' Admonitions ', 3, None, '___sec151'),
              (' Plain ASCII Text ', 2, 'do2any:ascii', 'do2any:ascii'),
              (' reStructuredText ', 2, 'do2any:rst', 'do2any:rst'),
              (' Sphinx ', 2, 'do2any:sphinx', 'do2any:sphinx'),
              (' The manual Sphinx procedure ', 3, None, '___sec155'),
              (' Wiki Formats ', 2, 'do2any:wiki', 'do2any:wiki'),
              (' Google Docs ',
               2,
               'do2any:google:docs',
               'do2any:google:docs'),
              (' Tweaking the DocOnce Output ',
               2,
               'do2any:tweaking',
               'do2any:tweaking'),
              (' Options for the `doconce` commands ', 1, None, '___sec159'),
              (' `doconce format` command-line options ',
               2,
               None,
               '___sec160'),
              (' Installation of DocOnce and its Dependencies ',
               1,
               'install:doconce',
               'install:doconce'),
              (' DocOnce ', 2, None, '___sec162'),
              (' Dependencies ', 2, None, '___sec163'),
              (' Python v2.7 ', 3, None, '___sec164'),
              (' Preprocessors ', 3, None, '___sec165'),
              (' Bibliography ', 3, None, '___sec166'),
              (' Image file handling ', 3, None, '___sec167'),
              (' Spellcheck ', 3, None, '___sec168'),
              (' Ptex2tex for LaTeX Output ', 3, None, '___sec169'),
              (' Pygments and the Minted Code Style ', 3, None, '___sec170'),
              (' LaTeX packages ', 3, None, '___sec171'),
              (' Sphinx or reStructuredText Output ', 3, None, '___sec172'),
              (' Markdown and Pandoc Output ', 3, None, '___sec173'),
              (' Epydoc Output ', 3, None, '___sec174'),
              (' Analyzing file differences ', 3, None, '___sec175'),
              (' Basic Parsing Ideas ', 1, None, '___sec176'),
              (' Typesetting of Function Arguments, Return Values, and Variables ',
               2,
               None,
               '___sec177'),
              (' References ', 1, None, '___sec178')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="manual.html">DocOnce Description</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._manual000.html#what:is:doconce" style="font-size: 80%;">What Is DocOnce?</a></li>
     <!-- navigation toc: --> <li><a href="._manual003.html#___sec2" style="font-size: 80%;">Markup Based on Special Lines</a></li>
     <!-- navigation toc: --> <li><a href="._manual010.html#inline:tagging" style="font-size: 80%;">Inline Tagging</a></li>
     <!-- navigation toc: --> <li><a href="._manual013.html#___sec46" style="font-size: 80%;">Environments</a></li>
     <!-- navigation toc: --> <li><a href="._manual017.html#___sec74" style="font-size: 80%;">Bibliography (References)</a></li>
     <!-- navigation toc: --> <li><a href="._manual018.html#___sec82" style="font-size: 80%;">Preprocessing and Postprocessing</a></li>
     <!-- navigation toc: --> <li><a href="._manual020.html#___sec85" style="font-size: 80%;">Writing Slides</a></li>
     <!-- navigation toc: --> <li><a href="._manual022.html#___sec100" style="font-size: 80%;">Misc</a></li>
     <!-- navigation toc: --> <li><a href="._manual023.html#manual:mako" style="font-size: 80%;">Mako Programming</a></li>
     <!-- navigation toc: --> <li><a href="._manual028.html#doconce2formats" style="font-size: 80%;">From DocOnce to Other Formats</a></li>
     <!-- navigation toc: --> <li><a href="._manual028.html#___sec159" style="font-size: 80%;">Options for the <code>doconce</code> commands</a></li>
     <!-- navigation toc: --> <li><a href="._manual029.html#install:doconce" style="font-size: 80%;">Installation of DocOnce and its Dependencies</a></li>
     <!-- navigation toc: --> <li><a href="._manual029.html#___sec176" style="font-size: 80%;">Basic Parsing Ideas</a></li>
     <!-- navigation toc: --> <li><a href="._manual029.html#___sec178" style="font-size: 80%;">References</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0011"></a>
<!-- !split -->

<h2 id="___sec38">Cross-Referencing </h2>

<p>
References and labels are supported. The syntax is simple:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000">label{section:verbatim}</span>   # defines a label
For more information we refer to Section ref{section:verbatim}.
</pre></div>
<p>
This syntax is close that that of labels and cross-references in
LaTeX. When the label is placed after a section or subsection heading,
the plain text, Epytext, and StructuredText formats will simply
replace the reference by the title of the (sub)section.  All labels
will become invisible, except those in math environments.  In the
<code>rst</code> and <code>sphinx</code> formats, the end effect is the same, but
the &quot;label&quot; and &quot;ref&quot; commands are first translated to the proper
reST commands by <code>doconce format</code>. In the HTML and wiki formats,
labels become anchors and references become links,
and with LaTeX &quot;label&quot; and &quot;ref&quot; are just equipped with backslashes so
these commands work as usual in LaTeX.

<p>
It is, in general, recommended to use labels and references for
(sub)sections, equations, and figures only.
By the way, here is an example on referencing Figure <a href="._manual005.html#fig:viz">1</a>
(the label appears in the figure caption in the source code of this document).
Additional references to the sections <a href="._manual015.html#mathtext">LaTeX Blocks of Mathematical Text</a> and <a href="._manual016.html#newcommands">Macros (Newcommands)</a> are
nice to demonstrate, as well as a reference to equations,
say <a href="._manual015.html#mjx-eqn-5">(5)</a>-<a href="._manual015.html#mjx-eqn-6">(6)</a>. A comparison of the output and
the source of this document illustrates how labels and references
are handled by the format in question.

<p>
Hyperlinks to files or web addresses are handled as explained
in the section <a href="._manual010.html#inline:tagging">Inline Tagging</a>.

<h2 id="manual:genrefs">Generalized Cross-Referencing</h2>

<p>
Sometimes a series of individual documents may be assembled to one
large document, typically a book.
In the book one wants to make cross references between chapters
and sections, while these become references to external documents
when the chapters (or sections) are compiled as stand-alone
documents. For example, one can in a DocOnce file <code>file1.do.txt</code>
have text like

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">...as shown in Section ref{sec:eqs}.
</pre></div>
<p>
with the label <code>sec:eqs</code> defined in another file <code>file2.do.txt</code>.
If <code>file1.do.txt</code> and <code>file2.do.txt</code> are combined to a single
document, the reference is treated correctly, but if <code>file1.do.txt</code>
is compiled as a single document, the label <code>sec:eqs</code> becomes
undefined. Then one would instead write

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">...as shown in the document &quot;Mathematical Equations&quot;:
<span style="color: #BA2121">&quot;http://some.net/doc/matheqs.html&quot;</span> cite{math_eqs_2020}.
</pre></div>
<p>
LaTeX has functionality for referring to labels
in external documents. One must use the <code>xr</code> package
and list external documents with a command
<code>\externaldocument{name}</code> such that LaTeX can extract label
information from the <code>name.aux</code> file. We are then able to
write the above reference as

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">\externaldocument{file2}
...
...as shown in Section ref{sec:eqs} in cite{math_eqs_2020}.
</pre></div>
<p>
and get output like &quot;...as shown in Section 3.4 in [12].&quot;
When the numbering of sections in <code>file2.tex</code> changes later,
the output from the shown line in <code>file1.tex</code> will automatically
be changed if <code>file2.aux</code> is recently compiled
(so <code>file2.aux</code> with the mapping from labels to section numbers is updated).

<h3 id="___sec40">Generalized References </h3>

<p>
DocOnce mimics a generalization of the LaTeX functionality in the
<code>xr</code> package such that one can refer to external documents in
other formats than LaTeX (HTML, Sphinx, IPython notebooks, wikis, etc.).
This feature is called a <em>generalized reference</em> and involves
a reference with <em>three</em> values.
The syntax of generalized references reads

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">ref[internal][cite][external]
</pre></div>
<p>
If all references in the text <code>internal</code> are
to labels defined in the present DocOnce document, the
generalized reference becomes the text <code>internal</code>.
If one or more references in <code>internal</code> are not labels
present in the document and
<code>latex</code> or <code>pdflatex</code> is the output format,
the generalized reference becomes the
text <code>internal</code> followed by <code>cite</code>, while for all other formats the
text in <code>external</code> is used.

<p>
The example above can now be written as the generalized reference

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">...as shown in ref[Section ref{sec:eqs}][ in cite{math_eqs_2020}][
the document &quot;Mathematical Equations&quot;:
<span style="color: #BA2121">&quot;http://some.net/doc/matheqs.html&quot;</span> cite{math_eqs_2020}].
</pre></div>
<p>
(Note that there must be no spaces between closing and opening brackets: <code>][</code>.)
When the label <code>sec:eqs</code> is found in the current DocOnce document,
this generalized reference becomes

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Section ref{sec:eqs}
</pre></div>
<p>
If not, and <code>latex</code> or <code>pdflatex</code> is the output format,
the reference becomes

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Section ref{sec:eqs}] in cite{math_eqs_2020}
</pre></div>
<p>
while in all other cases the reference becomes

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">the document &quot;Mathematical Equations&quot;:
<span style="color: #BA2121">&quot;http://some.net/doc/matheqs.html&quot;</span> cite{math_eqs_2020}
</pre></div>
<p>
For the reference to a label in an external document
to work in the LaTeX case it is required to list this
document in the DocOnce file as

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #408080; font-style: italic"># Externaldocuments: file2</span>
</pre></div>
<p>
Several external documents can be listed with comma as delimiter:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #408080; font-style: italic"># Externaldocuments: file2, file3, myfile</span>
</pre></div>
<p>
on <em>a single line</em>. The <code>Externaldocuments</code> comment leads to use
of the <code>xr</code> package and insertion of <code>\externaldocument{file2}</code>
in the <code>.tex</code> output file. It is a good habit to place
the <code>Externaldocument</code> comment after the title, author, and date.

<p>
<div class="alert alert-block alert-danger alert-text-normal"><b>External documents must be recently compiled.</b>
When compiling DocOnce documents with generalized references
to <code>latex</code> or <code>pdflatex</code>,
all documents listed in
the <code>Externaldocuments</code> comment must have been recently compiled
such that their <code>.aux</code> files <em>are available and updated</em>.

<p>
Note that cleaning (<code>doconce clean</code>)
of the directory holding an external document will destroy the
<code>.aux</code> file, and <code>latex</code> or <code>pdflatex</code> may then complain that
a file listed as <code>\externaldocument{}</code> has no <code>.aux</code> file.
</div>


<h3 id="___sec41">Generalized References to Chapters </h3>

<p>
A reference to a chapter in a book becomes just
a reference to a complete stand-alone document
if chapters are compiled individually. Here is an example:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">...as shown in Chapter ref{ch:model}.
</pre></div>
<p>
This reference works fine if the present document is a book and <code>ch:model</code>
is a label of a chapter in the book. However,
if the chapter with label <code>ch:model</code> is compiled separately, we would
rather write

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">...as shown in cite{math_eqs_2020}.
</pre></div>
<p>
where <code>math_eqs_2020</code> is the citation label for the external document
as listed in the Publish database. Or if the output format supports
hyperlinks, we would perhaps add such a link:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">the document &quot;Mathematical Equations&quot;:
<span style="color: #BA2121">&quot;http://some.net/doc/matheqs.html&quot;</span> cite{math_eqs_2020}.
</pre></div>
<p>
Such references to
chapters or complete documents are very much like the previously
generalized references, but written with <code>refch</code> instead
of <code>ref</code>:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">refch[internal][cite][external]
</pre></div>
<p>
The only difference between <code>refch</code> and <code>ref</code> is that the former,
for <code>latex</code> and <code>pdflatex</code> output, just use the <code>cite</code> text
and not <code>internal</code> if the labels in the <code>internal</code> text are not found in
the document. To be precise, the reference

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">...as shown in refch[Chapter ref{ch:eqs}][cite{eqs_doc_2008}][
the document &quot;Some Equations&quot;: &quot;http://some.net/someeqs/&quot;].
</pre></div>
<p>
will be

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">...as shown in Chapter ref{ch:eqs}.
</pre></div>
<p>
if <code>ch:eqs</code> is a label defined in the present document. It becomes

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">...as shown in Chapter cite{eqs_doc_2008}.
</pre></div>
<p>
if <code>ch:eqs</code> is not found in the present document <em>and</em> the output
format is <code>latex</code> or <code>pdflatex</code>. In all other cases the result becomes

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">...as shown in
the document &quot;Some Equations&quot;: &quot;http://some.net/someeqs/&quot;].
</pre></div>

<h3 id="___sec42">Tool for Generating Generalizedd References </h3>

<p>
The <code>doconce ref_external</code> command will read all the labels in the
external documents listed in the <code>Externaldocuments:</code> comment
and use the Publish database file of the current document
(specified by <code>BIBFILE:</code>) to automatically
generate substitution commands that translate ordinary LaTeX-style
internal references
to generalized references in DocOnce syntax.
For example, <code>doconce ref_external file1</code>
will find the reference

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">......as shown in Section ref{sec:eqs}.
</pre></div>
<p>
as a reference to a label <code>sec:eqs</code> defined in <code>file2</code>, grab
the title of <code>file2.do.txt</code>, find the bibliographic data in
the Publish file, and make a substitution command

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">doconce subst &quot;Section\s+ref{sec:eqs}&quot; &quot;...&quot; $files
</pre></div>
<p>
where <code>&quot;...&quot;</code> is the complete generalized reference for this particular
reference.
In other words, with <code>doconce ref_external</code> one can automatically
generate generalized references between, for example, chapters in
a book that exist as stand-alone documents.

<p>
<!-- Need to artificially declare the labels referred to in the -->
<!-- box below, otherwise split_html will complain that we have -->
<!-- <code>&lt;a href=&quot;#X&quot;&gt;X&lt;/a&gt;</code>, but not corresponding <code>&lt;a name=&quot;X&quot;&gt;&lt;/a&gt;</code>... Also, we -->
<!-- need to typeset labels in verbatim to avoid them being -->
<!-- translated into something different. -->

<p>
<!-- <code>\&lt;a name=&quot;eqs:g1&quot;&gt;&lt;/a&gt;</code> and <code>\&lt;a name=&quot;eqs:g4&quot;&gt;&lt;/a&gt;</code> -->

<p>
<div class="alert alert-block alert-danger alert-text-normal"><b>References to equations.</b>
Generalized references to equations work well in LaTeX, but
not in other formats as one cannot resolve the equation number
in the external document. It is then better to write different
text using the <code>FORMAT</code> variable in Mako:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">% if FORMAT in (&quot;pdflatex&quot;, &quot;latex&quot;):
By combining ref[\eqref{eqs:g1}-\eqref{eqs:g4}][ in cite{some_doc}][
dummy] we can derive the expression ...
% else:
One can from cite{some_doc} derive the expression
% endif
</pre></div>
<p>
The <code>doconce ref_external</code> tool generates an <code>external</code> text
in case of references to equations that says
&quot;reference to specific <b>equations</b> (label eqs:g1 and eqs:g4)
in external document "name": "link" is not recommended&quot;.
One can then search for this text and make a Mako if-else rewrite
as shown above.
</div>


<p>
<div class="alert alert-block alert-danger alert-text-normal"><b>Limited support.</b>
The <code>doconce ref_external</code> tool cannot correctly handle references
to a range of sections like

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">Sections ref{mydoc:sec1}-ref{mydoc:sec2}
</pre></div>
<p>
The automatically generated generalized references should always
be manually checked and edited!
</div>


<h3 id="___sec43">A Worked Example </h3>

<p>
Here is an example on a specific working generalized reference where
the LaTeX output also has a hyperlink:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">As explained in
ref[Section ref{subsec:ex}][in &quot;Langtangen, 2012&quot;:
<span style="color: #BA2121">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html#subsec:ex&quot;</span>
cite{DocOnce:test}][a &quot;section&quot;:
<span style="color: #BA2121">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html#subsec:ex&quot;</span> in
the document &quot;A Document for Testing DocOnce&quot;:
<span style="color: #BA2121">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html&quot;</span>
cite{DocOnce:test}], DocOnce documents may include tables.
</pre></div>
<p>
With <code>latex</code> or <code>pdflatex</code> as output, this translates to

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">As explained in
Section ref{subsec:ex}, DocOnce documents may include tables.
</pre></div>
<p>
if the label <code>{subsec:ex}</code> appears in the present DocOnce source, and
otherwise

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">As explained in
Section ref{subsec:ex} in &quot;Langtangen, 2012&quot;:
<span style="color: #BA2121">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html#subsec:ex&quot;</span>
cite{DocOnce:test}, DocOnce documents may include tables.
</pre></div>
<p>
The latter DocOnce code is translated to the following
LaTeX code:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">As explained in
Section~\ref{subsec:ex} in
\href{{http://hplgit.github.io/doconce/...}}{Langtangen, 2012}
\cite{DocOnce:test}, DocOnce documents may include tables.
</pre></div>
<p>
In a format different from <code>latex</code> and <code>pdflatex</code>, the effective DocOnce
text becomes

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">As explained in
a &quot;section&quot;:
<span style="color: #BA2121">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html#subsec:ex&quot;</span> in
the document &quot;A Document for Testing DocOnce&quot;:
<span style="color: #BA2121">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html&quot;</span>
cite{DocOnce:test}, DocOnce documents may include tables.
</pre></div>
<p>
The rendered text in the current format becomes

<p>
<blockquote>
    As explained in
    a <a href="http://hplgit.github.io/doconce/test/demo_testdoc.html#subsec:ex" target="_self">section</a> in
    the document <a href="http://hplgit.github.io/doconce/test/demo_testdoc.html" target="_self">A Document for Testing DocOnce</a>
    <a href="._manual029.html#DocOnce:test">[2]</a>, DocOnce documents may include tables.
</blockquote>


<p>
A complete &quot;chapter&quot; reference may look like

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">As explained in
refch[Chapter ref{ch:testdoc}][&quot;Langtangen, 2012&quot;:
<span style="color: #BA2121">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html&quot;</span>
cite{DocOnce:test}][the document
<span style="color: #BA2121">&quot;A Document for Testing DocOnce&quot;</span>:
<span style="color: #BA2121">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html&quot;</span>
cite{DocOnce:test}], DocOnce documents may include tables.
</pre></div>
<p>
The output now, if <code>ch:testdoc</code> is not a label in the document,
becomes in the <code>latex</code> and <code>pdflatex</code> case

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">As explained in
<span style="color: #BA2121">&quot;Langtangen, 2012&quot;</span>:
<span style="color: #BA2121">&quot;http://hplgit.github.io/doconce/test/demo_testdoc.html&quot;</span>
cite{DocOnce:test}, DocOnce documents may include tables.
</pre></div>
<p>
That is, the internal reference <code>Chapter ...</code> is omitted since
it is not meaningful to refer to an external document as &quot;Chapter&quot;.
The resulting rendered text in the current format becomes
<blockquote>
    As explained in
    the document
    <a href="http://hplgit.github.io/doconce/test/demo_testdoc.html" target="_self">A Document for Testing DocOnce</a>
    <a href="._manual029.html#DocOnce:test">[2]</a>, DocOnce documents may include tables.
</blockquote>


<p>
Note that LaTeX cannot
have links to local files, so a complete URL on the form
<code>http://...</code> must be used.

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Tip.</b>
Use <code>doconce ref_external</code> to get an overview of the external
references in a file. Very often you want to rewrite the text
to reduce the amount of external referencing. Remember then
to compile your document before running <code>doconce ref_external</code>
again since the command applies the compiled files to get information
(<code>tmp_preprocess_*</code> or <code>tmp_mako_*</code>) if you use any of the Preprocess
or Mako preprocessors.
</div>


<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Splitting documents into smaller parts is easy!</b>
The generalized references and the <code>doconce ref_external</code> are great
tools for splitting an existing document into smaller parts, say one
chapter into two or one book into two books. Such a split will normally
create a lot of difficulties with cross-document referencing (unless
you just write directly in LaTeX with the <code>xr</code> packcage).
</div>


<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._manual010.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._manual012.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    
